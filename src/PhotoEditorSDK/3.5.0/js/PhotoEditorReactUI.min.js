!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("./PhotoEditorSDK")):"function"==typeof define&&define.amd?define([["./PhotoEditorSDK"]],e):"object"==typeof exports?exports.PhotoEditorReactUI=e(require("./PhotoEditorSDK")):t.PhotoEditorReactUI=e(t.PhotoEditorSDK)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=410)}([function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ImageFormat=e.ColorMatrix=e.now=e.Log=e.cancelAnimationFrame=e.requestAnimationFrame=e.SDK=e.EXIF=e.ReactDOM=e.UniformType=e.OptionType=e.RenderType=e.Base64=e.Color=e.SharedState=e.Constants=e.EventEmitter=e.SDKUtils=e.Vector2=e.ReactBEM=e.BaseComponent=e.Classnames=e.BEM=e.React=e.Utils=e.Promise=void 0;var r=n(66),i=o(r),a=n(113),s=o(a),l=n(342),u=o(l),c=n(127),p=o(c),d=n(120),h=o(d),f=n(123),m=o(f),v=n(175),g=o(v),_=n(269),y=o(_),b=n(250),E=o(b),C=n(268),S=o(C),M=n(271),x=n(124),R=o(x),k=i["default"].Base64,w=i["default"].Color,P=i["default"].Math.ColorMatrix,B=i["default"].EventEmitter,D=i["default"].EXIF,T=i["default"].OptionType,O=i["default"].Promise,A=i["default"].Utils,I=i["default"].RenderType,N=i["default"].ImageFormat,F=i["default"],U=i["default"].UniformType,L=i["default"].Math.Vector2,j="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(337);e.Promise=O,e.Utils=y["default"],e.React=s["default"],e.BEM=h["default"],e.Classnames=p["default"],e.BaseComponent=g["default"],e.ReactBEM=m["default"],e.Vector2=L,e.SDKUtils=A,e.EventEmitter=B,e.Constants=E["default"],e.SharedState=S["default"],e.Color=w,e.Base64=k,e.RenderType=I,e.OptionType=T,e.UniformType=U,e.ReactDOM=u["default"],e.EXIF=D,e.SDK=F,e.requestAnimationFrame=M.requestAnimationFrame,e.cancelAnimationFrame=M.cancelAnimationFrame,e.Log=R["default"],e.now=j,e.ColorMatrix=P,e.ImageFormat=N},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(277),i=o(r),a=n(276),s=o(a),l=n(56),u=o(l);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,u["default"])(e)));t.prototype=(0,s["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i["default"]?(0,i["default"])(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(56),i=o(r);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function o(t,e,n,o,r,i,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,r,i,a,s],c=0;l=new Error(e.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=o},function(t,e){"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,o=0;o<e;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}t.exports=n},function(t,e,n){"use strict";var o=n(16),r=o;t.exports=r},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function o(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==o.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=o()?Object.assign:function(t,e){for(var o,a,s=n(t),l=1;l<arguments.length;l++){o=Object(arguments[l]);for(var u in o)r.call(o,u)&&(s[u]=o[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(o);for(var c=0;c<a.length;c++)i.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},function(t,e,n){"use strict";function o(t){for(var e;e=t._renderedComponent;)t=e;return t}function r(t,e){var n=o(t);n._hostNode=e,e[m]=n}function i(t){var e=t._hostNode;e&&(delete e[m],t._hostNode=null)}function a(t,e){if(!(t._flags&f.hasCachedChildNodes)){var n=t._renderedChildren,i=e.firstChild;t:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],l=o(s)._domID;if(null!=l){for(;null!==i;i=i.nextSibling)if(1===i.nodeType&&i.getAttribute(h)===String(l)||8===i.nodeType&&i.nodeValue===" react-text: "+l+" "||8===i.nodeType&&i.nodeValue===" react-empty: "+l+" "){r(s,i);continue t}c("32",l)}}t._flags|=f.hasCachedChildNodes}}function s(t){if(t[m])return t[m];for(var e=[];!t[m];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,o;t&&(o=t[m]);t=e.pop())n=o,e.length&&a(o,t);return n}function l(t){var e=s(t);return null!=e&&e._hostNode===t?e:null}function u(t){if(void 0===t._hostNode?c("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:c("34"),t=t._hostParent;for(;e.length;t=e.pop())a(t,t._hostNode);return t._hostNode}var c=n(5),p=n(37),d=n(148),h=(n(4),p.ID_ATTRIBUTE_NAME),f=d,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:s,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:a,precacheNode:r,uncacheNode:i};t.exports=v},function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=o},function(t,e,n){"use strict";var o=null;t.exports={debugTool:o}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(174),d=o(p),h=n(225),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._hasBackButton=!0,a._hasDoneButton=!1,a._backButtonClicked=!1,a._bindAll("_onBackClick","_onDoneClick"),a}return(0,u["default"])(e,t),e.prototype._onBackClick=function(t){this._backButtonClicked=!0,this.props.onSwitchControls("back")},e.prototype._onDoneClick=function(t){this.props.onSwitchControls("home")},e.prototype.renderControls=function(){return null},e.prototype.renderOverlayControls=function(){return null},e.prototype.renderWithBEM=function(){var t=this.props.options&&this.props.options.forcedControl,e=this._hasBackButton&&!t?c.ReactBEM.createElement(d["default"],{onClick:this._onBackClick}):null,n=this._hasDoneButton||t?c.ReactBEM.createElement(f["default"],{onClick:this._onDoneClick}):null;return c.ReactBEM.createElement("div",{bem:"$b:controls"},this.renderOverlayControls(),c.ReactBEM.createElement("div",{bem:"e:table"},e,this.renderControls(),n))},e}(c.BaseComponent);e["default"]=m,m.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=function(){function t(){(0,i["default"])(this,t)}return t.prototype.getInitialSharedState=function(){return{}},t.prototype.isAvailable=function(t){return!1},t}();a.topBarControlsComponent=null,a.controlsComponent=null,a.canvasControlsComponent=null,a.identifier=null,a.iconPath=null,a.languageKey=null,a.defaultOptions={},e["default"]=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(125),i=o(r);e["default"]=function(t,e,n){return e in t?(0,i["default"])(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var o=n(82)("wks"),r=n(58),i=n(24).Symbol,a="function"==typeof i,s=t.exports=function(t){return o[t]||(o[t]=a&&i[t]||(a?i:r)("Symbol."+t))};s.store=o},function(t,e){"use strict";function n(t){return function(){return t}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},t.exports=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=25,f=12,m=function(t){function e(){(0,i["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._needsStyleFixes=!0,n._isDragging=!1,n._bindAll("_onButtonDragStart","_onButtonDrag","_onButtonDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop","_onListScroll"),n.state={buttonSize:0,buttonPosition:0,buttonVisible:!1},n}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.update()},e.prototype.fixStyles=function(){c.Utils.isMobile()||this._updateListSize()},e.prototype._onListScroll=function(){if(!this._isDragging){var t=this._getDirection(),n=void 0,o=void 0,r=void 0;t===e.HORIZONTAL?(n=this._list.scrollWidth-this._list.offsetWidth,o=this._list.scrollLeft,r=this._node.offsetWidth-this.state.buttonSize):t===e.VERTICAL&&(n=this._list.scrollHeight-this._list.offsetHeight,o=this._list.scrollTop,r=this._node.offsetHeight-this.state.buttonSize);var i=o/n;this.setState({buttonPosition:r*i})}},e.prototype._onButtonDragStart=function(t){this._isDragging=!0,this._initialButtonPosition=this.state.buttonPosition||0},e.prototype._onButtonDrag=function(t){var n=this._getDirection(),o=void 0;n===e.HORIZONTAL?o=this._initialButtonPosition+t.x:n===e.VERTICAL&&(o=this._initialButtonPosition+t.y),this._setButtonPosition(o)},e.prototype._onButtonDragStop=function(){this._isDragging=!1},e.prototype._onBarDragStart=function(t){var n=c.Utils.getEventPosition(t);this._initialPosition=n.clone();var o=this._node.getBoundingClientRect(),r=new c.Vector2(o.left,o.top),i=n.clone().subtract(r),a=this._getDirection();a===e.HORIZONTAL?this._setButtonPosition(i.x-this.state.buttonSize/2):a===e.VERTICAL&&this._setButtonPosition(i.y-this.state.buttonSize/2),document.addEventListener("mousemove",this._onBarDrag),document.addEventListener("touchmove",this._onBarDrag),document.addEventListener("mouseup",this._onBarDragStop),document.addEventListener("touchend",this._onBarDragStop)},e.prototype._onBarDrag=function(t){var n=c.Utils.getEventPosition(t),o=this._node.getBoundingClientRect(),r=new c.Vector2(o.left,o.top),i=n.clone().subtract(r),a=this._getDirection();a===e.HORIZONTAL?this._setButtonPosition(i.x-this.state.buttonSize/2):a===e.VERTICAL&&this._setButtonPosition(i.y-this.state.buttonSize/2)},e.prototype._onBarDragStop=function(){document.removeEventListener("mousemove",this._onBarDrag),document.removeEventListener("touchmove",this._onBarDrag),document.removeEventListener("mouseup",this._onBarDragStop),document.removeEventListener("touchend",this._onBarDragStop)},e.prototype._setButtonPosition=function(t){var n=this._getDirection(),o=void 0,r=void 0;n===e.HORIZONTAL?(o=this._node.offsetWidth-this.state.buttonSize,r=this._list.scrollWidth-this._list.offsetWidth):n===e.VERTICAL&&(o=this._node.offsetHeight-this.state.buttonSize,r=this._list.scrollHeight-this._list.offsetHeight),t=Math.max(0,t),t=Math.min(t,o),this.setState({buttonPosition:t});var i=t/o,a=r*i;n===e.HORIZONTAL?this._list.scrollLeft=a:n===e.VERTICAL&&(this._list.scrollTop=a)},e.prototype._updateButtonSize=function(t){var n=0,o=!1,r=void 0,i=void 0,a=this._getDirection();a===e.HORIZONTAL?(r=this._list.clientWidth,i=this._list.scrollWidth):a===e.VERTICAL&&(r=this._list.offsetHeight,i=this._list.scrollHeight),n=r/i*r,o=i>r,this.setState({buttonSize:n,buttonVisible:o},t)},e.prototype._updateListSize=function(){if(this._list){var t=this._getDirection();if(t===e.HORIZONTAL){this._list.style.height="";var n=this._getFullListDimensions();this._listSize=n.y}else if(t===e.VERTICAL){this._list.style.width="";var o=this._getFullListDimensions();this._listSize=o.x}}},e.prototype._getFullListDimensions=function(){var t=this._list.getBoundingClientRect();return new c.Vector2(t.width,t.height)},e.prototype.update=function(){var t=this;if(!c.Utils.isMobile()){var n=this.refs,o=n.root,r=n.list;this._node=o,this._list=r;var i=this._getDirection();this._updateButtonSize(function(){t._listSize||t._updateListSize();var n=t._listSize;t.state.buttonVisible&&(n+=2*h),i===e.HORIZONTAL?(t._list.style.height=n+"px",t._node.style.top=t._listSize-f+"px",t._node.style.width=t._list.offsetWidth+"px"):i===e.VERTICAL&&(t._list.style.width=n+"px",t._node.style.left=t._listSize-f+"px",t._node.style.height=t._list.offsetHeight+"px")}),this._list.addEventListener("scroll",this._onListScroll)}},e.prototype._getDirection=function(){return this.props.direction||"horizontal"},e.prototype._getButtonStyle=function(){var t=this._getDirection();return"horizontal"===t?{left:this.state.buttonPosition,width:this.state.buttonSize}:{top:this.state.buttonPosition,height:this.state.buttonSize}},e.prototype.getList=function(){return this.refs.list},e.prototype.getRoot=function(){return this.refs.root},e.prototype.renderWithBEM=function(){if(c.Utils.isMobile())return this.props.children;var t=this._getButtonStyle(),e={display:this.state.buttonVisible?"block":"none"},n=c.React.cloneElement(this.props.children,{ref:"list"});return c.ReactBEM.createElement("div",null,n,c.ReactBEM.createElement("div",{bem:"$b:scrollbar m:"+(this.props.direction||"horizontal")+" m:"+(this.state.buttonVisible?"visible":"invisible"),ref:"root",style:e,onMouseDown:this._onBarDragStart,onTouchStart:this._onBarDragStart},c.ReactBEM.createElement(d["default"],{onStart:this._onButtonDragStart,onDrag:this._onButtonDrag,onStop:this._onButtonDragStop},c.ReactBEM.createElement("div",{bem:"e:bar",style:t,onMouseDown:this._onButtonDown}))))},e}(c.BaseComponent);e["default"]=m,m.HORIZONTAL="horizontal",m.VERTICAL="vertical",m.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(126),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=function(t){function e(n,o,r){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];(0,s["default"])(this,e);var a=(0,u["default"])(this,t.call(this));return a.type=n,a.title=o,a.text=r,a.overlay=i,a.data=null,a}return(0,p["default"])(e,t),e.prototype.setData=function(t){this.data=t,this.emit("update")},e.prototype.close=function(){this.emit("close")},e}(d.EventEmitter),f=function(t){function e(){(0,s["default"])(this,e);var n=(0,u["default"])(this,t.call(this));return n._modals=[],n}return(0,p["default"])(e,t),e.prototype.displayLoading=function(t){var e=new h("loading",null,t);return this.addModal(e),e},e.prototype.displayProgress=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=new h("progress",null,t);return n.setData({progress:e}),this.addModal(n),n},e.prototype.displayWarning=function(t,e){var n=new h("warning",t,e);return this.addModal(n),n},e.prototype.displayError=function(t,e){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],o=new h("error",t,e,n);return this.addModal(o),o},e.prototype.addModal=function(t){var e=this;this._modals.push(t),t.on("close",function(){e.removeModal(t)}),t.on("update",function(){e.emit("update")}),this.emit("update")},e.prototype.removeModal=function(t){var e=this._modals.indexOf(t);this._modals.splice(e,1),this.emit("update")},e.prototype.getModals=function(){return this._modals},(0,i["default"])(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(d.EventEmitter);e["default"]=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onDragStart","_onDragMove","_onDragEnd"),a}return(0,u["default"])(e,t),e.prototype._onDragStart=function(t){if(!this.props.disabled){t.preventDefault(),t.stopPropagation(),this._initialMousePosition=c.Utils.getEventPosition(t),document.addEventListener("mousemove",this._onDragMove),document.addEventListener("touchmove",this._onDragMove),document.addEventListener("mouseup",this._onDragEnd),document.addEventListener("touchend",this._onDragEnd);var e=this.refs.element,n=e.getBoundingClientRect(),o=new c.Vector2(n.left,n.top),r=this._initialMousePosition.clone().subtract(o);this.props.onStart&&this.props.onStart(r,t)}},e.prototype._onDragMove=function(t){t.preventDefault(),t.stopPropagation();var e=c.Utils.getEventPosition(t);if(e){var n=e.clone().subtract(this._initialMousePosition);this.props.onDrag&&this.props.onDrag(n,t)}},e.prototype._onDragEnd=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this._onDragMove(t),document.removeEventListener("mousemove",this._onDragMove),document.removeEventListener("touchmove",this._onDragMove),document.removeEventListener("mouseup",this._onDragEnd),document.removeEventListener("touchend",this._onDragEnd),this.props.onStop&&this.props.onStop(t)},e.prototype.render=function(){if(!this.props.children||this.props.children instanceof Array)throw new Error("DraggableComponent expects exactly one child.");return c.React.cloneElement(this.props.children,{onMouseDown:this._onDragStart,onTouchStart:this._onDragStart,ref:"element"})},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return void 0!==t.ref}function r(t){return void 0!==t.key}var i=n(7),a=n(28),s=(n(6),n(161),Object.prototype.hasOwnProperty),l="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,u={key:!0,ref:!0,__self:!0,__source:!0},c=function(t,e,n,o,r,i,a){var s={$$typeof:l,type:t,key:e,ref:n,props:a,_owner:i};return s};c.createElement=function(t,e,n){var i,l={},p=null,d=null,h=null,f=null;if(null!=e){o(e)&&(d=e.ref),r(e)&&(p=""+e.key),h=void 0===e.__self?null:e.__self,f=void 0===e.__source?null:e.__source;for(i in e)s.call(e,i)&&!u.hasOwnProperty(i)&&(l[i]=e[i])}var m=arguments.length-2;if(1===m)l.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];l.children=v}if(t&&t.defaultProps){var _=t.defaultProps;for(i in _)void 0===l[i]&&(l[i]=_[i])}return c(t,p,d,h,f,a.current,l)},c.createFactory=function(t){var e=c.createElement.bind(null,t);return e.type=t,e},c.cloneAndReplaceKey=function(t,e){var n=c(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},c.cloneElement=function(t,e,n){var l,p=i({},t.props),d=t.key,h=t.ref,f=t._self,m=t._source,v=t._owner;if(null!=e){o(e)&&(h=e.ref,v=a.current),r(e)&&(d=""+e.key);var g;t.type&&t.type.defaultProps&&(g=t.type.defaultProps);for(l in e)s.call(e,l)&&!u.hasOwnProperty(l)&&(void 0===e[l]&&void 0!==g?p[l]=g[l]:p[l]=e[l])}var _=arguments.length-2;if(1===_)p.children=n;else if(_>1){for(var y=Array(_),b=0;b<_;b++)y[b]=arguments[b+2];p.children=y}return c(t.type,d,h,f,m,v,p)},c.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===l},c.REACT_ELEMENT_TYPE=l,t.exports=c},function(t,e,n){"use strict";function o(){k.ReactReconcileTransaction&&E?void 0:c("123")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled(!0)}function i(t,e,n,r,i,a){o(),E.batchedUpdates(t,e,n,r,i,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==g.length?c("124",e,g.length):void 0,g.sort(a),_++;for(var n=0;n<e;n++){var o=g[n],r=o._pendingCallbacks;o._pendingCallbacks=null;var i;if(f.logTopLevelRenders){var s=o;o._currentElement.props===o._renderedComponent._currentElement&&(s=o._renderedComponent),i="React update: "+s.getName(),console.time(i)}if(m.performUpdateIfNecessary(o,t.reconcileTransaction,_),i&&console.timeEnd(i),r)for(var l=0;l<r.length;l++)t.callbackQueue.enqueue(r[l],o.getPublicInstance())}}function l(t){return o(),E.isBatchingUpdates?(g.push(t),void(null==t._updateBatchNumber&&(t._updateBatchNumber=_+1))):void E.batchedUpdates(l,t)}function u(t,e){E.isBatchingUpdates?void 0:c("125"),y.enqueue(t,e),b=!0}var c=n(5),p=n(7),d=n(143),h=n(27),f=n(151),m=n(38),v=n(53),g=(n(4),[]),_=0,y=d.getPooled(),b=!1,E=null,C={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),x()):g.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},M=[C,S];p(r.prototype,v.Mixin,{getTransactionWrappers:function(){return M},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return v.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),h.addPoolingTo(r);var x=function(){for(;g.length||b;){if(g.length){var t=r.getPooled();t.perform(s,null,t),r.release(t)}if(b){b=!1;var e=y;y=d.getPooled(),e.notifyAll(),d.release(e)}}},R={injectReconcileTransaction:function(t){t?void 0:c("126"),k.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:c("127"),"function"!=typeof t.batchedUpdates?c("128"):void 0,"boolean"!=typeof t.isBatchingUpdates?c("129"):void 0,E=t}},k={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:l,flushBatchedUpdates:x,injection:R,asap:u};t.exports=k},function(t,e,n){"use strict";var o=n(60),r=o({bubbled:null,captured:null}),i=o({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:i,PropagationPhases:r};t.exports=a},function(t,e,n){"use strict";function o(t,e,n,o){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s?this[i]=s(n):"target"===i?this.target=o:this[i]=n[i]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var r=n(7),i=n(27),a=n(16),s=(n(6),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),o.Interface=l,o.augmentClass=function(t,e){var n=this,o=function(){};o.prototype=n.prototype;var a=new o;r(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=r({},n.Interface,e),t.augmentClass=n.augmentClass,i.addPoolingTo(t,i.fourArgumentPooler)},i.addPoolingTo(o,i.fourArgumentPooler),t.exports=o},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var o=n(29),r=n(130),i=n(85),a=Object.defineProperty;e.f=n(30)?Object.defineProperty:function(t,e,n){if(o(t),e=i(e,!0),o(n),r)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){"use strict";var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=n},function(t,e,n){"use strict";var o=n(5),r=(n(4),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),i=function(t,e){var n=this;if(n.instancePool.length){var o=n.instancePool.pop();return n.call(o,t,e),o}return new n(t,e)},a=function(t,e,n){var o=this;if(o.instancePool.length){var r=o.instancePool.pop();return o.call(r,t,e,n),r}return new o(t,e,n)},s=function(t,e,n,o){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n,o),i}return new r(t,e,n,o)},l=function(t,e,n,o,r){var i=this;if(i.instancePool.length){var a=i.instancePool.pop();return i.call(a,t,e,n,o,r),a}return new i(t,e,n,o,r)},u=function(t){var e=this;t instanceof e?void 0:o("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,p=r,d=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||p,n.poolSize||(n.poolSize=c),n.release=u,n},h={addPoolingTo:d,oneArgumentPooler:r,twoArgumentPooler:i,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:l};t.exports=h},function(t,e){"use strict";var n={current:null};t.exports=n},function(t,e,n){var o=n(44);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(43)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var o=n(24),r=n(14),i=n(74),a=n(34),s="prototype",l=function(t,e,n){var u,c,p,d=t&l.F,h=t&l.G,f=t&l.S,m=t&l.P,v=t&l.B,g=t&l.W,_=h?r:r[e]||(r[e]={}),y=_[s],b=h?o:f?o[e]:(o[e]||{})[s];h&&(n=e);for(u in n)c=!d&&b&&void 0!==b[u],c&&u in _||(p=c?b[u]:n[u],_[u]=h&&"function"!=typeof b[u]?n[u]:v&&c?i(p,o):g&&b[u]==p?function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e[s]=t[s],e}(p):m&&"function"==typeof p?i(Function.call,p):p,m&&((_.virtual||(_.virtual={}))[u]=p,t&l.R&&y&&!y[u]&&a(y,u,p)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var o=n(131),r=n(75);t.exports=function(t){return o(r(t))}},function(t,e,n){var o=n(25),r=n(46);t.exports=n(30)?function(t,e,n){return o.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports={}},function(t,e,n){"use strict";function o(t){if(v){var e=t.node,n=t.children;if(n.length)for(var o=0;o<n.length;o++)g(e,n[o],null);else null!=t.html?p(e,t.html):null!=t.text&&h(e,t.text)}}function r(t,e){t.parentNode.replaceChild(e.node,t),o(e)}function i(t,e){v?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){v?t.html=e:p(t.node,e)}function s(t,e){v?t.text=e:h(t.node,e)}function l(){return this.node.nodeName}function u(t){return{node:t,children:[],html:null,text:null,toString:l}}var c=n(91),p=n(65),d=n(105),h=n(168),f=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=d(function(t,e,n){e.node.nodeType===m||e.node.nodeType===f&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===c.html)?(o(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),o(e))});u.insertTreeBefore=g,u.replaceChildWithTree=r,u.queueChild=i,u.queueHTML=a,u.queueText=s,t.exports=u},function(t,e,n){"use strict";function o(t,e){return(t&e)===e}var r=n(5),i=(n(4),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=i,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},u=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var p in n){s.properties.hasOwnProperty(p)?r("48",p):void 0;var d=p.toLowerCase(),h=n[p],f={attributeName:d,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:o(h,e.MUST_USE_PROPERTY),hasBooleanValue:o(h,e.HAS_BOOLEAN_VALUE),hasNumericValue:o(h,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:o(h,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:o(h,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:r("50",p),l.hasOwnProperty(p)){var m=l[p];f.attributeName=m}a.hasOwnProperty(p)&&(f.attributeNamespace=a[p]),u.hasOwnProperty(p)&&(f.propertyName=u[p]),c.hasOwnProperty(p)&&(f.mutationMethod=c[p]),s.properties[p]=f}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];
if(n(t))return!0}return!1},injection:i};t.exports=s},function(t,e,n){"use strict";function o(){r.attachRefs(this,this._currentElement)}var r=n(380),i=(n(10),n(6),{mountComponent:function(t,e,n,r,i){var a=t.mountComponent(e,n,r,i);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(o,t),a},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){r.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,i){var a=t._currentElement;if(e!==a||i!==t._context){var s=r.shouldUpdateRefs(a,e);s&&r.detachRefs(t,a),t.receiveComponent(e,n,i),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(o,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}});t.exports=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onCanvasZoomDone"),a}return(0,u["default"])(e,t),e.prototype._performHitTest=function(t){var e=this.refs.container,n=e.getBoundingClientRect(),o=new c.Vector2(n.left,n.top),r=t.subtract(o),i=this.context.editor,a=i.controls.getAvailable();for(var s in a){var l=a[s],u=l.clickAtPosition&&l.clickAtPosition(r,i);if(u)return u.selectedSprite===this.getSharedState("selectedSprite")||(this.props.onSwitchControls(l,u),!0)}return!1},e.prototype._onCanvasZoomDone=function(){this.forceUpdate()},e.prototype._bindEvents=function(){t.prototype._bindEvents.call(this),this.context.mediator.on(c.Constants.EVENTS.ZOOM_DONE,this._onCanvasZoomDone)},e.prototype._unbindEvents=function(){t.prototype._unbindEvents.call(this),this.context.mediator.off(c.Constants.EVENTS.ZOOM_DONE,this._onCanvasZoomDone)},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(226),d=o(p),h=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._renderHeader=function(){return this.context.options.showHeader?c.ReactBEM.createElement(d["default"],null):null},e.prototype._renderScreen=function(){return c.ReactBEM.createElement("div",null)},e.prototype.renderWithBEM=function(){var t="b:screen";return this.context.options.showHeader||(t+=" m:noHeader"),c.ReactBEM.createElement("div",{bem:t,className:this.props.visible?null:"is-hidden"},this._renderHeader(),this._renderScreen())},e}(c.BaseComponent);e["default"]=h,h.propTypes={editor:c.React.PropTypes.any},h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(19),f=o(h),m=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return i._bindAll("_onKnobDragStart","_onKnobDrag","_onBarDragStart","_onBarDrag","_onMiddleDotDragStart"),i.state={value:i.props.value||0,sliderPosition:0,foregroundLeft:0,foregroundWidth:0},i}return(0,p["default"])(e,t),e.prototype.componentDidMount=function(){this._setValue(this.state.value,!1)},e.prototype.componentWillReceiveProps=function(t){t.value!==this.state.value&&this._setValue(t.value,!1)},e.prototype._onMiddleDotDragStart=function(){var t=this.props.minValue+(this.props.maxValue-this.props.minValue)/2;this._setValue(t)},e.prototype._onKnobDragStart=function(t){this._initialSliderPosition=this.state.sliderPosition,this._initialPosition=t},e.prototype._onKnobDrag=function(t){var e=this.refs.bar,n=e.offsetWidth,o=this._initialSliderPosition+t.x;o=Math.max(0,Math.min(o,n));var r=o/n,i=this.props.minValue+(this.props.maxValue-this.props.minValue)*r;this._setValue(i)},e.prototype._onBarDragStart=function(t){this._initialPosition=t.clone();var e=this.refs.bar,n=e.offsetWidth,o=t.x/n,r=this.props.minValue+(this.props.maxValue-this.props.minValue)*o;this._setValue(r)},e.prototype._onBarDrag=function(t){var e=this._initialPosition.clone().add(t),n=this.refs.bar,o=n.offsetWidth,r=e.x/o,i=this.props.minValue+(this.props.maxValue-this.props.minValue)*r;i=Math.max(this.props.minValue,Math.min(this.props.maxValue,i)),this._setValue(i)},e.prototype._getKnobStyle=function(){return{left:this.state.sliderPosition}},e.prototype._getForegroundStyle=function(){return{left:this.state.foregroundLeft,width:this.state.foregroundWidth}},e.prototype._displayMiddleDot=function(){return this.props.middleDot!==!1},e.prototype._setValue=function(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1];t=Math.round(t);var n=this.props,o=n.minValue,r=n.maxValue,i=(t-o)/(r-o),a=this.refs.bar,s=a.offsetWidth,l=s*i,u=i*s,c=0;this._displayMiddleDot()&&(u=Math.abs(i-.5)*s,c=i<.5?.5*s-u:"50%"),this.setState({value:t,sliderPosition:l,foregroundWidth:u,foregroundLeft:c}),e&&this.props.onChange&&this.props.onChange(t)},e.prototype._buildValue=function(t){return t%1!==0&&(t=t.toFixed(2)),this.props.positiveValuePrefix&&t>=0&&(t=""+this.props.positiveValuePrefix+t),this.props.valueUnit&&(t+=this.props.valueUnit),t},e.prototype.renderWithBEM=function(){var t=null;this._displayMiddleDot()&&(t=d.ReactBEM.createElement(f["default"],{onStart:this._onMiddleDotDragStart},d.ReactBEM.createElement("div",{bem:"e:middleDot"})));var e={style:this._getForegroundStyle()},n="$b:slider"+(this.props.style?" m:"+this.props.style:"");return d.ReactBEM.createElement("div",{bem:n},d.ReactBEM.createElement("div",{bem:"$e:bar",ref:"bar"},d.ReactBEM.createElement(f["default"],{onStart:this._onBarDragStart,onDrag:this._onBarDrag},d.ReactBEM.createElement("div",null,d.ReactBEM.createElement("div",{bem:"$e:background"}),d.ReactBEM.createElement("div",(0,i["default"])({bem:"$e:foreground"},e)),d.ReactBEM.createElement(f["default"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},d.ReactBEM.createElement("div",{bem:"e:knob b:knob m:slider",style:this._getKnobStyle()})))),t),d.ReactBEM.createElement("div",{bem:"$e:labels"},d.ReactBEM.createElement("div",{bem:"e:label m:lowerBoundary"},this._buildValue(this.props.minValue)),d.ReactBEM.createElement("div",{bem:"e:label m:value"},this.props.label," ",this._buildValue(this.state.value)),d.ReactBEM.createElement("div",{bem:"e:label m:upperBoundary"},this._buildValue(this.props.maxValue))))},e}(d.BaseComponent);e["default"]=m,m.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(275),i=o(r);e["default"]=i["default"]||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var o=n(135),r=n(76);t.exports=Object.keys||function(t){return o(t,r)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var o={};t.exports=o},function(t,e){function n(t){return l===setTimeout?setTimeout(t,0):l.call(null,t,0)}function o(t){u===clearTimeout?clearTimeout(t):u.call(null,t)}function r(){h&&p&&(h=!1,p.length?d=p.concat(d):f=-1,d.length&&i())}function i(){if(!h){var t=n(r);h=!0;for(var e=d.length;e;){for(p=d,d=[];++f<e;)p&&p[f].run();f=-1,e=d.length}p=null,h=!1,o(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var l,u,c=t.exports={};!function(){try{l=setTimeout}catch(t){l=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(t){u=function(){throw new Error("clearTimeout is not defined")}}}();var p,d=[],h=!1,f=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];d.push(new a(t,e)),1!==d.length||h||n(i)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e,n){"use strict";var o=n(5),r=n(92),i=n(93),a=n(99),s=n(160),l=n(162),u=(n(4),{}),c=null,p=function(t,e){t&&(i.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},d=function(t){return p(t,!0)},h=function(t){return p(t,!1)},f=function(t){return"."+t._rootNodeID},m={injection:{injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n?o("94",e,typeof n):void 0;var i=f(t),a=u[e]||(u[e]={});a[i]=n;var s=r.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,n)},getListener:function(t,e){var n=u[e],o=f(t);return n&&n[o]},deleteListener:function(t,e){var n=r.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var o=u[e];if(o){var i=f(t);delete o[i]}},deleteAllListeners:function(t){var e=f(t);for(var n in u)if(u.hasOwnProperty(n)&&u[n][e]){var o=r.registrationNameModules[n];o&&o.willDeleteListener&&o.willDeleteListener(t,n),delete u[n][e]}},extractEvents:function(t,e,n,o){for(var i,a=r.plugins,l=0;l<a.length;l++){var u=a[l];if(u){var c=u.extractEvents(t,e,n,o);c&&(i=s(i,c))}}return i},enqueueEvents:function(t){t&&(c=s(c,t))},processEventQueue:function(t){var e=c;c=null,t?l(e,d):l(e,h),c?o("95"):void 0,a.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=m},function(t,e,n){"use strict";function o(t,e,n){var o=e.dispatchConfig.phasedRegistrationNames[n];return y(t,o)}function r(t,e,n){var r=e?_.bubbled:_.captured,i=o(t,n,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}function i(t){t&&t.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(t._targetInst,r,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?m.getParentInstance(e):null;m.traverseTwoPhase(n,r,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var o=n.dispatchConfig.registrationName,r=y(t,o);r&&(n._dispatchListeners=v(n._dispatchListeners,r),n._dispatchInstances=v(n._dispatchInstances,t))}}function l(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function u(t){g(t,i)}function c(t){g(t,a)}function p(t,e,n,o){m.traverseEnterLeave(n,o,s,t,e)}function d(t){g(t,l)}var h=n(22),f=n(49),m=n(93),v=n(160),g=n(162),_=(n(6),h.PropagationPhases),y=f.getListener,b={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:p};t.exports=b},function(t,e){"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(23),i=n(108),a={view:function(t){if(t.view)return t.view;var e=i(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};r.augmentClass(o,a),t.exports=o},function(t,e,n){"use strict";var o=n(5),r=(n(4),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,r,i,a,s,l){this.isInTransaction()?o("27"):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=t.call(e,n,r,i,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o=e[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=o.initialize?o.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(r){}}}},closeAll:function(t){this.isInTransaction()?void 0:o("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r,a=e[n],s=this.wrapperInitData[n];try{r=!0,s!==i.OBSERVED_ERROR&&a.close&&a.close.call(this,s),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}}),i={Mixin:r,OBSERVED_ERROR:{}};t.exports=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(41),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onSliderValueChange"),a.state={value:a.props.value},a}return(0,u["default"])(e,t),e.prototype.componentWillReceiveProps=function(t){t.value!==this.state.value&&(this.state.value=t.value)},e.prototype._onSliderValueChange=function(t){this.props.onChange&&this.props.onChange(t),this.setState({value:t})},e.prototype._renderSlider=function(){var t=c.SDKUtils.defaults(this.props,{style:"",middleDot:!1,minValue:1,maxValue:100,label:"Label",onChange:this._onSliderValueChange,value:this.state.value});return c.ReactBEM.createElement(d["default"],t)},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:controls e:overlay m:large m:dark"},this._renderSlider())},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderContent=function(){return this.props.children},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:topBar e:row"},c.ReactBEM.createElement("div",{bem:"e:cell"},this.renderContent()))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(279),i=o(r),a=n(278),s=o(a),l="function"==typeof s["default"]&&"symbol"==typeof i["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===l(i["default"])?function(t){return"undefined"==typeof t?"undefined":l(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":"undefined"==typeof t?"undefined":l(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},function(t,e,n){"use strict";var o=n(310)(!0);n(132)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var o=n(4),r=function(t){var e,n={};t instanceof Object&&!Array.isArray(t)?void 0:o(!1);for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n};t.exports=r},function(t,e){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},o={getHostProps:function(t,e){if(!e.disabled)return e;var o={};for(var r in e)!n[r]&&e.hasOwnProperty(r)&&(o[r]=e[r]);return o}};t.exports=o},function(t,e,n){"use strict";function o(t){return Object.prototype.hasOwnProperty.call(t,v)||(t[v]=f++,d[t[v]]={}),d[t[v]]}var r,i=n(7),a=n(22),s=n(92),l=n(372),u=n(159),c=n(403),p=n(109),d={},h=!1,f=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=i({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=t}},setEnabled:function(t){g.ReactEventListener&&g.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,r=o(n),i=s.registrationNameDependencies[t],l=a.topLevelTypes,u=0;u<i.length;u++){var c=i[u];r.hasOwnProperty(c)&&r[c]||(c===l.topWheel?p("wheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):p("mousewheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?p("scroll",!0)?g.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(p("focus",!0)?(g.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):p("focusin")&&(g.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),r[l.topBlur]=!0,r[l.topFocus]=!0):m.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,m[c],n),r[c]=!0)}},trapBubbledEvent:function(t,e,n){return g.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return g.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!r&&!h){var t=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(t),h=!0}}});t.exports=g},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(52),i=n(159),a=n(107),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+i.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+i.currentScrollTop}};r.augmentClass(o,s),t.exports=o},function(t,e){"use strict";function n(t){var e=""+t,n=r.exec(e);if(!n)return e;var o,i="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#x27;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}s!==a&&(i+=e.substring(s,a)),s=a+1,i+=o}return s!==a?i+e.substring(s,a):i}function o(t){return"boolean"==typeof t||"number"==typeof t?""+t:n(t)}var r=/["'&<>]/;t.exports=o},function(t,e,n){"use strict";var o,r=n(9),i=n(91),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(105),u=l(function(t,e){if(t.namespaceURI!==i.svg||"innerHTML"in t)t.innerHTML=e;else{o=o||document.createElement("div"),o.innerHTML="<svg>"+e+"</svg>";for(var n=o.firstChild.childNodes,r=0;r<n.length;r++)t.appendChild(n[r])}});if(r.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),c=null}t.exports=u},function(e,n){e.exports=t},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(180),f=o(h),m=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return a._value=a.props.initialValue.clone(),a._bindAll("_onButtonClick","_onValueChange","_onColorPickerOpen","_onColorPickerClose"),a._events=(0,i["default"])({},d.Constants.EVENTS.COLORPICKER_OPEN,a._onColorPickerOpen),a.state={overlayVisible:!1},a._transparentPatternCanvas=d.Utils.createTransparentPatternCanvas(),a}return(0,p["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderColor()},e.prototype.componentDidUpdate=function(){this._renderColor()},e.prototype._onColorPickerOpen=function(t){t!==this&&this.setState({overlayVisible:!1})},e.prototype._onColorPickerClose=function(){this.setState({overlayVisible:!1})},e.prototype._onButtonClick=function(t){t.preventDefault(),t.stopPropagation(),this.state.overlayVisible||this._emitEvent(d.Constants.EVENTS.COLORPICKER_OPEN,this),this.setState({overlayVisible:!this.state.overlayVisible})},e.prototype._onValueChange=function(t){this._value=t,this._renderColor(),this.forceUpdate(),this.props.onChange&&this.props.onChange(t)},e.prototype._renderColor=function(){var t=this.refs.canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;var n=e.createPattern(this._transparentPatternCanvas,"repeat");e.fillStyle=n,e.fillRect(0,0,t.width,t.height),e.fillStyle=this._value.toRGBA(),e.fillRect(0,0,t.width,t.height)},e.prototype.renderWithBEM=function(){var t=null;this.state.overlayVisible&&(t=d.ReactBEM.createElement(f["default"],{initialValue:this._value,onChange:this._onValueChange,onClose:this._onColorPickerClose,alpha:this.props.alpha}));var e=this.state.overlayVisible?"is-active":null;return d.ReactBEM.createElement("bem",{specifier:"$b:controls"},d.ReactBEM.createElement("div",{bem:"$b:colorPicker",className:e,onClick:this._onButtonClick},d.ReactBEM.createElement("canvas",{bem:"e:preview",ref:"canvas"}),d.ReactBEM.createElement("div",{bem:"e:label"},this.props.label||this._t("generic.color")),t))},e}(d.BaseComponent);e["default"]=m,m.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onRemoveClick","_onItemDragStart","_onItemDragStop","_onItemDrag","_onSpriteUpdate"),a}return(0,u["default"])(e,t),e.prototype._getAbsoluteSpritePosition=function(){var t=this.context.editor,e=t.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(e)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.props.sprite.on("update",this._onSpriteUpdate)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.props.sprite.off("update",this._onSpriteUpdate)},e.prototype.componentWillReceiveProps=function(t){this.props.sprite.off("update",this._onSpriteUpdate),t.sprite.on("update",this._onSpriteUpdate)},e.prototype._onSpriteUpdate=function(){this.forceUpdate()},e.prototype._onItemDragStart=function(){var t=this.props.sprite;this._initialPosition=t.getPosition(),this.props.onDragStart&&this.props.onDragStart()},e.prototype._onItemDrag=function(t){var e=this.props.sprite,n=this.context.editor,o=n.getOutputDimensions(),r=this._initialPosition.clone().add(t.divide(o));e.setPosition(r)},e.prototype._onItemDragStop=function(){this.props.onDragStop&&this.props.onDragStop()},e.prototype._onRemoveClick=function(t){t.stopPropagation();var e=this.props,n=e.operation,o=e.sprite,r=e.onRemove;n.removeSprite(o),r&&r()},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=o(r),a=n(13),s=o(a),l=n(0),u=o(l),c=n(3),p=o(c),d=n(2),h=o(d),f=n(1),m=n(215),v=o(m),g=n(214),_=o(g),y=n(213),b=o(y),E=n(39),C=o(E),S=f.SDK.Operations.SpriteOperation,M=S.Sticker,x=S.Text,R=S.Brush,k=function(t){function e(){var n;(0,u["default"])(this,e);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];var a=(0,p["default"])(this,t.call.apply(t,[this].concat(r)));return a._bindAll("_onCanvasClick","_onSpriteDragStart","_onSpriteDragStop","_onOperationUpdated","_onOperationRemoved","_onSpriteFlip","_onSpriteTakeToFront","_onSpriteRemove"),a._canvasClickDisabled=!1,a._events=(n={},(0,s["default"])(n,f.Constants.EVENTS.OPERATION_UPDATED,a._onOperationUpdated),(0,s["default"])(n,f.Constants.EVENTS.OPERATION_REMOVED,a._onOperationRemoved),n),a}return(0,h["default"])(e,t),e.prototype._onOperationRemoved=function(t){var e=this.getSharedState("selectedSprite");if(t===this.getSharedState("operation")&&e){var n=this.context.editor,o=n.operations.getOrCreate("sprite",{sprites:[e],enabled:!1});this.setSharedState({operation:o,operationExistedBefore:!1,initialOptions:{}})}},e.prototype._onOperationUpdated=function(t){var e=this.getSharedState("selectedSprite");if(t===this.getSharedState("operation")&&e){var n=t.getSprites();n.indexOf(e)===-1&&n.push(e),this.forceUpdate()}},e.prototype._onItemBlur=function(){},e.prototype._onCanvasClick=function(t){if(!this._canvasClickDisabled){var e=this._performHitTest(f.Utils.getEventPosition(t));e||(this.getSharedState("selectedSprite")&&this._onItemBlur(),this.props.onSwitchControls("home"))}},e.prototype._onSpriteFlip=function(t){var e=this.getSharedState("selectedSprite");switch(t){case"h":e.setFlipHorizontally(!e.getFlipHorizontally());break;case"v":e.setFlipVertically(!e.getFlipVertically())}},e.prototype._onSpriteTakeToFront=function(t){var e=this.getSharedState("operation");e.takeSpriteToFront(this.getSharedState("selectedSprite")),this.forceSharedUpdate()},e.prototype._onSpriteRemove=function(){var t=this.getSharedState("operation"),e=this.getSharedState("selectedSprite");t.removeSprite(e),this.setSharedState({selectedSprite:null})},e.prototype._onSpriteDragStart=function(){this._canvasClickDisabled=!0},e.prototype._onSpriteDragStop=function(){var t=this;setTimeout(function(){t._canvasClickDisabled=!1},100)},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getCanvasDimensions(),n=t.getOutputDimensions(),o=e.clone().divide(2).subtract(n.clone().divide(2)),r=o.x,i=o.y;return{left:r,top:i,width:n.x,height:n.y}},e.prototype._getContainerProps=function(){return{}},e.prototype._getInnerContainerProps=function(){return{style:this._getContainerStyle(),onClick:this._onCanvasClick}},e.prototype._renderSpriteItems=function(){var t=this,e=this.getSharedState("operation"),n=e.getSprites(),o=this.getSharedState("selectedSprite");return n.map(function(n){var r=n===o,i=null;return n instanceof x?i=v["default"]:n instanceof M?i=_["default"]:n instanceof R&&(i=b["default"]),f.ReactBEM.createElement(i,{operation:e,sharedState:t.props.sharedState,sprite:n,selected:r,onDragStart:t._onSpriteDragStart,onDragStop:t._onSpriteDragStop,onRemove:t._onSpriteRemove.bind(t,n),options:t.props.options,ref:"sprite-"+n.getId()})})},e.prototype._renderOverlayControls=function(){return null},e.prototype.renderWithBEM=function(){return f.ReactBEM.createElement("div",(0,i["default"])({bem:"$b:canvasControls e:container m:full",ref:"container"},this._getContainerProps()),f.ReactBEM.createElement("div",(0,i["default"])({bem:"b:canvasControls e:innerContainer",ref:"innerContainer"},this._getInnerContainerProps()),f.ReactBEM.createElement("div",{bem:"$b:spritesCanvasControls",ref:"container"},this._renderSpriteItems(),this._renderOverlayControls())))},e}(C["default"]);e["default"]=k,k.contextTypes=C["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onClick"),a}return(0,u["default"])(e,t),e.prototype._onClick=function(t){this.props.onClick&&this.props.onClick()},e.prototype._renderContent=function(){return null},e.prototype.renderWithBEM=function(){var t="$e:row m:"+this._modifier;return this.props.totalRows&&(t+=" m:row-"+this.props.totalRows),c.ReactBEM.createElement("bem",{specifier:"b:splashScreen"},c.ReactBEM.createElement("div",{bem:t},this._renderContent()))},e}(c.BaseComponent);e["default"]=p,p.propTypes={onClick:c.React.PropTypes.func},p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(259),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onNewFile"),a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){this._fileLoader=new d["default"](this.refs.fileInput),this._fileLoader.on("file",this._onNewFile)},e.prototype.componentWillUnmount=function(){this._fileLoader.off("file",this._onNewFile),this._fileLoader.dispose(),this._fileLoader=null},e.prototype._onNewFile=function(t){this.props.onNewFile&&this.props.onNewFile(t)},e.prototype.open=function(){this._fileLoader.open()},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("input",{
type:"file",bem:"b:hiddenFileInput",ref:"fileInput"})},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){var t="$e:button";this.props.style&&(t+=" m:"+this.props.style),this.props.icon&&(t+=" m:withIcon");var e=null;return this.props.icon&&(e=c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath(this.props.icon,!0)})),c.ReactBEM.createElement("bem",{specifier:"$b:topBar"},c.ReactBEM.createElement("div",{bem:t,onClick:this.props.onClick},e,c.ReactBEM.createElement("div",{bem:"e:label"},this.props.label||"Button")))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var o=n(291);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=!0},function(t,e,n){var o=n(29),r=n(306),i=n(76),a=n(81)("IE_PROTO"),s=function(){},l="prototype",u=function(){var t,e=n(129)("iframe"),o=i.length,r="<",a=">";for(e.style.display="none",n(296).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+a+"document.F=Object"+r+"/script"+a),t.close(),u=t.F;o--;)delete u[l][i[o]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[l]=o(t),n=new s,s[l]=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var o=n(25).f,r=n(32),i=n(15)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},function(t,e,n){var o=n(82)("keys"),r=n(58);t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e,n){var o=n(24),r="__core-js_shared__",i=o[r]||(o[r]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e,n){var o=n(75);t.exports=function(t){return Object(o(t))}},function(t,e,n){var o=n(44);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var o=n(24),r=n(14),i=n(77),a=n(87),s=n(25).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=i?{}:o.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(15)},function(t,e,n){n(315);for(var o=n(24),r=n(34),i=n(35),a=n(15)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=o[u],p=c&&c.prototype;p&&!p[a]&&r(p,a,u),i[u]=i.Array}},function(t,e){"use strict";function n(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function o(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var o=Object.keys(t),i=Object.keys(e);if(o.length!==i.length)return!1;for(var a=0;a<o.length;a++)if(!r.call(e,o[a])||!n(t[o[a]],e[o[a]]))return!1;return!0}var r=Object.prototype.hasOwnProperty;t.exports=o},function(t,e,n){"use strict";function o(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function r(t,e,n){c.insertTreeBefore(t,e,n)}function i(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):v(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],l(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,o){for(var r=e;;){var i=r.nextSibling;if(v(t,r,o),r===n)break;r=i}}function l(t,e,n){for(;;){var o=e.nextSibling;if(o===n)break;t.removeChild(o)}}function u(t,e,n){var o=t.parentNode,r=t.nextSibling;r===e?n&&v(o,document.createTextNode(n),r):n?(m(r,n),l(o,r,e)):l(o,t,e)}var c=n(36),p=n(347),d=n(155),h=(n(8),n(10),n(105)),f=n(65),m=n(168),v=h(function(t,e,n){t.insertBefore(e,n)}),g=p.dangerouslyReplaceNodeWithMarkup,_={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:u,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var s=e[n];switch(s.type){case d.INSERT_MARKUP:r(t,s.content,o(t,s.afterNode));break;case d.MOVE_EXISTING:i(t,s.fromNode,o(t,s.afterNode));break;case d.SET_MARKUP:f(t,s.content);break;case d.TEXT_CONTENT:m(t,s.content);break;case d.REMOVE_NODE:a(t,s.fromNode)}}}};t.exports=_},function(t,e){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=n},function(t,e,n){"use strict";function o(){if(s)for(var t in l){var e=l[t],n=s.indexOf(t);if(n>-1?void 0:a("96",t),!u.plugins[n]){e.extractEvents?void 0:a("97",t),u.plugins[n]=e;var o=e.eventTypes;for(var i in o)r(o[i],e,i)?void 0:a("98",i,t)}}}function r(t,e,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,u.eventNameDispatchConfigs[n]=t;var o=t.phasedRegistrationNames;if(o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r];i(s,e,n)}return!0}return!!t.registrationName&&(i(t.registrationName,e,n),!0)}function i(t,e,n){u.registrationNameModules[t]?a("100",t):void 0,u.registrationNameModules[t]=e,u.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var a=n(5),s=(n(4),null),l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){s?a("101"):void 0,s=Array.prototype.slice.call(t),o()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];l.hasOwnProperty(n)&&l[n]===r||(l[n]?a("102",n):void 0,l[n]=r,e=!0)}e&&o()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return u.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var o=u.registrationNameModules[e.phasedRegistrationNames[n]];if(o)return o}return null},_resetEventPlugins:function(){s=null;for(var t in l)l.hasOwnProperty(t)&&delete l[t];u.plugins.length=0;var e=u.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var o=u.registrationNameModules;for(var r in o)o.hasOwnProperty(r)&&delete o[r]}};t.exports=u},function(t,e,n){"use strict";function o(t){return t===_.topMouseUp||t===_.topTouchEnd||t===_.topTouchCancel}function r(t){return t===_.topMouseMove||t===_.topTouchMove}function i(t){return t===_.topMouseDown||t===_.topTouchStart}function a(t,e,n,o){var r=t.type||"unknown-event";t.currentTarget=y.getNodeFromInstance(o),e?v.invokeGuardedCallbackWithCatch(r,n,t):v.invokeGuardedCallback(r,n,t),t.currentTarget=null}function s(t,e){var n=t._dispatchListeners,o=t._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!t.isPropagationStopped();r++)a(t,e,n[r],o[r]);else n&&a(t,e,n,o);t._dispatchListeners=null,t._dispatchInstances=null}function l(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var o=0;o<e.length&&!t.isPropagationStopped();o++)if(e[o](t,n[o]))return n[o]}else if(e&&e(t,n))return n;return null}function u(t){var e=l(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function c(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)?f("103"):void 0,t.currentTarget=e?y.getNodeFromInstance(n):null;var o=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,o}function p(t){return!!t._dispatchListeners}var d,h,f=n(5),m=n(22),v=n(99),g=(n(4),n(6),{injectComponentTree:function(t){d=t},injectTreeTraversal:function(t){h=t}}),_=m.topLevelTypes,y={isEndish:o,isMoveish:r,isStartish:i,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,getInstanceFromNode:function(t){return d.getInstanceFromNode(t)},getNodeFromInstance:function(t){return d.getNodeFromInstance(t)},isAncestor:function(t,e){return h.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return h.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return h.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return h.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,o,r){return h.traverseEnterLeave(t,e,n,o,r)},injection:g};t.exports=y},function(t,e){"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",":":"=2"},o=(""+t).replace(e,function(t){return n[t]});return"$"+o}function o(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},o="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+o).replace(e,function(t){return n[t]})}var r={escape:n,unescape:o};t.exports=r},function(t,e,n){"use strict";function o(t){null!=t.checkedLink&&null!=t.valueLink?s("87"):void 0}function r(t){o(t),null!=t.value||null!=t.onChange?s("88"):void 0}function i(t){o(t),null!=t.checked||null!=t.onChange?s("89"):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(5),l=n(157),u=n(102),c=n(103),p=(n(4),n(6),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),d={value:function(t,e,n){return!t[e]||p[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func},h={},f={checkPropTypes:function(t,e,n){for(var o in d){if(d.hasOwnProperty(o))var r=d[o](e,o,t,u.prop,null,c);if(r instanceof Error&&!(r.message in h)){h[r.message]=!0;a(n)}}},getValue:function(t){return t.valueLink?(r(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(i(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(r(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(i(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=f},function(t,e,n){"use strict";function o(t,e,n){this.props=t,this.context=e,this.refs=a,this.updater=n||i}var r=n(5),i=n(100),a=(n(161),n(47));n(4),n(6);o.prototype.isReactComponent={},o.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?r("85"):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};t.exports=o},function(t,e,n){"use strict";var o=n(5),r=(n(4),!1),i={unmountIDFromEnvironment:null,replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){r?o("104"):void 0,i.unmountIDFromEnvironment=t.unmountIDFromEnvironment,i.replaceNodeWithMarkup=t.replaceNodeWithMarkup,i.processChildrenUpdates=t.processChildrenUpdates,r=!0}}};t.exports=i},function(t,e,n){"use strict";function o(t,e){u[t]||(u[t]={element:null,parentID:null,ownerID:null,text:null,childIDs:[],displayName:"Unknown",isMounted:!1,updateCount:0}),e(u[t])}function r(t){var e=u[t];if(e){var n=e.childIDs;delete u[t],n.forEach(r)}}function i(t,e,n){return"\n    in "+t+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function a(t){var e,n=d.getDisplayName(t),o=d.getElement(t),r=d.getOwnerID(t);return r&&(e=d.getDisplayName(r)),i(n,o&&o._source,e)}var s=n(5),l=n(28),u=(n(4),n(6),{}),c={},p={},d={onSetDisplayName:function(t,e){o(t,function(t){return t.displayName=e})},onSetChildren:function(t,e){o(t,function(n){n.childIDs=e,e.forEach(function(e){var n=u[e];n?void 0:s("68"),null==n.displayName?s("69"):void 0,null==n.childIDs&&null==n.text?s("70"):void 0,n.isMounted?void 0:s("71"),null==n.parentID&&(n.parentID=t),n.parentID!==t?s("72",e,n.parentID,t):void 0})})},onSetOwner:function(t,e){o(t,function(t){return t.ownerID=e})},onSetParent:function(t,e){o(t,function(t){return t.parentID=e})},onSetText:function(t,e){o(t,function(t){return t.text=e})},onBeforeMountComponent:function(t,e){o(t,function(t){return t.element=e})},onBeforeUpdateComponent:function(t,e){o(t,function(t){return t.element=e})},onMountComponent:function(t){o(t,function(t){return t.isMounted=!0})},onMountRootComponent:function(t){p[t]=!0},onUpdateComponent:function(t){o(t,function(t){return t.updateCount++})},onUnmountComponent:function(t){o(t,function(t){return t.isMounted=!1}),c[t]=!0,delete p[t]},purgeUnmountedComponents:function(){if(!d._preventPurging){for(var t in c)r(t);c={}}},isMounted:function(t){var e=u[t];return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=t.type,o="function"==typeof n?n.displayName||n.name:n,r=t._owner;e+=i(o||"Unknown",t._source,r&&r.getName())}var a=l.current,s=a&&a._debugID;return e+=d.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=a(t),t=d.getParentID(t);return e},getChildIDs:function(t){var e=u[t];return e?e.childIDs:[]},getDisplayName:function(t){var e=u[t];return e?e.displayName:"Unknown"},getElement:function(t){var e=u[t];return e?e.element:null},getOwnerID:function(t){var e=u[t];return e?e.ownerID:null},getParentID:function(t){var e=u[t];return e?e.parentID:null},getSource:function(t){var e=u[t],n=e?e.element:null,o=null!=n?n._source:null;return o},getText:function(t){var e=u[t];return e?e.text:null},getUpdateCount:function(t){var e=u[t];return e?e.updateCount:0},getRootIDs:function(){return Object.keys(p)},getRegisteredIDs:function(){return Object.keys(u)}};t.exports=d},function(t,e,n){"use strict";function o(t,e,n,o){try{return e(n,o)}catch(i){return void(null===r&&(r=i))}}var r=null,i={invokeGuardedCallback:o,invokeGuardedCallbackWithCatch:o,rethrowCaughtError:function(){if(r){var t=r;throw r=null,t}}};t.exports=i},function(t,e,n){"use strict";function o(t,e){}var r=(n(6),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){o(t,"forceUpdate")},enqueueReplaceState:function(t,e){o(t,"replaceState")},enqueueSetState:function(t,e){o(t,"setState")}});t.exports=r},function(t,e,n){"use strict";var o={};t.exports=o},function(t,e,n){"use strict";var o=n(60),r=o({prop:null,context:null,childContext:null});t.exports=r},function(t,e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},function(t,e,n){"use strict";function o(t){l.enqueueUpdate(t)}function r(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,o=Object.keys(t);return o.length>0&&o.length<20?n+" (keys: "+o.join(", ")+")":n}function i(t,e){var n=s.get(t);if(!n){return null}return n}var a=n(5),s=(n(28),n(51)),l=(n(10),n(21)),u=(n(4),n(6),{isMounted:function(t){var e=s.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){u.validateCallback(e,n);var r=i(t);return r?(r._pendingCallbacks?r._pendingCallbacks.push(e):r._pendingCallbacks=[e],void o(r)):null},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],o(t)},enqueueForceUpdate:function(t){var e=i(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,o(e))},enqueueReplaceState:function(t,e){var n=i(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,o(n))},enqueueSetState:function(t,e){var n=i(t,"setState");if(n){var r=n._pendingStateQueue||(n._pendingStateQueue=[]);r.push(e),o(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,o(t)},validateCallback:function(t,e){t&&"function"!=typeof t?a("122",e,r(t)):void 0}});t.exports=u},function(t,e){"use strict";var n=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t};t.exports=n},function(t,e){"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var o=r[t];return!!o&&!!n[o]}function o(t){return n}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=o},function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=n},function(t,e,n){"use strict";function o(t,e){if(!i.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&r&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}var r,i=n(9);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=o},function(t,e){"use strict";function n(t,e){var n=null===t||t===!1,o=null===e||e===!1;if(n||o)return n===o;var r=typeof t,i=typeof e;return"string"===r||"number"===r?"string"===i||"number"===i:"object"===i&&t.type===e.type&&t.key===e.key}t.exports=n},function(t,e,n){"use strict";function o(t,e){return t&&"object"==typeof t&&null!=t.key?u.escape(t.key):e.toString(36)}function r(t,e,n,i){var d=typeof t;if("undefined"!==d&&"boolean"!==d||(t=null),null===t||"string"===d||"number"===d||s.isValidElement(t))return n(i,t,""===e?c+o(t,0):e),1;var h,f,m=0,v=""===e?c:e+p;if(Array.isArray(t))for(var g=0;g<t.length;g++)h=t[g],f=v+o(h,g),m+=r(h,f,n,i);else{var _=l(t);if(_){var y,b=_.call(t);if(_!==t.entries)for(var E=0;!(y=b.next()).done;)h=y.value,f=v+o(h,E++),m+=r(h,f,n,i);else for(;!(y=b.next()).done;){var C=y.value;C&&(h=C[1],f=v+u.escape(C[0])+p+o(h,0),m+=r(h,f,n,i))}}else if("object"===d){var S="",M=String(t);a("31","[object Object]"===M?"object with keys {"+Object.keys(t).join(", ")+"}":M,S)}}return m}function i(t,e,n){return null==t?0:r(t,"",e,n)}var a=n(5),s=(n(28),n(20)),l=n(164),u=(n(4),n(94)),c=(n(6),"."),p=":";t.exports=i},function(t,e,n){"use strict";var o=(n(7),n(16)),r=(n(6),o);t.exports=r},function(t,e,n){"use strict";t.exports=n(352)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(66),s=o(a),l=n(407),u=o(l),c=5e3,p=s["default"].Promise,d=function(){function t(e){(0,i["default"])(this,t),this._url=e,this._parsedUrl=u["default"].parse(this._url,!0)}return t.prototype._isJSONPRequest=function(){var t=this._parsedUrl.query;for(var e in t){var n=t[e];if("?"===n)return!0}return!1},t.prototype.load=function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()},t.prototype._loadJSON=function(){var t=this;return new p(function(e,n){var o=void 0;window.XDomainRequest?(o=new window.XDomainRequest,o.onload=function(){var t=JSON.parse(o.responseText);e(t)},o.onerror=function(t){n(t)}):window.XMLHttpRequest&&(o=new XMLHttpRequest,o.onreadystatechange=function(t){if(4===o.readyState)if(200===o.status){var r=JSON.parse(o.responseText);e(r)}else n(new Error(o.statusText))}),o.open("GET",t._url,!0),o.send()})},t.prototype._loadJSONP=function(){var t=this,e=!1,n=!1,o="pesdk"+Math.round(99999999999999*Math.random());return new p(function(r,i){var a=t._createJSONPNode(o);window[o]=function(o){t._removeJSONPNode(a),e||(n=!0,r(o))},window.setTimeout(function(){n||(t._removeJSONPNode(a),e=!0,i(new Error("Timeout of 5 seconds exceeded.")))},c)})},t.prototype._createJSONPNode=function(t){var e=this._buildJSONPUrl(t),n=document.querySelector("head"),o=document.createElement("script");return o.src=e,n.appendChild(o),o},t.prototype._removeJSONPNode=function(t){t.parentNode.removeChild(t)},t.prototype._buildJSONPUrl=function(t){var e=this._parsedUrl.query,n=null;for(var o in e)if("?"===e[o]){n=o;break}return delete this._parsedUrl.search,e[n]=t,u["default"].format(this._parsedUrl)},t}();e["default"]=d},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(177),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._bindAll("_onButtonClick"),n.state={overlayVisible:!1},n}return(0,u["default"])(e,t),e.prototype._onButtonClick=function(t){t.preventDefault(),t.stopPropagation(),this.setState({overlayVisible:!this.state.overlayVisible})},e.prototype.renderWithBEM=function(){var t=null;this.state.overlayVisible&&(t=c.ReactBEM.createElement(d["default"],{items:this.props.items,selectedItem:this.props.selectedItem,onChange:this.props.onChange}));var e=this.state.overlayVisible?"is-active":null;return c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:categoryDropdown",className:e,onClick:this._onButtonClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this.props.selectedItem.icon}),c.ReactBEM.createElement("div",{bem:"e:label"},this.props.selectedItem.label),t))},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(11),d=o(p),h=n(17),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._hasBackButton=!1,a}return(0,u["default"])(e,t),e.prototype._onItemClick=function(t){this.props.onSwitchControls(t)},e.prototype._renderListItems=function(){var t=this,e=this.context.editor,n=[],o=function(n){var o=e.controls.get(n);return c.ReactBEM.createElement("li",{bem:"e:item",key:o.identifier,"data-identifier":o.identifier,onClick:t._onItemClick.bind(t,o)},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel"},c.ReactBEM.createElement("img",{bem:"e:icon",src:t._getAssetPath(o.iconPath,!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},t._t(o.languageKey)))))},r=this.context.options.editor.controlsOrder;r.forEach(function(t){if(Array.isArray(t))!function(){var r=t,i=[];r.forEach(function(t){e.controls.isEnabled(t)&&i.push(o(t))}),i.length&&n.push(i)}();else{var r=t;if(!e.controls.isEnabled(r))return;n.push(o(r))}});var i=[];return n.forEach(function(t){i=i.concat(t),t!==n[n.length-1]&&i.push(c.ReactBEM.createElement("li",{bem:"e:separator"}))}),i},e.prototype.renderControls=function(){var t=this._renderListItems();return c.ReactBEM.createElement("div",{bem:"e:cell m:list"},c.ReactBEM.createElement(f["default"],null,c.ReactBEM.createElement("ul",{bem:"$e:list"},t)))},e}(d["default"]);e["default"]=m,m.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.componentDidUpdate=function(){this._renderCanvas()},e.prototype._renderCanvas=function(){var t=this.refs.canvas,e=this.context.editor,n=e.getSDK(),o=n.getPixelRatio();t.width=t.offsetWidth*o,t.height=t.offsetHeight*o,t.style.width=t.offsetWidth+"px",t.style.height=t.offsetHeight+"px";var r=t.getContext("2d");r.fillStyle="red",r.clearRect(0,0,t.width,t.height),r.font=this.props.fontWeight+" "+24*o+"px "+this.props.fontFamily,r.textBaseline="middle",r.textAlign="center",r.fillStyle="white",r.fillText("Abc",t.width/2,t.height/2)},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("canvas",{bem:"b:fontFamily e:canvas",ref:"canvas"})},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onClick"),a}return(0,u["default"])(e,t),e.prototype._onClick=function(){this.props.onClick&&this.props.onClick(this.props.searchSuggestion)},e.prototype.renderWithBEM=function(){var t=this.props.searchSuggestion,e={backgroundImage:"url("+t.coverImage+")"};return c.ReactBEM.createElement("bem",{specifier:"b:photoRoll e:libraryList"},c.ReactBEM.createElement("li",{bem:"e:item",style:e,onClick:this._onClick},c.ReactBEM.createElement("div",{bem:"e:overlay"}),c.ReactBEM.createElement("div",{bem:"e:name"},t.query)))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(18),d=o(p),h=n(235),f=o(h),m=n(17),v=o(m),g=240,_=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._needsStyleFixes=!0,a._totalPhotosHeight=0,a.state={loading:!1,photos:[]},a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadPhotos()},e.prototype.componentDidUpdate=function(){this.refs.scrollbar&&this.refs.scrollbar.update()},e.prototype._onPhotoClicked=function(t){this.props.onPhotoClicked&&this.props.onPhotoClicked(t)},e.prototype._getHeadline=function(){return this.props.library.name},e.prototype.fixStyles=function(){if(c.Utils.Browser.isIElte(11)){var t=this.refs.cell,e=this.refs.scrollbar.getList();if(!t||!e)return;var n=t.offsetHeight;e.style.height=n+"px"}this.refs.scrollbar&&this.refs.scrollbar.update()},e.prototype._renderColumns=function(){for(var t=this,e=this.state.photos,n=3,o=[],r=[],i=0;i<n;i++)r.push([]),o.push(0);return e.forEach(function(e){for(var i=e.dimensions,a=null,s=1/0,l=0;l<n;l++)o[l]<s&&(a=l,s=o[l]);r[a].push(c.ReactBEM.createElement(f["default"],{photo:e.obj,onClick:t._onPhotoClicked.bind(t,e.obj)})),o[a]+=i.y}),r},e.prototype._renderPhotos=function(){var t=this._renderColumns();return c.ReactBEM.createElement("div",{bem:"$b:photoRoll e:row m:fullHeight"},c.ReactBEM.createElement("div",{bem:"e:cell",ref:"cell"},c.ReactBEM.createElement(v["default"],{direction:"vertical",ref:"scrollbar"},c.ReactBEM.createElement("div",{bem:"e:container",ref:"container"},c.ReactBEM.createElement("div",{bem:"e:innerContainer"},c.ReactBEM.createElement("div",{bem:"e:headline"},this._getHeadline()),c.ReactBEM.createElement("bem",{specifier:"e:photoList"},t.map(function(t){return c.ReactBEM.createElement("ul",{bem:"$e:list"},t)})))))))},e.prototype._loadPhotos=function(){var t=this;this._totalPhotosHeight=0;var e=d["default"].instance.displayProgress(this._t("loading.loading")),n=this.context.options.photoRoll.provider,o=new n;o.getPhotosForLibrary(this.props.library).then(function(n){return t._preloadPhotos(n,e)}).then(function(n){t.setState({photos:n,loading:!1}),e.close()})},e.prototype._preloadPhotos=function(t,e){var n=this,o=t.length,r=0;return Promise.all(t.map(function(t){return n._preloadPhoto(t).then(function(i){var a=new c.Vector2(i.width,i.height);return a.multiply(g/i.width),n._totalPhotosHeight+=a.y,r++,e.setData({progress:r/o}),{obj:t,dimensions:a}})}))},e.prototype._preloadPhoto=function(t){return new Promise(function(e,n){var o=new window.Image;o.addEventListener("load",function(){e(o)}),o.addEventListener("error",function(){e(o)}),o.src=t.urls.thumb})},e.prototype.renderWithBEM=function(){return this.state.loading?c.ReactBEM.createElement("div",null):this._renderPhotos()},e}(c.BaseComponent);e["default"]=_,_.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(126),s=o(a),l="__",u="--",c="pesdk-react-",p=function(){function t(e,n,o){(0,i["default"])(this,t),this._parent=e,this._type=n,this._name=o}return t.prototype.element=function(e){return new t(this,"element",e)},t.prototype.modifier=function(e){return new t(this,"modifier",e)},(0,s["default"])(t,[{key:"str",get:function(){var t=this._parent?this._parent.str:"";switch(this._type){case"block":t+=""+c+this._name;break;case"element":t+=""+l+this._name;break;case"modifier":t+=""+u+this._name}return t}}]),t}();e["default"]={block:function(t){return new p(null,"block",t)}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(e){(0,i["default"])(this,t),this._options=e,this._categoriesById={},this._categories=[{name:"retro",filters:[a.SDK.Filters.CelsiusFilter,a.SDK.Filters.ChestFilter,a.SDK.Filters.FixieFilter,a.SDK.Filters.LeninFilter,a.SDK.Filters.PolaFilter,a.SDK.Filters.Pola669Filter,a.SDK.Filters.K1Filter,a.SDK.Filters.K2Filter,a.SDK.Filters.K6Filter,a.SDK.Filters.KDynamicFilter]},{name:"bw",filters:[a.SDK.Filters.BWFilter,a.SDK.Filters.BWHardFilter,a.SDK.Filters.X400Filter]},{name:"summer",filters:[a.SDK.Filters.FrontFilter,a.SDK.Filters.MellowFilter,a.SDK.Filters.SemiredFilter,a.SDK.Filters.SunnyFilter,a.SDK.Filters.TexasFilter]},{name:"winter",filters:[a.SDK.Filters.MetalFilter,a.SDK.Filters.A15Filter,a.SDK.Filters.BreezeFilter,a.SDK.Filters.FridgeFilter,a.SDK.Filters.OrchidFilter,a.SDK.Filters.QuoziFilter]},{name:"special",filters:[a.SDK.Filters.FoodFilter,a.SDK.Filters.GlamFilter,a.SDK.Filters.LomoFilter,a.SDK.Filters.GobblinFilter]}],this._initCategories()}return t.prototype._initCategories=function(){var t=this;this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=a.Utils.mergeCategories(this._categories,this._options.categories,"filters")),this._options.selectableFilters&&!function(){var e=[];t._categories.forEach(function(n){var o=n.filters.filter(function(e){return t._options.selectableFilters.indexOf(e.identifier)!==-1});o.length>0&&e.push({name:n.name,filters:o})}),t._categories=e}();var e={name:"all",filters:this._categories.map(function(t){return t.filters}).reduce(function(t,e){return t.concat(e)})};this._categories.unshift(e),this._categories.forEach(function(e){t._categoriesById[e.name]=e})},t.prototype.getFiltersForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown filter category '"+t+"'");return this._categoriesById[t].filters},t.prototype.getCategories=function(){return this._categories},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(e){(0,i["default"])(this,t),this._options=e,this._categoriesById={},this._categories=[],
this._initCategories()}return t.prototype._initCategories=function(){var t=this,e=this._options,n=e.replaceCategories,o=e.categories,r=a.Constants.DEFAULTS.STICKER_CATEGORIES;o?n?this._categories=o.slice(0):this._categories=a.Utils.mergeCategories(r,o,"stickers"):this._categories=r.slice(0);var i={name:"all",stickers:this._categories.map(function(t){return t.stickers}).reduce(function(t,e){return t.concat(e)})};this._categories.unshift(i),this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.name]=e})},t.prototype.getStickersForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown sticker category '"+t+"'");return this._categoriesById[t].stickers},t.prototype.getCategories=function(){return this._categories},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){for(var e=[],n=0;n<t.length;n++)t[n]instanceof Array?e=e.concat(r(t[n])):e.push(t[n]);return e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(281),a=o(i),s=n(56),l=o(s),u=n(113),c=o(u),p=n(127),d=o(p),h=n(120),f=o(h),m={b:"block",e:"element",m:"modifier"},v={_parseBemSpecifier:function(t){if(!t)return[];var e=t.split(" "),n=e.map(function(t){var e=t.match(/^(\$)?([bem])\:(.*)$/i);if(!e)throw new Error("Invalid BEM specifier: "+t);var n="undefined"!=typeof e[1],o=m[e[2]],r=e[3];return{type:o,name:r,pass:n}});return n},_getBemInfoForNode:function(t){var e="bem"===t.type,n=e?t.props.specifier:t.props.bem;if(e&&!n)throw new Error("<bem> elements should always have a `specifier` property");var o=this._parseBemSpecifier(n);return e&&o.forEach(function(t){t.pass=!0}),{data:o,isBemNode:e}},createElement:function(t,e){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return e=e||{},o=o.filter(function(t){return null!==t&&"undefined"!=typeof t}),{type:t,props:e,children:o}},_isNodeBEMable:function(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":(0,l["default"])(t))&&!c["default"].isValidElement(t)},_applyBEMClasses:function(t){var e=this;if(!this._isNodeBEMable(t))return t;var n=t.props.className?[t.props.className]:[],o=this._getBemInfoForNode(t),i=t.props.__bemObject,a=t.props.__bemObject;o.data.forEach(function(t){if("block"===t.type)i=f["default"].block(t.name),t.pass&&(a=f["default"].block(t.name)),n.push(i.str);else if("element"===t.type){if(!i)throw new Error("Tried to create an element, but no parent block has been found.");i=i.element(t.name),t.pass&&(a=a.element(t.name)),n.push(i.str)}else if("modifier"===t.type){if(!i)throw new Error("Tried to create a modifier, but no parent block has been found.");t.pass&&(a=a.modifier(t.name)),n.push(i.modifier(t.name).str)}});var s=(0,d["default"])(n);return s&&(t.props.className=s),t.children=r(t.children),t.children.forEach(function(t){e._isNodeBEMable(t)&&(t.props.__bemObject=a)}),t.children=t.children.map(function(t){return e._applyBEMClasses(t)}),t.children=r(t.children),delete t.props.__bemObject,delete t.props.bem,o.isBemNode&&(t=t.children instanceof Array&&1===t.children.length?t.children[0]:t.children),t},_transformToReact:function(t){var e=this;return this._isNodeBEMable(t)?(t.children=t.children.map(function(t){return e._transformToReact(t)}),c["default"].createElement.apply(c["default"],[t.type,t.props].concat((0,a["default"])(t.children)))):t},transform:function(t){return t=this._applyBEMClasses(t),t instanceof Array?t:t=this._transformToReact(t)}};e["default"]=v},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n="warn",o=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],r=o.map(function(t){return t.type}),i={};i.setLevel=function(t){n=t},i.canLog=function(t){if(null===n)return!1;var e=r.indexOf(t),o=r.indexOf(n);return!(e<o)},i.hasColorfulOutput=function(){return(!t||t&&t.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},i.printError=function(t){var e=t.stack.split("\n");e.forEach(function(t){i.error("Error",t)})},o.forEach(function(t){var e=t.type,n=t.background,o=t.color;i[e]=function(t){if(i.canLog(e)){for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var l=a.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");return i.hasColorfulOutput()?void console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+l+"  %c  ","background: #43ADEB; padding: 5px 0","background: #2B2B2B; color: white; padding: 5px 0","background: #43ADEB; padding: 5px 0","background: "+n+"; color: "+o+"; padding: 5px 0; font-weight: bold","background: #2B2B2B; color: white; padding: 5px 0","background: #43ADEB; padding: 5px 0"):console.log("PhotoEditorSDK | "+t+" | "+l)}}}),e["default"]=i}).call(e,n(48))},function(t,e,n){t.exports={"default":n(287),__esModule:!0}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(125),i=o(r);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i["default"])(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()},function(t,e,n){var o,r;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var r=typeof o;if("string"===r||"number"===r)t.push(o);else if(Array.isArray(o))t.push(n.apply(null,o));else if("object"===r)for(var a in o)i.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(o=[],r=function(){return n}.apply(e,o),!(void 0!==r&&(t.exports=r)))}()},function(t,e,n){var o=n(73),r=n(15)("toStringTag"),i="Arguments"==o(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:i?o(e):"Object"==(s=o(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var o=n(44),r=n(24).document,i=o(r)&&o(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},function(t,e,n){t.exports=!n(30)&&!n(43)(function(){return 7!=Object.defineProperty(n(129)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var o=n(73);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var o=n(77),r=n(31),i=n(136),a=n(34),s=n(32),l=n(35),u=n(300),c=n(80),p=n(308),d=n(15)("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",m="keys",v="values",g=function(){return this};t.exports=function(t,e,n,_,y,b,E){u(n,e,_);var C,S,M,x=function(t){if(!h&&t in P)return P[t];switch(t){case m:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},R=e+" Iterator",k=y==v,w=!1,P=t.prototype,B=P[d]||P[f]||y&&P[y],D=B||x(y),T=y?k?x("entries"):D:void 0,O="Array"==e?P.entries||B:B;if(O&&(M=p(O.call(new t)),M!==Object.prototype&&(c(M,R,!0),o||s(M,d)||a(M,d,g))),k&&B&&B.name!==v&&(w=!0,D=function(){return B.call(this)}),o&&!E||!h&&!w&&P[d]||a(P,d,D),l[e]=D,l[R]=g,y)if(C={values:k?D:x(v),keys:b?D:x(m),entries:T},E)for(S in C)S in P||i(P,S,C[S]);else r(r.P+r.F*(h||w),e,C);return C}},function(t,e,n){var o=n(57),r=n(46),i=n(33),a=n(85),s=n(32),l=n(130),u=Object.getOwnPropertyDescriptor;e.f=n(30)?u:function(t,e){if(t=i(t),e=a(e,!0),l)try{return u(t,e)}catch(n){}if(s(t,e))return r(!o.f.call(t,e),t[e])}},function(t,e,n){var o=n(135),r=n(76).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},function(t,e,n){var o=n(32),r=n(33),i=n(293)(!1),a=n(81)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,u=[];for(n in s)n!=a&&o(s,n)&&u.push(n);for(;e.length>l;)o(s,n=e[l++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){t.exports=n(34)},function(t,e,n){var o=n(83),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},function(t,e,n){var o=n(128),r=n(15)("iterator"),i=n(35);t.exports=n(14).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[o(t)]}},function(t,e,n){"use strict";var o=n(16),r={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:o}},registerDefault:function(){}};t.exports=r},function(t,e){"use strict";function n(t){try{t.focus()}catch(e){}}t.exports=n},function(t,e){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=n},function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(t){r.forEach(function(e){o[n(e,t)]=o[t]})});var i={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:o,shorthandPropertyExpansions:i};t.exports=a},function(t,e,n){"use strict";function o(){this._callbacks=null,this._contexts=null}var r=n(5),i=n(7),a=n(27);n(4);i(o.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length?r("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<t.length;n++)t[n].call(e[n]);t.length=0,e.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(t){this._callbacks&&(this._callbacks.length=t,this._contexts.length=t)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";function o(t){return!!u.hasOwnProperty(t)||!l.hasOwnProperty(t)&&(s.test(t)?(u[t]=!0,!0):(l[t]=!0,!1))}function r(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var i=n(37),a=(n(8),n(364),n(10),n(405)),s=(n(6),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(t){return i.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(i.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){if(r(n,e))return"";var o=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?o+'=""':o+"="+a(e)}return i.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return o(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,n){var o=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(o){var a=o.mutationMethod;if(a)a(t,n);else{if(r(o,n))return void this.deleteValueForProperty(t,e);if(o.mustUseProperty)t[o.propertyName]=n;else{var s=o.attributeName,l=o.attributeNamespace;l?t.setAttributeNS(l,s,""+n):o.hasBooleanValue||o.hasOverloadedBooleanValue&&n===!0?t.setAttribute(s,""):t.setAttribute(s,""+n)}}}else if(i.isCustomAttribute(e))return void c.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(o(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){var o=n.mutationMethod;if(o)o(t,void 0);else if(n.mustUseProperty){var r=n.propertyName;n.hasBooleanValue?t[r]=!1:t[r]=""}else t.removeAttribute(n.attributeName)}else i.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=c},function(t,e,n){"use strict";function o(t){return(""+t).replace(b,"$&/")}function r(t,e){this.func=t,this.context=e,this.count=0}function i(t,e,n){var o=t.func,r=t.context;o.call(r,e,t.count++)}function a(t,e,n){if(null==t)return t;var o=r.getPooled(e,n);g(t,i,o),r.release(o)}function s(t,e,n,o){this.result=t,this.keyPrefix=e,this.func=n,this.context=o,this.count=0}function l(t,e,n){var r=t.result,i=t.keyPrefix,a=t.func,s=t.context,l=a.call(s,e,t.count++);Array.isArray(l)?u(l,r,n,v.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,i+(!l.key||e&&e.key===l.key?"":o(l.key)+"/")+n)),r.push(l))}function u(t,e,n,r,i){var a="";null!=n&&(a=o(n)+"/");var u=s.getPooled(e,a,r,i);g(t,l,u),s.release(u)}function c(t,e,n){if(null==t)return t;var o=[];return u(t,o,null,e,n),o}function p(t,e,n){return null}function d(t,e){return g(t,p,null)}function h(t){var e=[];return u(t,e,null,v.thatReturnsArgument),e}var f=n(27),m=n(20),v=n(16),g=n(111),_=f.twoArgumentPooler,y=f.fourArgumentPooler,b=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(r,_),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(s,y);var E={forEach:a,map:c,mapIntoWithKeyPrefixInternal:u,count:d,toArray:h};t.exports=E},function(t,e,n){"use strict";function o(t,e){var n=C.hasOwnProperty(e)?C[e]:null;M.hasOwnProperty(e)&&(n!==b.OVERRIDE_BASE?p("73",e):void 0),t&&(n!==b.DEFINE_MANY&&n!==b.DEFINE_MANY_MERGED?p("74",e):void 0)}function r(t,e){if(e){"function"==typeof e?p("75"):void 0,f.isValidElement(e)?p("76"):void 0;var n=t.prototype,r=n.__reactAutoBindPairs;e.hasOwnProperty(y)&&S.mixins(t,e.mixins);for(var i in e)if(e.hasOwnProperty(i)&&i!==y){var a=e[i],u=n.hasOwnProperty(i);if(o(u,i),S.hasOwnProperty(i))S[i](t,a);else{var c=C.hasOwnProperty(i),d="function"==typeof a,h=d&&!c&&!u&&e.autobind!==!1;if(h)r.push(i,a),n[i]=a;else if(u){var m=C[i];!c||m!==b.DEFINE_MANY_MERGED&&m!==b.DEFINE_MANY?p("77",m,i):void 0,m===b.DEFINE_MANY_MERGED?n[i]=s(n[i],a):m===b.DEFINE_MANY&&(n[i]=l(n[i],a))}else n[i]=a}}}else;}function i(t,e){if(e)for(var n in e){var o=e[n];if(e.hasOwnProperty(n)){var r=n in S;r?p("78",n):void 0;var i=n in t;i?p("79",n):void 0,t[n]=o}}}function a(t,e){t&&e&&"object"==typeof t&&"object"==typeof e?void 0:p("80");for(var n in e)e.hasOwnProperty(n)&&(void 0!==t[n]?p("81",n):void 0,t[n]=e[n]);return t}function s(t,e){return function(){var n=t.apply(this,arguments),o=e.apply(this,arguments);if(null==n)return o;if(null==o)return n;var r={};return a(r,n),a(r,o),r}}function l(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function u(t,e){var n=e.bind(t);return n}function c(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var o=e[n],r=e[n+1];t[o]=u(t,r)}}var p=n(5),d=n(7),h=n(96),f=n(20),m=(n(102),n(101),n(100)),v=n(47),g=(n(4),n(60)),_=n(26),y=(n(6),_({mixins:null})),b=g({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),E=[],C={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},S={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)r(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=d({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=d({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=s(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=d({},t.propTypes,e)},statics:function(t,e){i(t,e)},autobind:function(){}},M={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},x=function(){};d(x.prototype,h.prototype,M);var R={createClass:function(t){var e=function(t,n,o){this.__reactAutoBindPairs.length&&c(this),this.props=t,this.context=n,this.refs=v,this.updater=o||m,this.state=null;var r=this.getInitialState?this.getInitialState():null;"object"!=typeof r||Array.isArray(r)?p("82",e.displayName||"ReactCompositeComponent"):void 0,this.state=r};e.prototype=new x,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],E.forEach(r.bind(null,e)),r(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render?void 0:p("83");for(var n in C)e.prototype[n]||(e.prototype[n]=null);return e},injection:{injectMixin:function(t){E.push(t)}}};t.exports=R},function(t,e,n){"use strict";var o=n(90),r=n(362),i={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,unmountIDFromEnvironment:function(t){}};t.exports=i},function(t,e){"use strict";var n={hasCachedChildNodes:1};t.exports=n},function(t,e,n){"use strict";function o(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=l.getValue(t);null!=e&&r(this,Boolean(t.multiple),e)}}function r(t,e,n){var o,r,i=u.getNodeFromInstance(t).options;if(e){for(o={},r=0;r<n.length;r++)o[""+n[r]]=!0;for(r=0;r<i.length;r++){var a=o.hasOwnProperty(i[r].value);i[r].selected!==a&&(i[r].selected=a)}}else{for(o=""+n,r=0;r<i.length;r++)if(i[r].value===o)return void(i[r].selected=!0);i.length&&(i[0].selected=!0)}}function i(t){var e=this._currentElement.props,n=l.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(o,this),n}var a=n(7),s=n(61),l=n(95),u=n(8),c=n(21),p=(n(6),!1),d={getHostProps:function(t,e){return a({},s.getHostProps(t,e),{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=l.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:i.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||p||(p=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var o=l.getValue(e);null!=o?(t._wrapperState.pendingUpdate=!1,r(t,Boolean(e.multiple),o)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?r(t,Boolean(e.multiple),e.defaultValue):r(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=d},function(t,e){"use strict";var n,o={injectEmptyComponentFactory:function(t){n=t}},r={create:function(t){return n(t)}};r.injection=o,t.exports=r},function(t,e){"use strict";var n={logTopLevelRenders:!1};t.exports=n},function(t,e,n){"use strict";function o(t){return l?void 0:a("111",t.type),new l(t)}function r(t){return new c(t)}function i(t){return t instanceof c}var a=n(5),s=n(7),l=(n(4),null),u={},c=null,p={injectGenericComponentClass:function(t){l=t},injectTextComponentClass:function(t){c=t},injectComponentClasses:function(t){s(u,t)}},d={createInternalComponent:o,createInstanceForText:r,isTextComponent:i,injection:p};t.exports=d},function(t,e,n){"use strict";function o(t){return i(document.documentElement,t)}var r=n(366),i=n(326),a=n(140),s=n(141),l={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:l.hasSelectionCapabilities(t)?l.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,r=t.selectionRange;e!==n&&o(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=r.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,o=e.end;if(void 0===o&&(o=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(o,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var i=t.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",o-n),i.select()}else r.setOffsets(t,e)}};t.exports=l},function(t,e,n){"use strict";function o(t,e){for(var n=Math.min(t.length,e.length),o=0;o<n;o++)if(t.charAt(o)!==e.charAt(o))return o;return t.length===e.length?-1:n}function r(t){return t?t.nodeType===O?t.documentElement:t.firstChild:null}function i(t){return t.getAttribute&&t.getAttribute(B)||""}function a(t,e,n,o,r){var i;if(b.logTopLevelRenders){var a=t._currentElement.props,s=a.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var l=S.mountComponent(t,n,null,g(t,e),r);i&&console.timeEnd(i),t._renderedComponent._topLevelWrapper=t,U._mountImageIntoNode(l,e,t,o,n)}function s(t,e,n,o){var r=x.ReactReconcileTransaction.getPooled(!n&&_.useCreateElement);r.perform(a,null,t,e,r,n,o),x.ReactReconcileTransaction.release(r)}function l(t,e,n){for(S.unmountComponent(t,n),e.nodeType===O&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function u(t){var e=r(t);if(e){var n=v.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function c(t){var e=r(t),n=e&&v.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function p(t){var e=c(t);return e?e._hostContainerInfo._topLevelWrapper:null}var d=n(5),h=n(36),f=n(37),m=n(62),v=(n(28),n(8)),g=n(358),_=n(361),y=n(20),b=n(151),E=n(51),C=(n(10),n(375)),S=n(38),M=n(104),x=n(21),R=n(47),k=n(166),w=(n(4),n(65)),P=n(110),B=(n(6),f.ID_ATTRIBUTE_NAME),D=f.ROOT_ATTRIBUTE_NAME,T=1,O=9,A=11,I={},N=1,F=function(){this.rootID=N++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props};var U={TopLevelWrapper:F,_instancesByReactRootID:I,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,o,r){return U.scrollMonitor(o,function(){M.enqueueElementInternal(t,e,n),r&&M.enqueueCallbackInternal(t,r)}),t},_renderNewRootComponent:function(t,e,n,o){!e||e.nodeType!==T&&e.nodeType!==O&&e.nodeType!==A?d("37"):void 0,m.ensureScrollValueMonitoring();var r=k(t,!1);x.batchedUpdates(s,r,e,n,o);var i=r._instance.rootID;return I[i]=r,r},renderSubtreeIntoContainer:function(t,e,n,o){return null!=t&&E.has(t)?void 0:d("38"),U._renderSubtreeIntoContainer(t,e,n,o)},_renderSubtreeIntoContainer:function(t,e,n,o){M.validateCallback(o,"ReactDOM.render"),y.isValidElement(e)?void 0:d("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=y(F,null,null,null,null,null,e);if(t){var l=E.get(t);a=l._processChildContext(l._context)}else a=R;var c=p(n);if(c){var h=c._currentElement,f=h.props;if(P(f,e)){var m=c._renderedComponent.getPublicInstance(),v=o&&function(){o.call(m)};return U._updateRootComponent(c,s,a,n,v),m}U.unmountComponentAtNode(n)}var g=r(n),_=g&&!!i(g),b=u(n),C=_&&!c&&!b,S=U._renderNewRootComponent(s,n,C,a)._renderedComponent.getPublicInstance();return o&&o.call(S),S},render:function(t,e,n){return U._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){!t||t.nodeType!==T&&t.nodeType!==O&&t.nodeType!==A?d("40"):void 0;var e=p(t);if(!e){u(t),1===t.nodeType&&t.hasAttribute(D);return!1}return delete I[e._instance.rootID],x.batchedUpdates(l,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,i,a){if(!e||e.nodeType!==T&&e.nodeType!==O&&e.nodeType!==A?d("41"):void 0,i){var s=r(e);if(C.canReuseMarkup(t,s))return void v.precacheNode(n,s);var l=s.getAttribute(C.CHECKSUM_ATTR_NAME);s.removeAttribute(C.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(C.CHECKSUM_ATTR_NAME,l);var c=t,p=o(c,u),f=" (client) "+c.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);e.nodeType===O?d("42",f):void 0}if(e.nodeType===O?d("43"):void 0,a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);h.insertTreeBefore(e,t,null)}else w(e,t),v.precacheNode(n,e.firstChild)}};t.exports=U},function(t,e,n){"use strict";var o=n(60),r=o({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=r},function(t,e,n){"use strict";var o=n(5),r=n(20),i=(n(4),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?i.EMPTY:r.isValidElement(t)?"function"==typeof t.type?i.COMPOSITE:i.HOST:void o("26",t)}});t.exports=i},function(t,e,n){"use strict";function o(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function r(t){function e(e,n,o,r,i,a,s){r=r||x,a=a||o;if(null==n[o]){var l=E[i];return e?new Error("Required "+l+" `"+a+"` was not specified in "+("`"+r+"`.")):null}return t(n,o,r,i,a)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function i(t){function e(e,n,o,r,i,a){var s=e[n],l=g(s);if(l!==t){var u=E[r],c=_(s);return new Error("Invalid "+u+" `"+i+"` of type "+("`"+c+"` supplied to `"+o+"`, expected ")+("`"+t+"`."))}return null}return r(e)}function a(){return r(S.thatReturns(null))}function s(t){function e(e,n,o,r,i){if("function"!=typeof t)return new Error("Property `"+i+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var a=e[n];if(!Array.isArray(a)){var s=E[r],l=g(a);return new Error("Invalid "+s+" `"+i+"` of type "+("`"+l+"` supplied to `"+o+"`, expected an array."))}for(var u=0;u<a.length;u++){var c=t(a,u,o,r,i+"["+u+"]",C);if(c instanceof Error)return c}return null}return r(e)}function l(){function t(t,e,n,o,r){var i=t[e];if(!b.isValidElement(i)){var a=E[o],s=g(i);return new Error("Invalid "+a+" `"+r+"` of type "+("`"+s+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return r(t)}function u(t){function e(e,n,o,r,i){if(!(e[n]instanceof t)){var a=E[r],s=t.name||x,l=y(e[n]);return new Error("Invalid "+a+" `"+i+"` of type "+("`"+l+"` supplied to `"+o+"`, expected ")+("instance of `"+s+"`."))}return null}return r(e)}function c(t){function e(e,n,r,i,a){for(var s=e[n],l=0;l<t.length;l++)if(o(s,t[l]))return null;var u=E[i],c=JSON.stringify(t);return new Error("Invalid "+u+" `"+a+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return Array.isArray(t)?r(e):S.thatReturnsNull}function p(t){function e(e,n,o,r,i){if("function"!=typeof t)return new Error("Property `"+i+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var a=e[n],s=g(a);if("object"!==s){var l=E[r];return new Error("Invalid "+l+" `"+i+"` of type "+("`"+s+"` supplied to `"+o+"`, expected an object."))}for(var u in a)if(a.hasOwnProperty(u)){var c=t(a,u,o,r,i+"."+u,C);if(c instanceof Error)return c}return null}return r(e)}function d(t){function e(e,n,o,r,i){for(var a=0;a<t.length;a++){var s=t[a];if(null==s(e,n,o,r,i,C))return null}var l=E[r];return new Error("Invalid "+l+" `"+i+"` supplied to "+("`"+o+"`."))}return Array.isArray(t)?r(e):S.thatReturnsNull}function h(){function t(t,e,n,o,r){if(!m(t[e])){var i=E[o];return new Error("Invalid "+i+" `"+r+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(t)}function f(t){function e(e,n,o,r,i){var a=e[n],s=g(a);if("object"!==s){var l=E[r];return new Error("Invalid "+l+" `"+i+"` of type `"+s+"` "+("supplied to `"+o+"`, expected `object`."))}for(var u in t){var c=t[u];if(c){var p=c(a,u,o,r,i+"."+u,C);if(p)return p}}return null}return r(e)}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||b.isValidElement(t))return!0;var e=M(t);if(!e)return!1;var n,o=e.call(t);if(e!==t.entries){for(;!(n=o.next()).done;)if(!m(n.value))return!1}else for(;!(n=o.next()).done;){var r=n.value;if(r&&!m(r[1]))return!1}return!0;default:return!1}}function v(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function g(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":v(e,t)?"symbol":e}function _(t){var e=g(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function y(t){return t.constructor&&t.constructor.name?t.constructor.name:x}var b=n(20),E=n(101),C=n(103),S=n(16),M=n(164),x=(n(6),"<<anonymous>>"),R={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),symbol:i("symbol"),any:a(),arrayOf:s,element:l(),instanceOf:u,node:h(),objectOf:p,oneOf:c,oneOfType:d,shape:f};t.exports=R},function(t,e){"use strict";t.exports="15.3.0"},function(t,e){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},function(t,e,n){"use strict";function o(t,e){return null==e?r("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var r=n(5);n(4);t.exports=o},function(t,e,n){"use strict";var o=!1;t.exports=o},function(t,e){"use strict";function n(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=n},function(t,e,n){"use strict";function o(t){for(var e;(e=t._renderedNodeType)===r.COMPOSITE;)t=t._renderedComponent;return e===r.HOST?t._renderedComponent:e===r.EMPTY?null:void 0}var r=n(156);t.exports=o},function(t,e){"use strict";function n(t){var e=t&&(o&&t[o]||t[r]);if("function"==typeof e)return e}var o="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";t.exports=n},function(t,e,n){"use strict";function o(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=n(9),i=null;t.exports=o},function(t,e,n){"use strict";function o(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function r(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function i(t,e){var n;if(null===t||t===!1)n=u.create(i);else if("object"==typeof t){var s=t;!s||"function"!=typeof s.type&&"string"!=typeof s.type?a("130",null==s.type?s.type:typeof s.type,o(s._owner)):void 0,"string"==typeof s.type?n=c.createInternalComponent(s):r(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new p(s)}else"string"==typeof t||"number"==typeof t?n=c.createInstanceForText(t):a("131",typeof t);n._mountIndex=0,n._mountImage=null;return n}var a=n(5),s=n(7),l=n(354),u=n(150),c=n(152),p=(n(10),n(4),n(6),function(t){this.construct(t)});s(p.prototype,l.Mixin,{_instantiateReactComponent:i});t.exports=i},function(t,e){"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!o[t.type]:"textarea"===e}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},function(t,e,n){"use strict";var o=n(9),r=n(64),i=n(65),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};o.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){i(t,r(e))})),t.exports=a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(o){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(244),f=o(h),m=n(238),v=o(m),g=n(248),_=o(g),y=n(233),b=o(y),E=n(40),C=o(E),S=n(227),M=o(S),x=n(18),R=o(x),k=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));a._screens={splash:f["default"],photoRoll:v["default"],webcam:_["default"],editor:b["default"],empty:C["default"]};var l=void 0;return l=a.props.options.editor.image?"editor":"splash",a._previousScreensStack=[],a.state={activeScreen:a._screens[l],activeScreenName:l,screens:(0,i["default"])({},l,a._screens[l])},a}return(0,p["default"])(e,t),e.prototype.hasPreviousScreen=function(){return!!this._previousScreensStack.length},e.prototype.getPreviousScreen=function(){var t=this._previousScreensStack;return t[t.length-1]},e.prototype.switchToScreen=function(t){var e=this,n=null;if("back"===t){if(n=this._previousScreensStack.pop(),!n)throw new Error("Unable to switch to previous screen - no previous screen found.")}else{if(n=this._screens[t],!n)throw new Error("Unknown screen `"+t+"`");this._previousScreensStack.push(this.state.activeScreen)}return this.state.screens[t]||(this.state.screens[t]=n),"editor"!==this.state.activeScreenName&&delete this.state.screens[this.state.activeScreenName],new d.Promise(function(o){e.setState({activeScreen:n,activeScreenName:t},function(){o()})})},e.prototype.setImage=function(t,e){var n=this,o=this.props.options;o.editor.image=t;var r=!this.refs.editorScreen;this.switchToScreen("editor").then(function(){r||n.refs.editorScreen.setImage(t,e)})},e.prototype["export"]=function(){if(this.state.activeScreen!==this._screens.editor)return d.Promise.reject(new Error("Unable to export: Active screen is not the editor screen."));if(this.state.screens.editor){var t;return(t=this.refs.editorScreen)["export"].apply(t,arguments)}},e.prototype.serialize=function(){var t;return this.state.screens.editor?(t=this.refs.editorScreen).serialize.apply(t,arguments):d.Promise.reject(new Error("Editor screen unavailable"))},e.prototype.deserialize=function(t){return this.state.screens.editor?this.refs.editorScreen.deserialize(t):d.Promise.reject(new Error("Editor screen unavailable"))},e.prototype.getChildContext=function(){return{ui:this.props.ui,options:this.props.options,mediator:this.props.mediator}},e.prototype._renderScreens=function(){var t=[];for(var e in this.state.screens){var n=this.state.screens[e],o=this.state.activeScreen===n;t.push(d.ReactBEM.createElement(n,{ref:e+"Screen",app:this,visible:o}))}return t},e.prototype.render=function(){return d.ReactBEM.transform(d.ReactBEM.createElement("div",{bem:"b:editor"},d.ReactBEM.createElement(M["default"],{modalManager:R["default"].instance}),this._renderScreens()))},e}(d.React.Component);e["default"]=k,k.childContextTypes={ui:d.React.PropTypes.object.isRequired,mediator:d.React.PropTypes.object.isRequired,options:d.React.PropTypes.object.isRequired},k.propTypes={ui:d.React.PropTypes.object.isRequired,mediator:d.React.PropTypes.object.isRequired,options:d.React.PropTypes.object.isRequired}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(263);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return o(r)["default"]}});var i=n(261);Object.defineProperty(e,"Library",{enumerable:!0,get:function(){return o(i)["default"]}});var a=n(264);Object.defineProperty(e,"SearchSuggestion",{enumerable:!0,get:function(){return o(a)["default"]}});var s=n(262);Object.defineProperty(e,"Photo",{enumerable:!0,get:function(){return o(s)["default"]}})},function(t,e){t.exports={controls:{overview:{filters:"Filter",adjustments:"Korrekturen",crop:"Zuschneiden",blur:"Weichzeichnen",border:"Rahmen",sticker:"Sticker",text:"Text",brush:"Malen"},border:{color:"Farbe",thickness:"Dicke"},text:{foreground:"Vordergrund",background:"Hintergrund",size:"Größe",font:"Schriftart",
alignment:"Ausrichtung",takeToFront:"Nach oben"},adjustments:{brightness:"Helligkeit",contrast:"Kontrast",saturation:"Sättigung",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",clarity:"Klarheit"},crop:{custom:"Manuell",square:"Quadratisch","4-3":"4:3","16-9":"16:9",rotation:"Drehung"},focus:{radial:"Kreisförmig",linear:"Linear",blurRadius:"Radius"},filters:{intensity:"Intensität",categories:{all:"Alle",retro:"Retro",bw:"Schwarz & Weiß",summer:"Sommer",winter:"Winter",special:"Spezial"}},sticker:{brightness:"Helligkeit",contrast:"Kontrast",saturation:"Sättigung",blur:"Weichzeichnen",flip:"Spiegeln","flip-v":"Spiegeln (V)","flip-h":"Spiegeln (H)",takeToFront:"Nach oben",categories:{all:"Alle",glasses:"Brillen",hats:"Hüte",beards:"Bärte",misc:"Gemischt"}},brush:{thickness:"Dicke",color:"Farbe"}},webcam:{headline:"Mache ein Foto!"},editor:{headline:"Foto editieren","new":"Neu",backgroundImage:"Hintergrundbild",undo:"Rückgängig","export":"Speichern"},splash:{upload:{button:"Lade ein Foto hoch",description:"Klicke hier, um ein Foto von deinem Rechner hochzuladen oder lade es per Drag-and-Drop hoch"},webcam:{headline:"Webcam",description:"Klicke hier, um ein Foto mit deiner Webcam zu machen"},photoRoll:{headline:"Kostenloses Bildmaterial",description:"Suche dir eines von tausenden Stock Photos aus."}},photoRoll:{search:{placeholder:"Nach Fotos suchen",noSearchResults:'Entschuldigung, aber wir konnten für <strong>"${query}"</strong> leider keine Ergebnisse finden.',results:{headline:'Suchergebnisse für "${query}"'}}},generic:{back:"Zurück",cancel:"Abbrechen",color:"Farbe"},loading:{resizing:"Bild wird bearbeitet...",exporting:"Exportiere...",loading:"Lade..."},warnings:{imageResized_maxMegaPixels:{title:"Bild verkleinert",text:"Da dein Bild die maximale Größe von ${maxMegaPixels} Megapixeln überschreitet, wurde es auf ${width}x${height} Pixel verkleinert."},imageResized_maxDimensions:{title:"Bild verkleinert",text:"Aufgrund von Hardware-Beschränkungen wurde das Bild auf ${width}x${height} Pixel verkleinert."}},errors:{imageLoadFail:{title:"Bild konnte nicht geladen werden",text:"Beim Laden des Bildes unter ${path} ist ein Fehler aufgetreten."},webcamUnavailable:{title:"Webcam nicht verfügbar",text:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})"},webcamNotSupported:{title:"Webcam nicht unterstützt",text:"Dein Browser unterstützt das Webcam-Feature leider noch nicht."},renderingError:{title:"Rendering-Fehler",text:"Beim Rendern des Bildes ist ein Fehler aufgetreten."},context_lost:{title:"Es ist ein Fehler aufgetreten",text:"Dein Browser hat zu lange gebraucht, um das Bild zu generieren. Bitte versuche es noch einmal."},context_lost_limit:{title:"Es ist ein Fehler aufgetreten",text:"Bild-Generierung ist mehrmals fehlgeschlagen."},loadingStickersFailed:{title:"Laden der Sticker fehlgeschlagen"}}}},function(t,e){t.exports={controls:{overview:{filters:"Filters",adjustments:"Adjust",crop:"Crop",focus:"Focus",border:"Border",sticker:"Sticker",text:"Text",brush:"Brush"},border:{color:"Color",thickness:"Thickness"},text:{foreground:"Foreground",background:"Background",size:"Size",font:"Font",alignment:"Alignment",takeToFront:"To Front"},adjustments:{brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",clarity:"Clarity"},crop:{custom:"Custom",square:"Square","4-3":"4:3","16-9":"16:9",rotation:"Rotation"},focus:{radial:"Radial",linear:"Linear",blurRadius:"Blur radius"},filters:{intensity:"Intensity",categories:{all:"All",retro:"Retro",bw:"Black & White",summer:"Summer",winter:"Winter",special:"Special"}},sticker:{brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",blur:"Blur",flip:"Flip","flip-v":"Flip (V)","flip-h":"Flip (H)",takeToFront:"To Front",categories:{all:"All",glasses:"Glasses",hats:"Hats",beards:"Beards",misc:"Misc"}},brush:{thickness:"Thickness",color:"Color"}},webcam:{headline:"Take a photo!"},editor:{headline:"Edit Photo","new":"New",backgroundImage:"Background Image",undo:"Undo","export":"Export"},splash:{upload:{button:"Upload your image",description:"Upload a picture from your library or just drag and drop"},webcam:{headline:"Webcam",description:"Take a picture with your webcam or phone"},photoRoll:{headline:"Free stock footage",description:"Select from thousands of Free Stock Photos"}},photoRoll:{search:{placeholder:"Search for photos",noSearchResults:'Sorry, but we couldn\'t find any photos for <strong>"${query}"</strong>.',results:{headline:'Search results for "${query}"'}}},generic:{back:"Back",cancel:"Cancel",color:"Color"},loading:{resizing:"Resizing...",exporting:"Exporting...",loading:"Loading..."},warnings:{imageResized_maxMegaPixels:{title:"Image resized",text:"Your image exceeds the maximum size of ${maxMegaPixels} megapixels and has therefore been resized to ${width}x${height} pixels."},imageResized_maxDimensions:{title:"Image resized",text:"Due to hardware limitations your image has been resized to ${width}x${height} pixels."}},errors:{imageLoadFail:{title:"Failed to load image",text:"Failed to load the image at ${path}"},webcamUnavailable:{title:"Webcam unavailable",text:"Unable to display webcam image (Error: ${error})"},webcamNotSupported:{title:"Webcam not supported",text:"The webcam feature is not supported by your browser."},renderingError:{title:"Error while rendering",text:"An error has occurred while rendering the image."},context_lost:{title:"An error has occurred",text:"Your browser took too long to render the image. Please try applying less operations."},context_lost_limit:{title:"An error has occurred",text:"Your browser failed multiple times while rendering the image."},loadingStickersFailed:{title:"Failed to load stickers"}}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"e:cell m:largeButton"},c.ReactBEM.createElement("div",{bem:"$e:largeButton",onClick:this.props.onClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/back.png",!0)}))))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(113),p=o(c),d=n(123),h=o(d),f=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._events={},a._needsStyleFixes=!1,a._bindAll("_onSharedStateUpdate","fixStyles"),a}return(0,u["default"])(e,t),e.prototype.fixStyles=function(){},e.prototype.componentDidMount=function(){this._bindEvents(),this.props.sharedState&&this.props.sharedState.on("update",this._onSharedStateUpdate),this._needsStyleFixes&&(this.fixStyles(),this.context.options.responsive&&window.addEventListener("resize",this.fixStyles))},e.prototype.componentWillUnmount=function(){this._unbindEvents(),this.props.sharedState&&this.props.sharedState.off("update",this._onSharedStateUpdate),this.context.options.responsive&&this._needsStyleFixes&&window.removeEventListener("resize",this.fixStyles)},e.prototype.componentWillReceiveProps=function(t){t.sharedState&&(this.props.sharedState&&this.props.sharedState.off("update",this._onSharedStateUpdate),t.sharedState.on("update",this._onSharedStateUpdate))},e.prototype._bindAll=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){if("function"!=typeof t[e])throw new Error("_bindAll: "+t.constructor.name+"."+e+" is not a function.");t[e]=t[e].bind(t)})},e.prototype._t=function(t,e){return this.context.ui.translate(t,e)},e.prototype._getAssetPath=function(){var t;return(t=this.context.ui).getAssetPath.apply(t,arguments)},e.prototype._onSharedStateUpdate=function(t,e){this.sharedStateDidChange(e),this.shouldSharedComponentUpdate(t,e)&&this.forceUpdate()},e.prototype.shouldSharedComponentUpdate=function(t,e){return!0},e.prototype.sharedStateDidChange=function(t){},e.prototype.setSharedState=function(t,e){this.props.sharedState.set(t,e)},e.prototype.getSharedState=function(t){return this.props.sharedState.get(t)},e.prototype.forceSharedUpdate=function(){this.props.sharedState.broadcastUpdate()},e.prototype._bindEvents=function(){for(var t in this._events){var e=this._events[t];this.context.mediator.on(t,e)}},e.prototype._unbindEvents=function(){for(var t in this._events){var e=this._events[t];this.context.mediator.off(t,e)}},e.prototype._emitEvent=function(t){for(var e,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];(e=this.context.mediator).emit.apply(e,[t].concat(o))},e.prototype.renderWithBEM=function(){return h["default"].createElement("div")},e.prototype.render=function(){return h["default"].transform(this.renderWithBEM())},e}(p["default"].Component);e["default"]=f,f.contextTypes={editor:p["default"].PropTypes.object,ui:p["default"].PropTypes.object,options:p["default"].PropTypes.object,mediator:p["default"].PropTypes.object,editorScreen:p["default"].PropTypes.object},f.propTypes={sharedState:p["default"].PropTypes.any}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){var t="b:button";return this.props.uppercase&&(t+=" m:uppercase"),c.ReactBEM.createElement("button",{bem:t,className:this.props.className,onClick:this.props.onClick},this.props.children)},e}(c.BaseComponent);e["default"]=p,p.propTypes={onClick:c.React.PropTypes.func,children:c.React.PropTypes.any.isRequired,className:c.React.PropTypes.string},p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._onItemClick=function(t){this.props.onChange&&this.props.onChange(t)},e.prototype._renderListItems=function(){var t=this;return this.props.items.map(function(e){var n=e.name===t.props.selectedItem.name;return c.ReactBEM.createElement("li",{bem:"$e:item",className:n?" is-active":"",onClick:t._onItemClick.bind(t,e)},c.ReactBEM.createElement("img",{bem:"e:icon",src:e.icon}),c.ReactBEM.createElement("div",{bem:"e:label"},e.label))})},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:categoryDropdown $e:overlay"},c.ReactBEM.createElement("ul",{bem:"$e:list"},this._renderListItems()))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onKnobDrag","_onKnobDragStart"),a._value=a.props.initialValue.clone(),a._transparentPatternCanvas=c.Utils.createTransparentPatternCanvas(),a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.shouldComponentUpdate=function(t){var e=t.initialValue;return e!==this._value&&(this._value=e.clone(),this._renderCanvas(),!0)},e.prototype._onKnobDragStart=function(t,e){e.target===this.refs.knob?this._initialAlpha=this._value.a:this._setAlphaFromPosition(t)},e.prototype._onKnobDrag=function(t,e){var n=this.refs.canvas,o=n.offsetWidth,r=t.x/o;this._setAlpha(this._initialAlpha+r)},e.prototype._getKnobStyle=function(){return{left:(100*this._value.a).toFixed(2)+"%",top:"50%"}},e.prototype._setAlpha=function(t){this._value.a=t,this._value.a=Math.min(1,Math.max(0,this._value.a)),this.forceUpdate(),this.props.onChange&&this.props.onChange(this._value)},e.prototype._setAlphaFromPosition=function(t){var e=this.refs.canvas;this._initialAlpha=t.x/e.offsetWidth,this._setAlpha(this._initialAlpha)},e.prototype._renderCanvas=function(){var t=this.refs.canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;var n=e.createPattern(this._transparentPatternCanvas,"repeat");e.fillStyle=n,e.fillRect(0,0,t.width,t.height);var o=e.createLinearGradient(0,0,t.width,t.height),r=this._value.clone();r.a=0,o.addColorStop(0,r.toRGBA()),o.addColorStop(1,this._value.toHex()),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:colorPicker $e:alpha"},c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.ReactBEM.createElement("div",null,c.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"canvas"}),c.ReactBEM.createElement("div",{bem:"e:knob $b:knob m:transparent",ref:"knob",style:this._getKnobStyle()}))))},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));a._bindAll("_onKnobDrag","_onKnobDragStart"),a._value=a.props.initialValue.clone();var l=a._value.toHSV(),u=l[0],c=l[1],p=l[2];return a._hsvColor={h:u,s:c,v:p},a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.shouldComponentUpdate=function(t){var e=t.initialValue;if(e!==this._value){this._value=e.clone();var n=this._value.toHSV(),o=n[0],r=n[1],i=n[2];return this._hsvColor={h:o,s:r,v:i},this._renderCanvas(),!0}return!1},e.prototype._onKnobDragStart=function(t,e){e.target===this.refs.knob?this._initialHue=this._hsvColor.h:this._setValueFromPosition(t)},e.prototype._onKnobDrag=function(t,e){var n=this.refs.canvas,o=n.offsetHeight,r=t.y/o;this._setHue(this._initialHue+r)},e.prototype._getKnobStyle=function(){return{left:"50%",top:(100*this._hsvColor.h).toFixed(2)+"%"}},e.prototype._setHue=function(t){var e=this._hsvColor,n=e.s,o=e.v;t=Math.min(1,Math.max(0,t)),n=Math.max(.01,Math.min(n,.99)),o=Math.max(.01,Math.min(o,.99)),this._value=c.Color.fromHSV(t,n,o,this._value.a),this._hsvColor={h:t,s:n,v:o},this.forceUpdate(),this.props.onChange&&this.props.onChange(this._value)},e.prototype._setValueFromPosition=function(t){var e=this.refs.canvas;this._initialHue=t.y/e.offsetHeight,this._setHue(this._initialHue)},e.prototype._renderCanvas=function(){var t=this.refs.canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;for(var n=0;n<t.height;n++){var o=n/t.height,r=c.Color.fromHSV(o,1,1);e.strokeStyle=r.toRGBA(),e.beginPath(),e.moveTo(0,n),e.lineTo(t.width,n),e.stroke()}},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:colorPicker $e:hue"},c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.ReactBEM.createElement("div",null,c.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"canvas"}),c.ReactBEM.createElement("div",{bem:"e:knob $b:knob m:transparent",ref:"knob",style:this._getKnobStyle()}))))},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(178),d=o(p),h=n(181),f=o(h),m=n(179),v=o(m),g=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));a._value=a.props.initialValue.clone();var l=a._value.toHSV(),u=l[0],c=l[1],p=l[2];return a._hsv={h:u,s:c,v:p},a._bindAll("_onElementClick","_onColorChange","_onDocumentClick"),a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),document.addEventListener("click",this._onDocumentClick)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),document.removeEventListener("click",this._onDocumentClick)},e.prototype._onDocumentClick=function(t){for(var e=t.target;e;e=e.parentNode)if(e===this.refs.root)return;this.props.onClose&&this.props.onClose()},e.prototype._onElementClick=function(t){t.stopPropagation()},e.prototype._onColorChange=function(t){this._value=t,this.props.onChange&&this.props.onChange(t)},e.prototype.renderWithBEM=function(){var t=void 0;return this.props.alpha!==!1&&(t=c.ReactBEM.createElement(d["default"],{initialValue:this._value,onChange:this._onColorChange})),c.ReactBEM.createElement("div",{bem:"$b:colorPicker $e:overlay",onClick:this._onElementClick,ref:"root"},t,c.ReactBEM.createElement("div",{bem:"e:bottom"},c.ReactBEM.createElement(f["default"],{initialValue:this._value,onChange:this._onColorChange}),c.ReactBEM.createElement(v["default"],{initialValue:this._value,onChange:this._onColorChange})))},e}(c.BaseComponent);e["default"]=g,g.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));a._bindAll("_onKnobDrag","_onKnobDragStart"),a._value=a.props.initialValue.clone();var l=a._value.toHSV(),u=l[0],c=l[1],p=l[2];return a._hsvColor={h:u,s:c,v:p},a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.shouldComponentUpdate=function(t){var e=t.initialValue;if(e!==this._value){this._value=e.clone();var n=this._value.toHSV(),o=n[0],r=n[1],i=n[2];return this._hsvColor={h:o,s:r,v:i},this._renderCanvas(),!0}return!1},e.prototype._onKnobDragStart=function(t,e){e.target===this.refs.knob?(this._initialValue=this._hsvColor.v,this._initialSaturation=this._hsvColor.s):this._setValuesFromPosition(t)},e.prototype._onKnobDrag=function(t,e){var n=this.refs.canvas,o=n.offsetWidth,r=n.offsetHeight,i=t.x/o,a=t.y/r*-1,s=this._hsvColor.h;this._setHSV(s,this._initialSaturation+i,this._initialValue+a)},e.prototype._getKnobStyle=function(){var t=this._hsvColor,e=t.s,n=t.v;return{left:(100*e).toFixed(2)+"%",top:(100*(1-n)).toFixed(2)+"%"}},e.prototype._setHSV=function(t,e,n){e=Math.max(.01,Math.min(e,.99)),n=Math.max(.01,Math.min(n,.99)),this._value=c.Color.fromHSV(t,e,n,this._value.a),this._hsvColor={h:t,s:e,v:n},this.forceUpdate(),this.props.onChange&&this.props.onChange(this._value)},e.prototype._setValuesFromPosition=function(t){var e=this.refs.canvas;this._initialSaturation=t.x/e.offsetWidth,this._initialValue=1-t.y/e.offsetHeight;var n=this._hsvColor.h;this._setHSV(n,this._initialSaturation,this._initialValue)},e.prototype._renderCanvas=function(){var t=this.refs.canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;for(var n=e.getImageData(0,0,t.width,t.height),o=0;o<t.height;o++)for(var r=(t.height-o)/t.height,i=0;i<t.width;i++){var a=i/t.width,s=c.Color.fromHSV(this._hsvColor.h,a,r),l=s.r,u=s.g,p=s.b,d=s.a,h=4*(o*t.width+i);n.data[h]=255*l,n.data[h+1]=255*u,n.data[h+2]=255*p,n.data[h+3]=255*d}e.putImageData(n,0,0)},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:colorPicker $e:saturation"},c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.ReactBEM.createElement("div",null,c.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"canvas"}),c.ReactBEM.createElement("div",{bem:"e:knob $b:knob m:transparent",ref:"knob",style:this._getKnobStyle()}))))},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(11),d=o(p),h=n(17),f=o(h),m=n(54),v=o(m),g=n(205),_=(o(g),[{identifier:"brightness",isAvailable:function(t){return t.isToolEnabled("brightness")},defaultValue:0,valueMultiplier:100,valueOffset:0},{identifier:"saturation",isAvailable:function(t){return t.isToolEnabled("saturation")},defaultValue:1,valueMultiplier:100,valueOffset:-100},{identifier:"contrast",isAvailable:function(t){return t.isToolEnabled("contrast")},defaultValue:1,valueMultiplier:100,valueOffset:-100},{identifier:"clarity",isAvailable:function(t){return t.isToolEnabled("clarity")},defaultValue:0,valueMultiplier:100,valueOffset:0},{identifier:"exposure",isAvailable:function(t){return t.isToolEnabled("exposure")},defaultValue:0,valueMultiplier:100,valueOffset:0},{identifier:"shadows",isAvailable:function(t){return t.isToolEnabled("shadows")},defaultValue:1,valueMultiplier:100,valueOffset:-100},{identifier:"highlights",isAvailable:function(t){return t.isToolEnabled("highlights")},defaultValue:1,valueMultiplier:100,valueOffset:0}]),y=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));a._bindAll("_onSliderValueChange");var l=a.context.editor;return a._operation=l.operations.getOrCreate("adjustments"),a.state={selectedControls:null},a}return(0,u["default"])(e,t),e.prototype._onBackClick=function(e){var n=this.context.editor,o=this.getSharedState("operationExistedBefore"),r=this.getSharedState("initialOptions");this._operation.optionsEqual(r)||n.history.add(this._operation,r,o);var i=this._operation.getDefaultOptions();this._operation.optionsEqual(i)&&n.operations.remove(this._operation),t.prototype._onBackClick.call(this,e)},e.prototype._onSliderValueChange=function(t){var e=this.state.selectedControls,n=e.identifier,o=e.valueMultiplier,r=e.valueOffset;t=(t-r)/o,this._operation.setOption(n,t);var i=this.context.editor;i.render()},e.prototype._onButtonClick=function(t,e){this.setState({selectedControls:t})},e.prototype._buildSliderProps=function(t){var e=t.identifier,n=t.defaultValue,o=t.valueMultiplier,r=t.valueOffset,i=-1*o,a=1*o,s=this._operation?this._operation.getOption(e):n;return s*=o,s+=r,{minValue:i,maxValue:a,value:s,valueUnit:"%",positiveValuePrefix:"+",label:this._t("controls.adjustments."+e),middleDot:!0,onChange:this._onSliderValueChange}},e.prototype.renderOverlayControls=function(){var t=this.state.selectedControls;if(t){var e=this._buildSliderProps(t);return c.ReactBEM.createElement(v["default"],e)}},e.prototype._renderListItems=function(){var t=this;return _.filter(function(e){return e.isAvailable(t.context.editor)}).map(function(e){var n=t.state.selectedControls===e,o=n?"is-active":null,r=void 0;return c.ReactBEM.createElement("li",{bem:"e:item",key:e.identifier,"data-identifier":e.identifier},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",onClick:t._onButtonClick.bind(t,e),className:o},c.ReactBEM.createElement("img",{bem:"e:icon",src:t._getAssetPath("controls/adjustments/"+e.identifier+".png",!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},t._t("controls.adjustments."+e.identifier)),r)))})},e.prototype.renderControls=function(){var t=this._renderListItems();return c.ReactBEM.createElement("div",{bem:"e:cell m:list"},c.ReactBEM.createElement(f["default"],null,c.ReactBEM.createElement("ul",{bem:"$e:list"},t)))},e}(d["default"]);e["default"]=y,y.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(12),p=o(c),d=n(182),h=o(d),f=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onEnter=function(t){var e=this.context.editor,n=e.operations.exists("adjustments"),o=e.operations.getOrCreate("adjustments"),r=o.serializeOptions();this.setSharedState({operation:o,operationExistedBefore:n,initialOptions:r})},e.isAvailable=function(t){return t.isToolEnabled("brightness")||t.isToolEnabled("saturation")||t.isToolEnabled("contrast")},e}(p["default"]);f.controlsComponent=h["default"],f.identifier="adjustments",f.iconPath="controls/overview/adjustments.png",f.languageKey="controls.overview.adjustments",f.defaultOptions={},e["default"]=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(11),d=o(p),h=n(41),f=o(h),m=n(67),v=o(m),g=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._hasDoneButton=!0,a._operation=a.getSharedState("operation"),a._bindAll("_onThicknessUpdate","_onColorUpdate"),a}return(0,u["default"])(e,t),e.prototype._onThicknessUpdate=function(t){var e=this.context.editor,n=this.getSharedState("inputDimensions");this._operation.setThickness(t/n.min()),e.render()},e.prototype._onBackClick=function(e){var n=this.context.editor;this.getSharedState("operationExistedBefore")?this._operation.set(this.getSharedState("initialOptions")):n.operations.remove(this._operation),n.zoom.undo(),n.features.enable("zoom","drag"),n.render(),t.prototype._onBackClick.call(this,e)},e.prototype._onColorUpdate=function(t){this._operation.setColor(t);var e=this.context.editor;e.render()},e.prototype.renderControls=function(){var t=this.getSharedState("inputDimensions"),e=0,n=.5*t.min(),o=this._operation.getThickness()*t.min();return[c.ReactBEM.createElement("div",{bem:"e:cell m:slider"},c.ReactBEM.createElement(f["default"],{style:"large",minValue:e,maxValue:n,valueUnit:"px",middleDot:!1,label:this._t("controls.border.thickness"),onChange:this._onThicknessUpdate,value:o})),c.ReactBEM.createElement("div",{bem:"e:cell m:colorPicker"},c.ReactBEM.createElement(v["default"],{initialValue:this._operation.getColor().clone(),onChange:this._onColorUpdate}))]},e}(d["default"]);e["default"]=g,g.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(12),p=o(c),d=n(184),h=o(d),f=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onEnter=function(t){var e=this.context.editor,n=e.operations.exists("border"),o=e.operations.getOrCreate("border",{thickness:.05}),r={color:o.getColor().clone(),thickness:o.getThickness()};this.setSharedState({operation:o,operationExistedBefore:n,initialOptions:r,inputDimensions:o.getInputDimensions()}),e.zoom.set("auto",function(){e.features.disable("zoom","drag")})},e.onExit=function(){var t=this.context.editor,e=this.getSharedState("operation");t.history.add(e,this.getSharedState("initialOptions"),this.getSharedState("operationExistedBefore")),e.setEnabled(!0),t.zoom.undo(),t.features.enable("zoom","drag"),t.render()},e.isAvailable=function(t){return t.isToolEnabled("border")},e}(p["default"]);f.controlsComponent=h["default"],f.identifier="border",f.iconPath="controls/overview/border.png",f.languageKey="controls.overview.border",f.defaultOptions={},e["default"]=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(69),f=o(h),m=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return a._windowResized=!1,a._drawing=!1,a._bindAll("_onMouseEnter","_onMouseLeave","_onMouseDown","_onMouseMove","_onMouseUp","_onMouseMoveOnCanvas","_onWindowResize"),a._lastDrawPosition=null,a._events=d.SDKUtils.extend(a._events,(0,i["default"])({},d.Constants.EVENTS.WINDOW_RESIZE,a._onWindowResize)),a.state={cursorVisible:!1,cursorPosition:new d.Vector2},a}return(0,p["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateContainerRect()},e.prototype.componentDidUpdate=function(){this._windowResized&&(this._updateContainerRect(),this._windowResized=!1)},e.prototype._onWindowResize=function(){this._windowResized=!0},e.prototype._onOperationRemoved=function(t){},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&this.forceUpdate()},e.prototype._onMouseDown=function(t){t.preventDefault(),this._optionsBeforeDraw=this.getSharedState("operation").serializeOptions(),delete this._optionsBeforeDraw.enabled,this._operationExistedBeforeDraw=this.getSharedState("operationExistedBefore"),this.setSharedState({operationExistedBefore:!0},!1);var e=this.context.editor.getOutputDimensions(),n=this._getCursorPosition(t),o=this.getSharedState("brush"),r=this.getSharedState("thickness")/e.min(),i=this.getSharedState("color"),a=this.getSharedState("hardness");this._drawing=!0,this._currentPath=o.createPath(r,a,i),this._currentPath.addControlPoint(n.clone().divide(e)),document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("touchmove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("touchend",this._onMouseUp)},e.prototype._onMouseUp=function(){this._currentPath.setClosed(!0),this._currentPath=null,this._drawing=!1;var t=this.context.editor;t.history.add(this.getSharedState("operation"),this._optionsBeforeDraw,this._operationExistedBeforeDraw),document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("touchmove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("touchend",this._onMouseUp)},e.prototype._onMouseEnter=function(t){var e=this._getCursorPosition(t);this.setState({cursorVisible:!0,cursorPosition:e}),this._onMouseMove(t)},e.prototype._onMouseLeave=function(){this.setState({cursorVisible:!1})},e.prototype._onMouseMove=function(t){var e=this.context.editor.getOutputDimensions(),n=this.context.editor.zoom.get(),o=this._getCursorPosition(t);this.setState({cursorPosition:o});var r=void 0;if(this._lastDrawPosition){var i=this.getSharedState("thickness"),a=this._lastDrawPosition.clone().subtract(o).abs().len()/n;r=a>=i/3}else r=!0;this._drawing&&r&&(this._currentPath.addControlPoint(o.clone().divide(e)),this.getSharedState("brush").render(e),this._lastDrawPosition=o.clone())},e.prototype._onMouseMoveOnCanvas=function(t){var e=this._getCursorPosition(t);this.setState({cursorPosition:e})},e.prototype._getCursorStyle=function(){var t=this.getSharedState("thickness"),e=this.getSharedState("color"),n=this.state.cursorPosition;
return{left:n.x,top:n.y,width:t,height:t,background:e.toRGBA(),marginLeft:t*-.5,marginTop:t*-.5}},e.prototype._updateContainerRect=function(){this._containerBoundingRect=this.refs.innerContainer.getBoundingClientRect()},e.prototype._getCursorPosition=function(t){var e=d.Utils.getEventPosition(t),n=this._containerBoundingRect;return e.subtract(n.left,n.top)},e.prototype._getContainerProps=function(){var e=t.prototype._getContainerProps.call(this);return e.onMouseDown=e.onTouchStart=this._onMouseDown,e},e.prototype._getInnerContainerProps=function(){var e=t.prototype._getInnerContainerProps.call(this);return delete e.onClick,e.onMouseEnter=this._onMouseEnter,e.onMouseLeave=this._onMouseLeave,e.onMouseMove=this._onMouseMoveOnCanvas,e},e.prototype._renderOverlayControls=function(){var t=this.state.cursorVisible?"is-visible":null;return d.ReactBEM.createElement("div",{bem:"$b:brushCanvasControls"},d.ReactBEM.createElement("div",{bem:"e:cursor",className:t,style:this._getCursorStyle()}))},e}(f["default"]);e["default"]=m,m.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(11),f=o(h),m=n(41),v=o(m),g=n(17),_=o(g),y=n(67),b=o(y),E=n(189),C=o(E),S=function(t){function e(){var n;(0,s["default"])(this,e);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var l=(0,u["default"])(this,t.call.apply(t,[this].concat(r)));return l._hasDoneButton=!1,l._brushOptions={thickness:l.getSharedState("thickness"),color:l.getSharedState("color").clone()},l._hasPresets=l.props.options.thicknessPresets&&l.props.options.thicknessPresets.length>0,l._hasSlider=!l._hasPresets,l._bindAll("_onThicknessUpdated","_onColorUpdated","_onOperationUpdated","_onOperationRemoved"),l.state={thicknessControlsEnabled:!1},l._events=(n={},(0,i["default"])(n,d.Constants.EVENTS.OPERATION_UPDATED,l._onOperationUpdated),(0,i["default"])(n,d.Constants.EVENTS.OPERATION_REMOVED,l._onOperationRemoved),n),l}return(0,p["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.context.editor;e.zoom.set("auto"),e.features.disable("zoom","drag")},e.prototype._onThicknessClick=function(t){this._onThicknessUpdated(t),this.forceUpdate()},e.prototype._onOperationRemoved=function(t){if(t===this.getSharedState("operation")&&!this._backButtonClicked){var e=this.context.editor,n=e.operations.getOrCreate("sprite"),o=n.createBrush();n.addSprite(o),this.setSharedState({operation:n,brush:o,operationExistedBefore:!1,initialOptions:{}}),e.render()}},e.prototype._onOperationUpdated=function(t){var e=this;t===this.getSharedState("operation")&&!function(){var n=e.getSharedState("brush");if(n){var o=t.getSprites().filter(function(t){return t.getId()===n.getId()})[0];e.setSharedState({brush:o})}t.setEnabled(!0),e.context.editor.render(function(){t.setEnabled(!1),e.context.editor.render()})}()},e.prototype._onThicknessUpdated=function(t){this.setSharedState({thickness:t}),this._brushOptions.thickness=t},e.prototype._onColorUpdated=function(t){this.setSharedState({color:t}),this._brushOptions.color=t.clone()},e.prototype._renderThicknessItems=function(){var t=this,e=this.props.options.thicknessPresets,n=Math.max.apply(null,e);return e.map(function(e){var o=t.getSharedState("thickness")===e;return d.ReactBEM.createElement(C["default"],{thickness:e,maxThickness:n,active:o,key:e,onClick:t._onThicknessClick.bind(t,e)})})},e.prototype.renderControls=function(){var t=this.context.editor,e=t.zoom.get(),n=[];if(this._hasSlider){var o=t.getFinalDimensions(),r=1,i=Math.round(o.clone().multiply(e).min()/2),a=this._brushOptions.thickness;n.push(d.ReactBEM.createElement("div",{bem:"e:cell m:slider"},d.ReactBEM.createElement(v["default"],{style:"large",minValue:r,maxValue:i,valueUnit:"px",middleDot:!1,label:this._t("controls.brush.thickness"),onChange:this._onThicknessUpdated,value:a})))}else this._hasPresets&&n.push(d.ReactBEM.createElement("div",{bem:"e:cell m:list"},d.ReactBEM.createElement(_["default"],null,d.ReactBEM.createElement("ul",{bem:"$e:list"},this._renderThicknessItems()))));return n.push(d.ReactBEM.createElement("div",{bem:"e:cell m:colorPicker"},d.ReactBEM.createElement(b["default"],{initialValue:this._brushOptions.color.clone(),onChange:this._onColorUpdated}))),n},e}(f["default"]);e["default"]=S,S.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(12),d=o(p),h=n(187),f=o(h),m=n(186),v=o(m),g=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onExit=function(){var t=this.context.editor,e=this.getSharedState("operation");e.setEnabled(!0),t.zoom.undo(),t.features.enable("zoom","drag"),t.render()},e.onEnter=function(t,e){var n=this.context.editor,o=n.getOutputDimensions(),r=n.operations.exists("sprite"),i=n.operations.getOrCreate("sprite"),a=i.createBrush(),s=i.serializeOptions();i.addSprite(a),n.zoom.set("auto",function(){i.setEnabled(!1),n.render()});var l=.05*o.min();e.thicknessPresets&&e.thicknessPresets.length>0&&(l=e.thicknessPresets[0]);var u=new c.Color(1,0,0,1),p=1;this.setSharedState({operationExistedBefore:r,operation:i,brush:a,initialOptions:s,thickness:l,color:u,hardness:p})},e.isAvailable=function(t){return t.isToolEnabled("brush")},e}(d["default"]);g.controlsComponent=f["default"],g.canvasControlsComponent=v["default"],g.identifier="brush",g.iconPath="controls/overview/brush.png",g.languageKey="controls.overview.brush",g.defaultOptions={thicknessPresets:[]},e["default"]=g},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._renderCanvas()},e.prototype.componentDidUpdate=function(){this._renderCanvas()},e.prototype._renderCanvas=function(){var t=this.refs.canvas,e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight;var n=this.props,o=n.maxThickness,r=n.thickness,i=t.width*(r/o),a=i/2;e.fillStyle="white",e.beginPath(),e.arc(t.width/2,t.height/2,a,0,2*Math.PI),e.fill()},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"$b:controls $e:list"},c.ReactBEM.createElement("li",{bem:"e:item",onClick:this.props.onClick},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",className:this.props.active?"is-active":null},c.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"canvas"}),c.ReactBEM.createElement("div",{bem:"e:label"},this.props.thickness)))))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=n(39),f=o(h),m=new c.Vector2(50,50),v=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._needsStyleFixes=!0,a._bindAll("_onCenterDragStart","_onCenterDrag"),a}return(0,u["default"])(e,t),e.prototype.fixStyles=function(){if(c.Utils.Browser.isIElte(11)){var t=this.context.editor,e=this.refs.container,n=t.getCanvasDimensions(!1),o=n.y;e.style.height=o+"px"}},e.prototype._onCenterDragStart=function(){var t=this.getSharedState("start"),e=this.getSharedState("end");this._initialValues={start:t.clone(),end:e.clone(),size:e.clone().subtract(t)}},e.prototype._onCenterDrag=function(t){var e=this.context.editor,n=this._initialValues,o=n.start,r=n.size,i=e.getOutputDimensions(),a=t.clone().divide(i),s=new c.Vector2(0,0),l=new c.Vector2(1,1).subtract(r),u=o.clone().add(a).clamp(s,l),p=u.clone().add(r);this.setSharedState({start:u,end:p})},e.prototype._onKnobDragStart=function(t){this._currentDragOption=t,this._initialValues={start:this.getSharedState("start").clone(),end:this.getSharedState("end").clone()}},e.prototype._onKnobDrag=function(t,e){var n=this.context.editor,o=n.getOutputDimensions(),r=this.getSharedState("ratio")||{ratio:"*"},i=r.ratio,a=this._initialValues.end.clone().subtract(this._initialValues.start).multiply(o),s=void 0;if("start"===t?(a.subtract(e),s=this._initialValues.end.clone().multiply(o)):"end"===t&&(a.add(e),s=new c.Vector2(1,1).subtract(this._initialValues.start).multiply(o)),a.x=Math.min(Math.max(m.x,a.x),s.x),"*"!==i&&(a.y=a.x/i),a.y=Math.min(Math.max(m.y,a.y),s.y),"*"!==i&&(a.x=a.y*i),"start"===t){var l=this._initialValues.end.clone().subtract(a.clone().divide(o));this.setSharedState({start:l})}else if("end"===t){var u=this._initialValues.start.clone().add(a.clone().divide(o));this.setSharedState({end:u})}},e.prototype._calculateDimensions=function(){var t=this.context.editor,e=this.getSharedState("start"),n=this.getSharedState("end");return n.clone().subtract(e).multiply(t.getInputDimensions()).round()},e.prototype._getAreaStyles=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=t.getCanvasDimensions(),o=this.getSharedState("start").clone().multiply(e).floor(),r=this.getSharedState("end").clone().multiply(e).ceil(),i=r.clone().subtract(o),a=n.clone().subtract(e).divide(2).floor(),s=t.getPadding();return o.add(a).add(0,s[0]),{topLeft:this._getDimensionsStyles(o.x,o.y),topCenter:this._getDimensionsStyles(i.x,o.y),centerLeft:this._getDimensionsStyles(o.x,i.y),center:this._getDimensionsStyles(i.x,i.y)}},e.prototype._getDimensionsStyles=function(t,e){return{width:Math.max(1,t),height:Math.max(1,e)}},e.prototype.renderWithBEM=function(){var t=this._getAreaStyles();return c.ReactBEM.createElement("div",{bem:"b:canvasControls e:container m:full",ref:"container"},c.ReactBEM.createElement("div",{bem:"$b:cropCanvasControls"},c.ReactBEM.createElement("div",{bem:"e:row"},c.ReactBEM.createElement("div",{bem:"e:cell m:dark",style:t.topLeft}," "),c.ReactBEM.createElement("div",{bem:"e:cell m:dark",style:t.topCenter}," "),c.ReactBEM.createElement("div",{bem:"e:cell m:dark"})),c.ReactBEM.createElement("div",{bem:"e:row"},c.ReactBEM.createElement("div",{bem:"e:cell m:dark",style:t.centerLeft}," "),c.ReactBEM.createElement(d["default"],{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},c.ReactBEM.createElement("div",{bem:"e:cell m:bordered",style:t.center},c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart.bind(this,"start"),onDrag:this._onKnobDrag.bind(this,"start")},c.ReactBEM.createElement("div",{bem:"e:knob m:topLeft $b:knob"},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/knobs/resize-diagonal-down.png",!0)}))),c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart.bind(this,"end"),onDrag:this._onKnobDrag.bind(this,"end")},c.ReactBEM.createElement("div",{bem:"e:knob m:bottomRight $b:knob"},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/knobs/resize-diagonal-down.png",!0)}))))),c.ReactBEM.createElement("div",{bem:"e:cell m:dark"}," ")),c.ReactBEM.createElement("div",{bem:"e:row"},c.ReactBEM.createElement("div",{bem:"e:cell m:dark"}," "),c.ReactBEM.createElement("div",{bem:"e:cell m:dark"}," "),c.ReactBEM.createElement("div",{bem:"e:cell m:dark"}," "))))},e}(f["default"]);e["default"]=v,v.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(11),d=o(p),h=n(17),f=o(h),m=n(54),v=o(m),g=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._hasDoneButton=!0,a._bindAll("_selectRatio","_onRotationChange"),a.state={ratio:null},a._initRatios(),a.getSharedState("operationExistedBefore")||a._selectInitialRatio(!0),a}return(0,u["default"])(e,t),e.prototype._initRatios=function(){var t=this.props.options,e=t.ratios,n=t.replaceRatios,o=t.selectableRatios;e=e||[],this._ratios=c.Constants.DEFAULTS.CROP_RATIOS,n?this._ratios=e:this._ratios=this._ratios.concat(e),o&&o.length&&(this._ratios=c.Utils.select(this._ratios,o,function(t){return t.name}))},e.prototype.shouldSharedComponentUpdate=function(t,e){return t.ratio!==e.ratio},e.prototype._onRotationChange=function(t){var e=this.context.editor;t=t*Math.PI/180,e.setRotation(t),this._updateSpriteScale(),e.render(),this.setSharedState({rotation:t})},e.prototype._updateSpriteScale=function(){var t=this.context.editor,e=this._getRotatedSpriteDimensions(),n=t.getOutputDimensions(!1),o=n.clone().multiply(.5);o.subtract(e.clone().divide(2)),o.abs();var r=1;r=o.y>o.x?2*o.y/n.y+1:2*o.x/n.x+1,t.setSpriteScale(r)},e.prototype._getRotatedSpriteDimensions=function(){var t=this.context.editor,e=t.getRotation(),n=t.getOutputDimensions(!1);return new c.Vector2(Math.abs(n.x*Math.cos(e))+Math.abs(n.y*Math.sin(e)),Math.abs(n.x*Math.sin(e))+Math.abs(n.y*Math.cos(e)))},e.prototype._onBackClick=function(e){var n=this.context.editor,o=this.getSharedState("operation");this.getSharedState("cropOperationExistedBefore")?(o.set(this.getSharedState("initialCropOptions")),o.setEnabled(!0,!1)):n.operations.remove(o),n.setPadding(!1),n.setRotation(0),n.setSpriteScale(1),n.features.enable("zoom","drag"),n.zoom.undo(),t.prototype._onBackClick.call(this,e)},e.prototype._onDoneClick=function(e){var n=this.context.editor,o={rotation:n.getRotation(),scale:n.getSpriteScale(),start:this.getSharedState("start").clone(),end:this.getSharedState("end").clone(),enabled:!0},r=n.operations.get("crop"),i=n.operations.get("sprite"),a=n.operations.get("orientation");i&&i.crop(r,o),r.set(o),n.setPadding(!1),n.setRotation(0),n.setSpriteScale(1);var s=[],l=this.getSharedState("initialCropOptions"),u=this.getSharedState("cropOperationExistedBefore");r.optionsEqual(l)?u||n.operations.remove(r):s.push({operation:r,options:l,existent:u,undo:function(t,e){n.broadcastCrop(t,e)}});var c=this.getSharedState("initialOrientationOptions"),p=this.getSharedState("orientationOperationExistedBefore");a.optionsEqual(c)?p||n.operations.remove(a):s.push({operation:a,options:c,existent:p,undo:function(t,e){t.getRotation()!==e.rotation&&n.broadcastRotate(e.rotation-t.getRotation());var o=e.rotation,r=90===o||270===o;t.getFlipVertically()!==e.flipVertically?n.broadcastFlip(r?"horizontal":"vertical"):t.getFlipHorizontally()!==e.flipHorizontally&&n.broadcastFlip(r?"vertical":"horizontal")}}),s.length&&n.history.add(s),n.features.enable("zoom","drag"),n.zoom.set("auto"),t.prototype._onDoneClick.call(this,e)},e.prototype._selectInitialRatio=function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0],e=this.getSharedState("operation"),n=null,o=e._ratio;if(o){var r=this._ratios.filter(function(t){return t===o});n=r[0]}if(!n){var i=this._ratios.filter(function(t){return t.selected});n=i.pop()}return n||(n=this._ratios[0]),this._selectRatio(n,t)},e.prototype._selectRatio=function(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],n=this.getSharedState("operation");e&&this._setDefaultOptionsForRatio(t),n._ratio=t,this.setSharedState({ratio:t})},e.prototype._setDefaultOptionsForRatio=function(t){var e=t.ratio,n=(t.name,this.context.editor),o=new c.Vector2,r=new c.Vector2;if("*"===e)o=new c.Vector2(0,0),r=new c.Vector2(1,1);else{var i=n.getOutputDimensions(),a=i.x/i.y;if(a<=e){var s=1/i.y*(i.x/e);o.set(0,(1-s)/2),r.set(1,1-o.y)}else{var l=1/i.x*(e*i.y);o.set((1-l)/2,0),r.set(1-o.x,1)}}this.setSharedState({start:o,end:r})},e.prototype.renderOverlayControls=function(){var t=180*this.getSharedState("rotation")/Math.PI;return c.ReactBEM.createElement(v["default"],{value:t,minValue:-45,middleDot:!0,maxValue:45,valueUnit:"°",label:this._t("controls.crop.rotation"),onChange:this._onRotationChange})},e.prototype.renderControls=function(){var t=this,e=this._ratios.map(function(e){return c.ReactBEM.createElement("li",{bem:"e:item",key:e.name},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",className:t.getSharedState("ratio")===e?"is-active":null,onClick:t._selectRatio.bind(t,e)},c.ReactBEM.createElement("img",{bem:"e:icon",src:t._getAssetPath("controls/crop/"+e.name+".png",!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},t._t("controls.crop."+e.name)))))});return c.ReactBEM.createElement("div",{bem:"e:cell m:list"},c.ReactBEM.createElement(f["default"],null,c.ReactBEM.createElement("ul",{bem:"$e:list"},e)))},e}(d["default"]);e["default"]=g,g.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(55),f=o(h),m=function(t){function e(){return(0,s["default"])(this,e),(0,u["default"])(this,t.apply(this,arguments))}return(0,p["default"])(e,t),e.prototype._onRotateClick=function(t){var e=void 0;"cw"===t?e=90:"ccw"===t&&(e=-90);var n=this.context.editor,o=this.getSharedState("orientationOperation"),r=(o.getRotation()+e)%360,i=this.getSharedState("start"),a=this.getSharedState("end"),s=i.clone();"cw"===t?(i.set(1-a.y,s.x),a.set(1-s.y,a.x)):"ccw"===t&&(i.set(s.y,1-a.x),a.set(a.y,1-s.x)),o.set({rotation:r}),this.setSharedState({orientationRotation:r,start:i,end:a}),n.broadcastRotate(e),n.zoom.set("auto")},e.prototype._onFlipClick=function(t){var e,n=this.context.editor,o=this.getSharedState("orientationOperation"),r=!this.getSharedState("flip"+t),a=this.getSharedState("rotation")*-1;this.setSharedState((e={},(0,i["default"])(e,"flip"+t,r),(0,i["default"])(e,"rotation",a),e)),n.setRotation(a),o.flip(t);var s=this.getSharedState("start"),l=this.getSharedState("end"),u=s.clone();"horizontal"===t?(s.set(1-l.x,s.y),l.set(1-u.x,l.y)):"vertical"===t&&(s.set(s.x,1-l.y),l.set(l.x,1-u.y)),this.setSharedState({start:s,end:l}),n.broadcastFlip(t),n.render()},e.prototype.shouldSharedComponentUpdate=function(t,e){return!1},e.prototype.renderContent=function(){return d.ReactBEM.createElement("bem",{specifier:"$b:topBar"},d.ReactBEM.createElement("div",{bem:"$e:iconButton",onClick:this._onFlipClick.bind(this,"vertical")},d.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/crop/flip-v.png",!0)})),d.ReactBEM.createElement("div",{bem:"$e:iconButton",onClick:this._onFlipClick.bind(this,"horizontal")},d.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/crop/flip-h.png",!0)})),d.ReactBEM.createElement("div",{bem:"e:space"}),d.ReactBEM.createElement("div",{bem:"$e:iconButton",onClick:this._onRotateClick.bind(this,"ccw")},d.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/crop/rotate-ccw.png",!0)})),d.ReactBEM.createElement("div",{bem:"$e:iconButton",onClick:this._onRotateClick.bind(this,"cw")},d.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/crop/rotate-cw.png",!0)})))},e}(f["default"]);e["default"]=m,m.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(12),d=o(p),h=n(191),f=o(h),m=n(190),v=o(m),g=n(192),_=o(g),y=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onEnter=function(t){var e=this.context.editor,n=e.operations.exists("crop"),o=e.operations.getOrCreate("crop");o.setEnabled(!1,!1);var r=e.operations.exists("orientation"),i=e.operations.getOrCreate("orientation"),a={end:new c.Vector2(1,1),rotation:0,start:new c.Vector2(0,0),scale:1},s=a;n&&(s=o.serializeOptions(),delete s.enabled),e.broadcastCrop(o,a),o.set(a,n);var l=i.serializeOptions();delete l.enabled,e.setSpriteScale(s.scale),e.setRotation(s.rotation),e.setPadding([10,0,68,0]),e.zoom.set("auto",function(){e.features.disable("zoom","drag")},!1),this.setSharedState({initialCropOptions:s,initialOrientationOptions:l,operation:o,orientationOperation:i,orientationOperationExistedBefore:r,cropOperationExistedBefore:n,start:c.Vector2.fromObject(s.start),end:c.Vector2.fromObject(s.end),rotation:s.rotation,orientationRotation:i.getRotation(),flipVertically:i.getFlipVertically(),flipHorizontally:i.getFlipHorizontally()})},e.isAvailable=function(t){return t.isToolEnabled("crop")},e}(d["default"]);y.topBarControlsComponent=_["default"],y.controlsComponent=f["default"],y.canvasControlsComponent=v["default"],y.identifier="crop",y.iconPath="controls/overview/crop.png",y.languageKey="controls.overview.crop",y.defaultOptions={},e["default"]=y},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(11),f=o(h),m=n(17),v=o(m),g=n(115),_=o(g),y=n(54),b=o(y),E=n(121),C=o(E),S=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onItemClick","_onOperationUpdated","_onSliderValueChange","_onCategoryChange"),a._operation=a.getSharedState("operation"),a._events=(0,i["default"])({},d.Constants.EVENTS.OPERATION_UPDATED,a._onOperationUpdated),a._initFilterManager(),a.state={category:"all"},a}return(0,p["default"])(e,t),e.prototype._initFilterManager=function(){this._filterManager=new C["default"](this.props.options)},e.prototype._onSliderValueChange=function(t){this._operation.setIntensity(t/100);var e=this.context.editor;e.render()},e.prototype._onCategoryChange=function(t){var e=this;this.setState({category:t.name},function(){e.refs.scrollbar.update()})},e.prototype._onOperationUpdated=function(t){t===this._operation&&this.forceUpdate()},e.prototype._onItemClick=function(t,e){this._operation.set({filter:new t({intensity:1}),intensity:1});var n=this.context.editor;n.render(),this.forceUpdate()},e.prototype._onBackClick=function(e){var n=this.getSharedState("initialOptions"),o=this._operation.getFilter(),r=this._operation.getIntensity();if(o!==n.filter||r!==n.intensity){var i=this.context.editor;i.history.add(this._operation,n,this.getSharedState("operationExistedBefore"))}if(o.isIdentity){var a=this.context.editor;a.operations.remove(this._operation)}t.prototype._onBackClick.call(this,e)},e.prototype.renderOverlayControls=function(){var t=this._operation.getFilter();if(t.isIdentity)return null;var e=this._operation.getIntensity();return d.ReactBEM.createElement(b["default"],{minValue:0,maxValue:100,value:100*e,valueUnit:"%",positiveValuePrefix:"+",label:this._t("controls.filters.intensity"),onChange:this._onSliderValueChange})},e.prototype._renderListItems=function(){var t=this,e=this._operation.getFilter(),n=this._filterManager.getFiltersForCategory(this.state.category);return[d.SDK.Filters.IdentityFilter].concat(n).map(function(n){var o=n.identifier;return d.ReactBEM.createElement("li",{bem:"e:item",key:o,onClick:t._onItemClick.bind(t,n)},d.ReactBEM.createElement("bem",{specifier:"$b:controls"},d.ReactBEM.createElement("div",{bem:"$e:button m:withInlineLabel"},d.ReactBEM.createElement("img",{bem:"e:icon",src:t._getAssetPath("controls/filters/"+o+".png",!0)}),d.ReactBEM.createElement("div",{bem:"$e:inlineLabel",className:e instanceof n?"is-active":null},d.ReactBEM.createElement("div",{bem:"e:label"},n.displayName)))))})},e.prototype._renderCategoryDropdown=function(){var t=this,e=this._filterManager.getCategories(),n=!this.props.options.hideCategories&&e.length>1;if(!n)return null;var o=e.map(function(e){return{name:e.name,label:t._t("controls.filters.categories."+e.name),icon:t._getAssetPath("controls/filters/categories/"+e.name+".png",!0)}}),r={name:this.state.category,label:this._t("controls.filters.categories."+this.state.category),icon:this._getAssetPath("controls/filters/categories/"+this.state.category+".png",!0)};return d.ReactBEM.createElement("div",{bem:"e:cell m:categoryDropdown"},d.ReactBEM.createElement(_["default"],{items:o,selectedItem:r,onChange:this._onCategoryChange}))},e.prototype.renderControls=function(){var t=this._renderListItems(),e=this._renderCategoryDropdown();return[e,d.ReactBEM.createElement("div",{bem:"e:cell m:list"},d.ReactBEM.createElement(v["default"],{ref:"scrollbar"},d.ReactBEM.createElement("ul",{bem:"$e:list"},t)))]},e}(f["default"]);e["default"]=S,S.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(12),p=o(c),d=n(194),h=o(d),f=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onEnter=function(t){var e=this.context.editor,n=e.operations.exists("filter"),o=e.operations.getOrCreate("filter"),r={filter:o.getFilter(),intensity:o.getIntensity()};this.setSharedState({operation:o,operationExistedBefore:n,initialOptions:r})},e.isAvailable=function(t){return t.isToolEnabled(this.identifier)},e}(p["default"]);f.controlsComponent=h["default"],f.identifier="filter",f.iconPath="controls/overview/filters.png",f.languageKey="controls.overview.filters",f.defaultOptions={categories:[],replaceCategories:!1,selectableFilters:null,hideCategories:!1},e["default"]=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(11),d=o(p),h=n(17),f=o(h),m=n(201),v=o(m),g=n(198),_=o(g),y=[v["default"],_["default"]],b=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._onButtonClick=function(t,e){this.context.editorScreen.switchToControls(t)},e.prototype._renderListItems=function(){var t=this;return y.filter(function(e){return e.isAvailable(t.context.editor)}).map(function(e){return c.ReactBEM.createElement("li",{bem:"e:item",key:e.identifier},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",onClick:t._onButtonClick.bind(t,e)},c.ReactBEM.createElement("img",{bem:"e:icon",src:t._getAssetPath(e.iconPath,!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},t._t(e.languageKey)))))})},e.prototype.renderControls=function(){var t=this._renderListItems();return c.ReactBEM.createElement("div",{bem:"e:cell m:list"},c.ReactBEM.createElement(f["default"],null,c.ReactBEM.createElement("ul",{bem:"$e:list"},t)))},e}(d["default"]);e["default"]=b,b.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(12),p=o(c),d=n(196),h=o(d),f=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.isAvailable=function(t){return t.isToolEnabled("radial-focus")||t.isToolEnabled("linear-focus")},e.onExit=function(){var t=this.context.editor;t.features.enable("zoom","drag")},e}(p["default"]);f.controlsComponent=h["default"],f.identifier="focus",f.iconPath="controls/overview/focus.png",f.languageKey="controls.overview.focus",f.defaultOptions={},e["default"]=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(12),d=o(p),h=n(200),f=o(h),m=n(199),v=o(m),g=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onEnter=function(t){var e=this.context.editor,n=e.operations.exists("linear-focus"),o=new c.Vector2(.49,.5),r=new c.Vector2(.51,.5),i=e.operations.getOrCreate("linear-focus",{start:o,end:r}),a=i.getInputDimensions(),s=i.getStart().clone(),l=i.getEnd().clone(),u=i.getSize(),p=i.getGradientSize(),d={start:s,end:l,size:u,gradientSize:p,blurRadius:i.getBlurRadius()};this.setSharedState({operation:i,operationExistedBefore:n,initialOptions:d,inputDimensions:a})},e.isAvailable=function(t){return t.isToolEnabled("linear-focus")},e}(d["default"]);g.controlsComponent=f["default"],g.canvasControlsComponent=v["default"],g.identifier="linear-focus",g.iconPath="controls/focus/linear.png",g.languageKey="controls.focus.linear",g.defaultOptions={},e["default"]=g},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=n(39),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag"),a.state={areaPosition:new c.Vector2,areaDimensions:new c.Vector2,knobPosition:new c.Vector2},a._operation=a.getSharedState("operation"),a}return(0,u["default"])(e,t),e.prototype._onCanvasZoomDone=function(){this._setStylesFromOptions()},e.prototype.sharedStateDidChange=function(t){t.operation&&(this._operation=t.operation),this._setStylesFromOptions()},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this);var n=this.context.editor;n.zoom.set("auto",function(){n.features.disable("zoom","drag"),e._setStylesFromOptions()})},e.prototype._onCenterDragStart=function(){this._initialStart=this._operation.getStart(),this._initialEnd=this._operation.getEnd(),this._initialDist=this._initialEnd.clone().subtract(this._initialStart)},e.prototype._onCenterDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=t.clone().divide(n),r=this._initialStart.clone().add(o).clamp(new c.Vector2(0,0),new c.Vector2(1,1).subtract(this._initialDist)),i=r.clone().add(this._initialDist);this._operation.set({start:r,end:i}),e.render(),this._setStylesFromOptions(),this.forceUpdate()},e.prototype._onKnobDragStart=function(t){this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onKnobDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this._initialKnobPosition.clone().add(t).clamp(new c.Vector2(0,0),n),r=o.clone().subtract(this.state.areaPosition),i=2*r.len(),a=this.state.areaPosition.clone().add(-r.y,r.x).divide(n),s=this.state.areaPosition.clone().add(r.y,-r.x).divide(n),l=s.clone().subtract(a).len(),u=l;this._operation.set({start:a,end:s,size:l,gradientSize:u}),this.setState({knobPosition:o,areaDimensions:new c.Vector2(this.state.areaDimensions.x,i)}),e.render()},e.prototype._getAreaStyle=function(){var t=this.state.knobPosition.clone().subtract(this.state.areaPosition),e=Math.atan2(t.x,t.y)*(180/Math.PI),n="rotate("+(-e).toFixed(2)+"deg)";return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:this.state.areaDimensions.x*-.5,marginTop:this.state.areaDimensions.y*-.5,transform:n,MozTransform:n,msTransform:n,WebkitTransform:n}},e.prototype._getKnobStyle=function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}},e.prototype._setStylesFromOptions=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this._operation.getStart().clone().multiply(e),o=this._operation.getEnd().clone().multiply(e),r=this._operation.getSize()*e.min(),i=o.clone().subtract(n),a=n.clone().add(i.clone().divide(2)),s=new c.Vector2(2*e.len(),r),l=i.len(),u=i.clone().divide(l).divide(2);
this.setState({areaDimensions:s,areaPosition:a.clone(),knobPosition:a.clone().add(-r*u.y,r*u.x)})},e.prototype._getContainerStyle=function(){var t=this.context.editor.getSDK().getSprite().getBounds(),e=t.x,n=t.y,o=t.width,r=t.height;return{left:e,top:n,width:o,height:r}},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"b:canvasControls e:container m:full",ref:"container",style:this._getContainerStyle()},c.ReactBEM.createElement("div",{bem:"$b:linearFocusCanvasControls"},c.ReactBEM.createElement(d["default"],{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},c.ReactBEM.createElement("div",{bem:"e:area",style:this._getAreaStyle()})),c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.ReactBEM.createElement("div",{bem:"e:knob $b:knob",style:this._getKnobStyle()}))))},e}(f["default"]);e["default"]=m,m.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(11),f=o(h),m=n(41),v=o(m),g=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return a._hasDoneButton=!0,a._operation=a.getSharedState("operation"),a._bindAll("_onBackClick","_onDoneClick","_onBlurRadiusChange","_onOperationRemoved"),a._events=(0,i["default"])({},d.Constants.EVENTS.OPERATION_REMOVED,a._onOperationRemoved),a}return(0,p["default"])(e,t),e.prototype._onOperationRemoved=function(t){if(t===this._operation&&!this._backButtonClicked){var e=this.context.editor,n=e.operations.getOrCreate("linear-focus");this._operation=n,this.setSharedState({operation:n,operationExistedBefore:!1,initialOptions:{}})}},e.prototype._onBackClick=function(e){this._backButtonClicked=!0;var n=this.context.editor;this.getSharedState("operationExistedBefore")?this._operation.set(this.getSharedState("initialOptions")):n.operations.remove(this._operation),n.zoom.undo(),n.features.enable("zoom","drag"),t.prototype._onBackClick.call(this,e)},e.prototype._onDoneClick=function(e){var n=this.context.editor,o=this.getSharedState("operationExistedBefore"),r=this.getSharedState("initialOptions"),i=!this._operation.optionsEqual(r);!i&&o||n.history.add(this._operation,this.getSharedState("initialOptions"),this.getSharedState("operationExistedBefore")),n.zoom.undo(),n.features.enable("zoom","drag"),t.prototype._onDoneClick.call(this,e)},e.prototype._onBlurRadiusChange=function(t){var e=this.getSharedState("inputDimensions");this._operation.setBlurRadius(t/e.min());var n=this.context.editor;n.render()},e.prototype.renderControls=function(){var t=this.getSharedState("inputDimensions"),e=t.min(),n=this._operation.getBlurRadius()*e;return d.ReactBEM.createElement("div",{bem:"e:cell m:slider"},d.ReactBEM.createElement(v["default"],{style:"large",minValue:0,maxValue:Math.min(180,Math.round(.1*e)),valueUnit:"px",middleDot:!1,label:this._t("controls.focus.blurRadius"),onChange:this._onBlurRadiusChange,value:n}))},e}(f["default"]);e["default"]=g,g.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(12),p=o(c),d=n(203),h=o(d),f=n(202),m=o(f),v=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onEnter=function(t){var e=this.context.editor,n=e.operations.exists("radial-focus"),o=e.operations.getOrCreate("radial-focus"),r=o.getOptions(),i=r.position,a=r.radius,s=r.gradientRadius,l=r.blurRadius,u={position:i,radius:a,gradientRadius:s,blurRadius:l},c=o.getInputDimensions();this.setSharedState({operation:o,operationExistedBefore:n,initialOptions:u,inputDimensions:c})},e.isAvailable=function(t){return t.isToolEnabled("radial-focus")},e}(p["default"]);v.controlsComponent=h["default"],v.canvasControlsComponent=m["default"],v.identifier="radial-focus",v.iconPath="controls/focus/radial.png",v.languageKey="controls.focus.radial",v.defaultOptions={},e["default"]=v},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=n(39),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag"),a.state={areaPosition:new c.Vector2,areaDimensions:new c.Vector2,knobPosition:new c.Vector2},a._knobChangedManually=!1,a._operation=a.getSharedState("operation"),a}return(0,u["default"])(e,t),e.prototype._onCanvasZoomDone=function(){this._setStylesFromOptions()},e.prototype.sharedStateDidChange=function(t){t.operation&&(this._operation=t.operation),this._setStylesFromOptions()},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this);var n=this.context.editor;n.zoom.set("auto",function(){n.features.disable("zoom","drag"),e._setStylesFromOptions()})},e.prototype._onCenterDragStart=function(){this._initialPosition=this._operation.getPosition(),this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onCenterDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=t.clone().divide(n),r=this._initialPosition.clone().add(o),i=this._initialKnobPosition.clone().add(t);this._operation.set({position:r}),this.state.knobPosition=i,e.render(),this._setStylesFromOptions()},e.prototype._onKnobDragStart=function(t){this._knobChangedManually=!0,this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onKnobDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this._initialKnobPosition.clone().add(t).clamp(new c.Vector2(0,0),n),r=this._operation.getPosition().clone().multiply(n),i=o.clone().subtract(r).abs().len(),a=i/2;this.setState({knobPosition:o,areaDimensions:new c.Vector2(2*i,2*i)}),this._operation.set({radius:i/n.min(),gradientRadius:a/n.min()}),e.render()},e.prototype._getAreaStyle=function(){return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:this.state.areaDimensions.x*-.5,marginTop:this.state.areaDimensions.y*-.5}},e.prototype._getKnobStyle=function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}},e.prototype._setStylesFromOptions=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this._operation.getPosition().clone().multiply(e),o=this._operation.getRadius()*e.min(),r=2*o,i=new c.Vector2(r,r),a={areaDimensions:i,areaPosition:n};this._knobChangedManually||(a.knobPosition=n.clone().add(o,0)),this.setState(a)},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=e.x,o=e.y,r=e.width,i=e.height;return{left:n,top:o,width:r,height:i}},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"b:canvasControls e:container m:full",ref:"container",style:this._getContainerStyle()},c.ReactBEM.createElement("div",{bem:"$b:radialFocusCanvasControls"},c.ReactBEM.createElement(d["default"],{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},c.ReactBEM.createElement("div",{bem:"e:area",style:this._getAreaStyle()})),c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.ReactBEM.createElement("div",{bem:"e:knob $b:knob",style:this._getKnobStyle()}))))},e}(f["default"]);e["default"]=m,m.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(11),f=o(h),m=n(41),v=o(m),g=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return a._hasDoneButton=!0,a._operation=a.getSharedState("operation"),a._bindAll("_onBackClick","_onDoneClick","_onBlurRadiusChange","_onOperationRemoved"),a._events=(0,i["default"])({},d.Constants.EVENTS.OPERATION_REMOVED,a._onOperationRemoved),a}return(0,p["default"])(e,t),e.prototype._onOperationRemoved=function(t){if(t===this._operation&&!this._backButtonClicked){var e=this.context.editor,n=e.operations.getOrCreate("radial-focus");this._operation=n,this.setSharedState({operation:n,operationExistedBefore:!1,initialOptions:{}})}},e.prototype._onBackClick=function(e){this._backButtonClicked=!0;var n=this.context.editor;this.getSharedState("operationExistedBefore")?this._operation.set(this.getSharedState("initialOptions")):n.operations.remove(this._operation),n.render(),n.zoom.undo(),n.features.enable("zoom","drag"),t.prototype._onBackClick.call(this,e)},e.prototype._onDoneClick=function(e){var n=this.context.editor,o=this.getSharedState("operationExistedBefore"),r=this.getSharedState("initialOptions"),i=!this._operation.optionsEqual(r);!i&&o||n.history.add(this._operation,this.getSharedState("initialOptions"),this.getSharedState("operationExistedBefore")),n.zoom.undo(),n.features.enable("zoom","drag"),t.prototype._onDoneClick.call(this,e)},e.prototype._onBlurRadiusChange=function(t){var e=this.getSharedState("inputDimensions");this._operation.setBlurRadius(t/e.min());var n=this.context.editor;n.render()},e.prototype.renderControls=function(){var t=this.getSharedState("inputDimensions"),e=t.min(),n=this._operation.getBlurRadius()*e;return d.ReactBEM.createElement("div",{bem:"e:cell m:slider"},d.ReactBEM.createElement(v["default"],{style:"large",minValue:0,maxValue:Math.min(180,Math.round(.1*e)),valueUnit:"px",middleDot:!1,label:this._t("controls.focus.blurRadius"),onChange:this._onBlurRadiusChange,value:n}))},e}(f["default"]);e["default"]=g,g.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(183);Object.defineProperty(e,"adjustments",{enumerable:!0,get:function(){return o(r)["default"]}});var i=n(193);Object.defineProperty(e,"crop",{enumerable:!0,get:function(){return o(i)["default"]}});var a=n(195);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return o(a)["default"]}});var s=n(197);Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return o(s)["default"]}});var l=n(185);Object.defineProperty(e,"border",{enumerable:!0,get:function(){return o(l)["default"]}});var u=n(216);Object.defineProperty(e,"sticker",{enumerable:!0,get:function(){return o(u)["default"]}});var c=n(221);Object.defineProperty(e,"text",{enumerable:!0,get:function(){return o(c)["default"]}});var p=n(188);Object.defineProperty(e,"brush",{enumerable:!0,get:function(){return o(p)["default"]}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return i.state={value:i.props.value||0,sliderPosition:0,foregroundLeft:0,foregroundWidth:0},i}return(0,p["default"])(e,t),e.prototype.componentDidMount=function(){this._setValue(this.state.value,!1)},e.prototype.componentWillReceiveProps=function(t){t.value!==this.state.value&&this._setValue(t.value,!1)},e.prototype._getKnobStyle=function(){return{left:this.state.sliderPosition}},e.prototype._getForegroundStyle=function(){return{left:this.state.foregroundLeft,width:this.state.foregroundWidth}},e.prototype._displayMiddleDot=function(){return this.props.middleDot!==!1},e.prototype._setValue=function(t){arguments.length<=1||void 0===arguments[1]||arguments[1];t=Math.round(t);var e=this.props,n=e.minValue,o=e.maxValue,r=(t-n)/(o-n),i=this.refs.bar,a=i.offsetWidth,s=a*r,l=r*a,u=0;this._displayMiddleDot()&&(l=Math.abs(r-.5)*a,u=r<.5?.5*a-l:"50%"),this.setState({value:t,sliderPosition:s,foregroundWidth:l,foregroundLeft:u})},e.prototype.renderWithBEM=function(){var t={style:this._getForegroundStyle()};return d.ReactBEM.createElement("div",{bem:"$b:miniSlider"},d.ReactBEM.createElement("div",{bem:"$e:bar",ref:"bar"},d.ReactBEM.createElement("div",{bem:"$e:background"}),d.ReactBEM.createElement("div",(0,i["default"])({bem:"$e:foreground"},t)),d.ReactBEM.createElement("div",{bem:"e:knob",style:this._getKnobStyle()})))},e}(d.BaseComponent);e["default"]=h,h.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(12),p=o(c),d=n(210),h=o(d),f=n(116),m=o(f),v=n(207),g=o(v),_=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e}(p["default"]);_.topBarControlsComponent=h["default"],_.controlsComponent=m["default"],_.canvasControlsComponent=g["default"],e["default"]=_},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(39),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onClick"),a}return(0,u["default"])(e,t),e.prototype._onClick=function(t){this._performHitTest(c.Utils.getEventPosition(t))},e.prototype._getContainerStyle=function(){if(!this.context.editor.isReady())return{left:0,top:0,width:1,height:1};var t=this.context.editor.getSDK().getSprite().getBounds(),e=t.x,n=t.y,o=t.width,r=t.height;return{left:e,top:n,width:o,height:r}},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:canvasControls e:container m:full",ref:"container"},c.ReactBEM.createElement("div",{bem:"$b:canvasControls e:innerContainer",ref:"innerContainer",style:this._getContainerStyle(),onClick:this._onClick,onTouchStart:this._onClick}))},e}(d["default"]);e["default"]=h,h.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(18),d=o(p),h=n(72),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onButtonClick"),a}return(0,u["default"])(e,t),e.prototype._onButtonClick=function(){var t=this,e=this.context,n=e.options,o=e.editor,r=e.editorScreen,i=n.editor["export"];r.switchToControls("home",null,function(){var e=d["default"].instance.displayLoading(t._t("loading.exporting"));setTimeout(function(){o["export"](i.download).then(function(){e.close()})},100)})},e.prototype.renderWithBEM=function(){var t=this.context.options;return t.editor["export"].showButton?c.ReactBEM.createElement(f["default"],{style:"blue",label:this._t("editor.export"),icon:"editor/export.png",onClick:this._onButtonClick}):null},e}(c.BaseComponent);e["default"]=m,m.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(72),d=o(p),h=n(71),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onNewFile","_onButtonClick"),a}return(0,u["default"])(e,t),e.prototype._onNewFile=function(t){var e=this.context.editor;e.reset(),e.setImage(t),e.zoom.set("auto")},e.prototype._onButtonClick=function(){var t=this.context.options,e=t.enableWebcam===!1||c.Utils.isMobile(),n=!!t.photoRoll.provider;e&&!n?this.refs.upload.open():n?this.props.app.switchToScreen("photoRoll"):this.props.app.switchToScreen("splash")},e.prototype.renderWithBEM=function(){var t=this.context.options,e=null;return e=t.photoRoll.provider?this._t("editor.backgroundImage"):this._t("editor.new"),c.ReactBEM.createElement("div",null,c.ReactBEM.createElement(f["default"],{onNewFile:this._onNewFile,ref:"upload"}),c.ReactBEM.createElement(d["default"],{label:e,icon:"editor/new.png",onClick:this._onButtonClick}))},e}(c.BaseComponent);e["default"]=m,m.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(55),d=o(p),h=n(209),f=o(h),m=n(208),v=o(m),g=n(211),_=o(g),y=n(212),b=o(y),E=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderContent=function(){var t=null;this.context.options.enableUpload&&(t=c.ReactBEM.createElement(f["default"],{app:this.props.app}));var e=null;return this.context.options.editor.enableZoom&&(e=c.ReactBEM.createElement(b["default"],null)),c.ReactBEM.createElement("bem",{specifier:"$b:topBar"},c.ReactBEM.createElement("div",{bem:"e:left"},t),c.ReactBEM.createElement("div",{bem:"e:right"},c.ReactBEM.createElement(_["default"],null),c.ReactBEM.createElement(v["default"],null)),e)},e}(d["default"]);e["default"]=E,E.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(72),f=o(h),m=function(t){function e(){var n;(0,s["default"])(this,e);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var l=(0,u["default"])(this,t.call.apply(t,[this].concat(r)));return l._bindAll("_onButtonClick","_onHistoryUpdated","_onFeaturesUpdated"),l._events=(n={},(0,i["default"])(n,d.Constants.EVENTS.HISTORY_UPDATED,l._onHistoryUpdated),(0,i["default"])(n,d.Constants.EVENTS.FEATURES_UPDATED,l._onFeaturesUpdated),n),l}return(0,p["default"])(e,t),e.prototype._onFeaturesUpdated=function(){this.forceUpdate()},e.prototype._onHistoryUpdated=function(){this.forceUpdate()},e.prototype._onButtonClick=function(){var t=this.context.editor;t.history.undo()},e.prototype.renderWithBEM=function(){var t=this.context.editor;return t.history.isAvailable()?d.ReactBEM.createElement(f["default"],{label:this._t("editor.undo"),icon:"editor/undo.png",onClick:this._onButtonClick}):null},e}(d.BaseComponent);e["default"]=m,m.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=function(t){function e(){var n;(0,s["default"])(this,e);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var l=(0,u["default"])(this,t.call.apply(t,[this].concat(r)));return l._bindAll("_onZoomOutClick","_onZoomInClick","_onZoomDone","_onFeaturesUpdated"),l._events=(n={},(0,i["default"])(n,d.Constants.EVENTS.ZOOM_DONE,l._onZoomDone),(0,i["default"])(n,d.Constants.EVENTS.FEATURES_UPDATED,l._onFeaturesUpdated),n),l}return(0,p["default"])(e,t),e.prototype._onFeaturesUpdated=function(){this.forceUpdate()},e.prototype._onZoomDone=function(){this.forceUpdate()},e.prototype._onZoomOutClick=function(t){var e=this.context.editor;e.features.isEnabled("zoom")&&e.zoom.zoomOut()},e.prototype._onZoomInClick=function(t){var e=this.context.editor;e.features.isEnabled("zoom")&&e.zoom.zoomIn()},e.prototype.renderWithBEM=function(){var t=this.context.editor,e=t.zoom.get(),n=t.features.isEnabled("zoom");return d.ReactBEM.createElement("div",{bem:"$b:editorScreen $e:zoom"},d.ReactBEM.createElement("div",{bem:"$e:button m:zoomOut",onClick:this._onZoomOutClick,className:n?null:"is-disabled"},d.ReactBEM.createElement("img",{bem:"e:image",src:this._getAssetPath("controls/minus.png",!0)})),d.ReactBEM.createElement("div",{bem:"e:label"},"Zoom",d.ReactBEM.createElement("br",null),Math.round(100*e),"%"),d.ReactBEM.createElement("div",{bem:"$e:button m:zoomIn",onClick:this._onZoomInClick,className:n?null:"is-disabled"},d.ReactBEM.createElement("img",{bem:"e:image",src:this._getAssetPath("controls/plus.png",!0)})))},e}(d.BaseComponent);e["default"]=h,h.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(68),d=o(p),h=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.props.sprite.getCanvas();this.refs.brush.appendChild(e)},e.prototype.componentWillReceiveProps=function(t){if(t.sprite!==this.props.sprite){var e=this.props.sprite.getCanvas();e.parentNode.removeChild(e);var n=t.sprite.getCanvas();this.refs.brush.appendChild(n)}},e.prototype._isSelected=function(){return this.getSharedState("brush")===this.props.sprite},e.prototype.renderWithBEM=function(){var t=this._isSelected()?"is-selected":null;return c.ReactBEM.createElement("bem",{specifier:"b:spritesCanvasControls"},c.ReactBEM.createElement("div",{bem:"$e:item e:container m:full",ref:"container"},c.ReactBEM.createElement("div",{bem:"$e:brush",className:t,ref:"brush"})))},e}(d["default"]);e["default"]=h,h.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=n(68),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onRotateKnobDragStart","_onRotateKnobDrag","_onRotateKnobDragStop"),a._id=c.SDKUtils.getUUID(),a}return(0,u["default"])(e,t),e.prototype._onKnobDragStart=function(t,e,n){var o=this.props.sprite;switch(t){case"bottom":this._initialPosition=this._getBottomDragKnobPosition();break;case"top":this._initialPosition=this._getTopDragKnobPosition()}this._initialDimensions=o.getDimensions().clone(),this.props.onDragStart&&this.props.onDragStart()},e.prototype._onKnobDrag=function(t,e,n){var o=this.props.sprite,r=this._getAbsoluteSpritePosition(),i=this._initialPosition.clone().add(e),a=i.clone().subtract(r),s=this._initialPosition.clone().subtract(r);if(this.props.options.fixedRatio){var l=this._getStickerDimensions().divide(2).abs(),u=this._initialPosition.clone().subtract(r),p=void 0;switch(t){case"bottom":p=Math.atan2(a.y,a.x)-Math.atan2(l.y,l.x);break;case"top":p=Math.atan2(a.y,a.x)-Math.atan2(-l.y,-l.x)}var d=this._initialDimensions.clone().multiply(a.len()/u.len());o.set({dimensions:d,rotation:p})}else{var h=this.context.editor.zoom.get(),f=o.getRotation(),m=Math.cos(f*-1),v=Math.sin(f*-1),g=new c.Vector2(a.x*m-a.y*v,a.x*v+a.y*m),_=new c.Vector2(s.x*m-s.y*v,s.x*v+s.y*m),y=void 0;switch(t){case"bottom":y=g.clone().subtract(_);break;case"top":y=_.clone().subtract(g)}var b=this._initialDimensions.clone().add(y.clone().divide(h).multiply(2));o.set({dimensions:b})}},e.prototype._onKnobDragStop=function(){this.props.onDragStop&&this.props.onDragStop()},e.prototype._onRotateKnobDragStart=function(t,e){this._initialPosition=this._getRotateKnobPosition(),this.props.onDragStart&&this.props.onDragStart()},e.prototype._onRotateKnobDragStop=function(){this.props.onDragStop&&this.props.onDragStop()},e.prototype._onRotateKnobDrag=function(t,e){var n=this.props.sprite,o=this._getAbsoluteSpritePosition(),r=this._initialPosition.clone().add(t),i=this._getStickerDimensions().divide(2),a=r.clone().subtract(o),s=void 0;s=Math.atan2(a.y,a.x)-Math.atan2(-i.y,i.x),n.set({rotation:s})},e.prototype._getBottomDragKnobStyle=function(){var t=this._getBottomDragKnobPosition();return{left:t.x,top:t.y}},e.prototype._getTopDragKnobStyle=function(){var t=this._getTopDragKnobPosition();return{left:t.x,top:t.y}},e.prototype._getRotateKnobStyle=function(){var t=this._getRotateKnobPosition();return{left:t.x,top:t.y}},e.prototype._getStickerStyle=function(){var t=this.props.sprite,e=this._getStickerDimensions().abs(),n=this._getAbsoluteSpritePosition().subtract(e.clone().divide(2)),o=180*t.getRotation()/Math.PI,r="rotate("+o.toFixed(2)+"deg)",i=t.getDimensions(),a=t.getFlipVertically();i.y<0&&(a=!a),a&&(r+=" scaleY(-1)");var s=t.getFlipHorizontally();return i.x<0&&(s=!s),s&&(r+=" scaleX(-1)"),{top:n.y,left:n.x,width:e.x,height:e.y,WebkitTransform:r,msTransform:r,MozTransform:r,OTransform:r}},e.prototype._getStickerDimensions=function(){var t=this.props.sprite,e=this.context.editor;return t.getDimensions().clone().multiply(e.zoom.get())},e.prototype._getRotateKnobPosition=function(){var t=this.props.sprite,e=this._getAbsoluteSpritePosition(),n=t.getRotation(),o=Math.sin(n||0),r=Math.cos(n||0),i=this._getStickerDimensions().divide(2);return e.clone().add(i.x*r+i.y*o,i.x*o-i.y*r)},e.prototype._getBottomDragKnobPosition=function(){var t=this.props.sprite,e=this._getAbsoluteSpritePosition(),n=t.getRotation(),o=Math.sin(n||0),r=Math.cos(n||0),i=this._getStickerDimensions().divide(2);return e.clone().add(i.x*r-i.y*o,i.x*o+i.y*r)},e.prototype._getTopDragKnobPosition=function(){var t=this.props.sprite,e=this._getAbsoluteSpritePosition(),n=t.getRotation(),o=Math.sin(n||0),r=Math.cos(n||0),i=this._getStickerDimensions(t).divide(2);return e.clone().subtract(i.x*r-i.y*o,i.x*o+i.y*r)},e.prototype._renderKnobs=function(){var t=[];return this.props.selected&&(t=[c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart.bind(this,"bottom"),onStop:this._onKnobDragStop.bind(this,"bottom"),onDrag:this._onKnobDrag.bind(this,"bottom")},c.ReactBEM.createElement("div",{bem:"e:knob $b:knob",style:this._getBottomDragKnobStyle()},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/knobs/resize-diagonal-down.png",!0)}))),c.ReactBEM.createElement(d["default"],{onStart:this._onKnobDragStart.bind(this,"top"),onStop:this._onKnobDragStop.bind(this,"top"),onDrag:this._onKnobDrag.bind(this,"top")},c.ReactBEM.createElement("div",{bem:"e:knob $b:knob",style:this._getTopDragKnobStyle()},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/knobs/resize-diagonal-down.png",!0)})))],this.props.options.fixedRatio||t.push(c.ReactBEM.createElement(d["default"],{onStart:this._onRotateKnobDragStart,onStop:this._onRotateKnobDragStop,onDrag:this._onRotateKnobDrag},c.ReactBEM.createElement("div",{bem:"e:knob $b:knob",style:this._getRotateKnobStyle()},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/knobs/rotate.png",!0)}))))),t},e.prototype._renderItem=function(){var t=this.props.sprite,e=this._getStickerStyle(),n=this.props.selected?"is-selected":null;return c.ReactBEM.createElement(d["default"],{onStart:this._onItemDragStart,onStop:this._onItemDragStop,onDrag:this._onItemDrag,disabled:!this.props.selected},c.ReactBEM.createElement("div",{bem:"$e:sticker",style:e,className:n},c.ReactBEM.createElement("img",{src:t.getImage().src,width:e.width,height:e.height})))},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"b:spritesCanvasControls"},c.ReactBEM.createElement("div",{bem:"$e:item e:container"},this._renderItem(),this._renderKnobs()))},e}(f["default"]);e["default"]=m,m.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(19),d=o(p),h=n(68),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onTextChange","_onItemDoubleClick","_onItemTouchStart","_onItemTouchEnd","_onResizeKnobDragStart","_onResizeKnobDrag","_onResizeKnobDragStop","_onRotationKnobDragStart","_onRotationKnobDrag","_onRotationKnobDragStop"),a.state={editMode:!1},a}return(0,u["default"])(e,t),e.prototype._onTextChange=function(t){var e=this.props.sprite;e.setText(t.target.value)},e.prototype._onItemDoubleClick=function(){this.enterEditMode()},e.prototype.enterEditMode=function(){var t=this,e=this.props.sprite;e._edited||(e.setText(""),this.refs.textarea.value="",e._edited=!0,this.forceUpdate()),this.setState({editMode:!0},function(){t.refs.textarea.focus(),t.refs.textarea.select()})},e.prototype._onItemTouchStart=function(t){this._initialTouchPosition=c.Utils.getEventPosition(t),this._tapStartAt=(0,c.now)()},e.prototype._onItemTouchEnd=function(){(0,c.now)()-this._tapStartAt<=100&&("undefined"!=typeof this._lastTapAt&&(0,c.now)()-this._lastTapAt<=300&&this._onItemDoubleClick(),this._lastTapAt=(0,c.now)())},e.prototype._onRotationKnobDragStart=function(t,e){this._dragging=!0,this._initialPosition=this._getRotationKnobPosition(),this.props.onDragStart&&this.props.onDragStart()},e.prototype._onRotationKnobDrag=function(t,e){var n=this.props.sprite,o=this.context.editor,r=this._getAbsoluteSpritePosition(),i=this._initialPosition.clone().add(t),a=i.clone().subtract(r),s=n.getBoundingBox(o.getSDK(),o.getOutputDimensions()),l=Math.atan2(a.y,a.x)-Math.atan2(s.y,s.x/2);n.setRotation(l)},e.prototype._onRotationKnobDragStop=function(t){this.props.onDragStop&&this.props.onDragStop()},e.prototype._onResizeKnobDragStart=function(t,e){this._initialPosition=this._getResizeKnobPosition(),this.props.onDragStart&&this.props.onDragStart()},e.prototype._onResizeKnobDrag=function(t,e){var n=this.props.sprite,o=n.getRotation(),r=this.context.editor,i=r.getOutputDimensions(),a=Math.cos(o),s=Math.sin(o),l=this._initialPosition.clone().add(t),u=this._getAbsoluteSpritePosition(),c=l.clone().subtract(u),p=Math.max((c.x*a+c.y*s)/i.x*2,.1);n.setMaxWidth(p)},e.prototype._onResizeKnobDragStop=function(t){this.props.onDragStop&&this.props.onDragStop()},e.prototype._getRotationKnobStyle=function(){var t=this._getRotationKnobPosition();return{left:t.x,top:t.y}},e.prototype._getResizeKnobStyle=function(){var t=this._getResizeKnobPosition();return{left:t.x,top:t.y}},e.prototype._getTextStyle=function(){var t=this.context.editor,e=this.props.sprite,n=t.getSDK(),o=t.getOutputDimensions(),r=e.getDOMStyle(n,o),i=this._getAbsoluteSpritePosition(),a=e.getBoundingBox(n,o);return r.height=Math.min(a.y,o.y-i.y),r},e.prototype._getItemContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.props.sprite,o=n.getPosition().clone().multiply(e),r=180*n.getRotation()/Math.PI,i="rotateZ("+r.toFixed(2)+"deg)",a="50% 0",s=n.getMaxWidth()*e.x;return{width:s,left:o.x,top:o.y,marginLeft:s*-.5,transform:i,MozTransform:i,msTransform:i,WebkitTransform:i,transformOrigin:a,MozTransformOrigin:a,msTransformOrigin:a,WebkitTransformOrigin:a}},e.prototype._getRotationKnobPosition=function(){var t=this.props.sprite,e=this.context.editor,n=Math.sin(t.getRotation()),o=Math.cos(t.getRotation()),r=e.getOutputDimensions(),i=t.getBoundingBox(e.getSDK(),r),a=i.clone().divide(2),s=t.getPosition().clone().multiply(r).add(a.x*o-i.y*n,a.x*n+i.y*o);return s},e.prototype._getResizeKnobPosition=function(){
var t=this.props.sprite,e=this.context.editor,n=Math.sin(t.getRotation()),o=Math.cos(t.getRotation()),r=e.getOutputDimensions(),i=t.getBoundingBox(e.getSDK(),r),a=i.clone().divide(2),s=t.getPosition().clone().multiply(r).add(a.x*o,a.x*n);return s},e.prototype._renderKnobs=function(){var t=[];return this.props.selected&&!this.state.editMode&&(t=[c.ReactBEM.createElement(d["default"],{onStart:this._onRotationKnobDragStart,onDrag:this._onRotationKnobDrag,onStop:this._onRotationKnobDragStop},c.ReactBEM.createElement("div",{bem:"e:knob m:rotate $b:knob",style:this._getRotationKnobStyle()},c.ReactBEM.createElement("img",{bem:"e:icon m:larger",src:this._getAssetPath("controls/knobs/rotate.png",!0)}))),c.ReactBEM.createElement(d["default"],{onStart:this._onResizeKnobDragStart,onDrag:this._onResizeKnobDrag,onStop:this._onResizeKnobDragStop},c.ReactBEM.createElement("div",{bem:"e:knob m:resize $b:knob",style:this._getResizeKnobStyle()},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/knobs/resize-diagonal-up.png",!0)})))]),t},e.prototype._renderItem=function(){var t=this.props.sprite,e=[];e=[c.ReactBEM.createElement("textarea",{bem:"e:content",ref:"textarea",style:this._getTextStyle(),defaultValue:t.getText(),disabled:!this.state.editMode,onChange:this._onTextChange})];var n="$e:text";return this.props.selected&&(n+=" m:selected"),this.state.editMode||e.push(c.ReactBEM.createElement("div",{bem:"e:disabledOverlay",onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd})),c.ReactBEM.createElement(d["default"],{onStart:this._onItemDragStart,onStop:this._onItemDragStop,onDrag:this._onItemDrag,disabled:!this.props.selected||this.props.selected&&this.state.editMode},c.ReactBEM.createElement("div",{bem:"$e:text",style:this._getItemContainerStyle(),className:this.props.selected?"is-selected":null},e))},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"b:spritesCanvasControls"},c.ReactBEM.createElement("div",{bem:"$e:item e:container"},this._renderItem(),this._renderKnobs()))},e}(f["default"]);e["default"]=m,m.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(12),d=o(p),h=n(218),f=o(h),m=n(217),v=o(m),g=c.SDK.Operations.SpriteOperation.Sticker,_=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onExit=function(){var t=this.context.editor,e=this.getSharedState("operation");t.history.add(e,this.getSharedState("initialOptions"),this.getSharedState("operationExistedBefore")),e.setEnabled(!0),t.zoom.undo(),t.features.enable("zoom","drag"),t.render()},e.onEnter=function(t){var e=this.context.editor,n=e.operations.getOrCreate("sprite"),o=e.operations.exists("sprite"),r=n.getSprites(),i=n.getSpritesOfType(g),a=n.serializeOptions();n.setEnabled(!1),e.zoom.set("auto"),this.setSharedState({operationExistedBefore:o,operation:n,sprites:r,stickers:i,initialOptions:a})},e.clickAtPosition=function(t,e){if(!e.operations.exists("sprite"))return!1;var n=e.operations.getOrCreate("sprite"),o=n.getSpritesAtPosition(t,e.getOutputDimensions()).filter(function(t){return t instanceof g});return!!o.length&&{selectedSprite:o[0]}},e.isAvailable=function(t){return t.isToolEnabled("sticker")},e}(d["default"]);_.controlsComponent=f["default"],_.canvasControlsComponent=v["default"],_.identifier="sticker",_.iconPath="controls/overview/sticker.png",_.languageKey="controls.overview.sticker",_.defaultOptions={categories:[],replaceCategories:!1,selectableStickers:null,tooltips:!1,hideCategories:!1,fixedRatio:!0},e["default"]=_},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(69),d=o(p),h=n(219),f=o(h),m=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._renderOverlayControls=function(){if(this.getSharedState("selectedSprite"))return c.ReactBEM.createElement(f["default"],{onFlip:this._onSpriteFlip,onTakeToFront:this._onSpriteTakeToFront,onRemove:this._onSpriteRemove})},e}(d["default"]);e["default"]=m,m.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(11),f=o(h),m=n(17),v=o(m),g=n(115),_=o(g),y=n(18),b=o(y),E=n(122),C=o(E),S=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));return i._bindAll("_onStickerMouseLeave","_renderTooltipCanvas","_onCategoryChange"),i._operation=i.getSharedState("operation"),i._sprites=i.getSharedState("sprites"),i._stickers=i.getSharedState("stickers"),i._initStickerManager(),i.state={category:"all"},i}return(0,p["default"])(e,t),e.prototype._onCategoryChange=function(t){var e=this;this.setState({category:t.name},function(){e._renderStickers(),e.refs.scrollbar.update()})},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.props.options.stickersJSONPath?this._loadExternalStickers():this._renderStickers();var e=this.context.editor;e.zoom.set("auto",function(){e.features.disable("zoom","drag")})},e.prototype._loadExternalStickers=function(){var t=this,e=null,n=setTimeout(function(){e=b["default"].instance.displayLoading(t._t("loading.loading"))},100),o=function(){n&&(clearTimeout(n),n=null),e&&e.close()};this._availableStickers=[],this.forceUpdate();var r=this.props.options.stickersJSONPath;d.Utils.getJSONP(r).then(function(e){o(),"1.0"===e.version?t._initStickers([{name:"all",label:"All",stickers:e.stickers}]):"1.1"===e.version&&t._initStickers(e.categories),t.forceUpdate(function(){t.refs.scrollbar.update(),t._renderStickers()})})["catch"](function(e){o();var n=b["default"].instance.displayError(t._t("errors.loadingStickersFailed.title"),e.message);n.on("close",function(){t.props.onBack()})})},e.prototype._renderStickers=function(){var t=this,e=this._stickerManager.getStickersForCategory(this.state.category);e.forEach(function(e,n){return t._renderSticker(n,e)})},e.prototype._renderTooltipCanvas=function(){var t=this,e=this.state.hoveredSticker,n=new window.Image;n.addEventListener("load",function(){if(t.state.tooltipVisible&&t.state.hoveredSticker===e){var o=t.refs.tooltipCanvas;o.width=o.offsetWidth,o.height=o.offsetHeight;var r=o.getContext("2d"),i=Math.min(o.width/n.width,o.height/n.height),a=new d.Vector2(n.width,n.height).multiply(i),s=new d.Vector2(o.width,o.height).divide(2).subtract(a.clone().divide(2));r.drawImage(n,0,0,n.width,n.height,s.x,s.y,a.x,a.y)}});var o=this._getAssetPath((e.images.mediaMedium||e.images.mediaBase).uri);n.src=o},e.prototype._renderSticker=function(t,e){var n=this.context.editor,o=n.getSDK(),r=this._getAssetPath(e.images.mediaThumb.uri),i=this.refs["canvas-"+t],a=o.getPixelRatio();i.width=i.offsetWidth*a,i.height=i.offsetHeight*a,i.style.width=i.offsetWidth+"px",i.style.height=i.offsetHeight+"px";var s=i.getContext("2d"),l=new window.Image;l.addEventListener("load",function(){var t=Math.min(i.width/l.width,i.height/l.height),e=new d.Vector2(l.width,l.height).multiply(t),n=new d.Vector2(i.width,i.height).divide(2).subtract(e.clone().divide(2));s.drawImage(l,0,0,l.width,l.height,n.x,n.y,e.x,e.y)}),l.src=r},e.prototype._initStickerManager=function(){this._stickerManager=new C["default"](this.props.options)},e.prototype._onBackClick=function(t){this._backButtonClicked=!0,this.props.onSwitchControls("home")},e.prototype._onStickerClick=function(t){var e=this,n=this._getAssetPath(t.images.mediaBase.uri),o=new window.Image,r=void 0,i=setTimeout(function(){r=b["default"].instance.displayLoading(e._t("loading.loading"))},100);o.addEventListener("load",function(){r&&r.close(),i&&(clearTimeout(i),i=null);var n=e.context.editor,a=e._operation.createSticker({name:t.name,image:o,position:new d.Vector2(.5,.5),dimensions:new d.Vector2(o.width,o.height),rotation:0});e._operation.addSprite(a),e._stickers.push(a),n.render(function(){e.setSharedState({selectedSprite:a,sprites:e._sprites,stickers:e._stickers})})}),o.addEventListener("error",function(){r&&r.close(),i&&(clearTimeout(i),i=null),b["default"].instance.displayError(e._t("errors.imageLoadFail.title"),e._t("errors.imageLoadFail.text",{path:o.src}))}),o.crossOrigin="Anonymous",o.src=n},e.prototype._onStickerMouseEnter=function(t,e){var n=this;this.setState({tooltipVisible:!0,hoveredSticker:t,hoveredStickerElement:e.currentTarget},function(){n._renderTooltipCanvas(),n._updateTooltipPosition()})},e.prototype._updateTooltipPosition=function(){var t=this.state.hoveredStickerElement,e=t.parentNode,n=t.getBoundingClientRect(),o=e.getBoundingClientRect();this.setState({tooltipPosition:n.left-o.left+.5*n.width})},e.prototype._onStickerMouseLeave=function(){this.setState({tooltipVisible:!1,hoveredSticker:null})},e.prototype._renderListItems=function(){var t=this,e=this._stickerManager.getStickersForCategory(this.state.category);return e.map(function(e,n){var o=t.props.options,r=o.tooltips?{onMouseEnter:t._onStickerMouseEnter.bind(t,e),onMouseLeave:t._onStickerMouseLeave}:null;return d.ReactBEM.createElement("li",(0,i["default"])({bem:"$b:stickersControls $e:item",key:e.name,onClick:t._onStickerClick.bind(t,e)},r),d.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"canvas-"+n}))})},e.prototype._renderTooltip=function(){var t=this.props.options.tooltips&&this.state.tooltipVisible,e={left:this.state.tooltipPosition};return t?d.ReactBEM.createElement("div",{bem:"e:cell m:empty"},d.ReactBEM.createElement("div",{bem:"$b:stickersControls $e:tooltip",visible:this.state.tooltipVisible,style:e},d.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"tooltipCanvas"}))):null},e.prototype._renderCategoryDropdown=function(){var t=this,e=this._stickerManager.getCategories(),n=!this.props.options.hideCategories&&e.length>1;if(!n)return null;var o=e.map(function(e){return{name:e.name,label:t._t("controls.sticker.categories."+e.name),icon:t._getAssetPath("controls/stickers/categories/"+e.name+".png",!0)}}),r={name:this.state.category,label:this._t("controls.sticker.categories."+this.state.category),icon:this._getAssetPath("controls/stickers/categories/"+this.state.category+".png",!0)};return d.ReactBEM.createElement("div",{bem:"e:cell m:categoryDropdown"},d.ReactBEM.createElement(_["default"],{items:o,selectedItem:r,onChange:this._onCategoryChange}))},e.prototype.renderControls=function(){var t=this._renderListItems(),e=this._renderTooltip(),n=this._renderCategoryDropdown();return[e,n,d.ReactBEM.createElement("div",{bem:"e:cell m:list"},d.ReactBEM.createElement(v["default"],{ref:"scrollbar"},d.ReactBEM.createElement("ul",{bem:"$e:list"},t)))]},e}(f["default"]);e["default"]=S,S.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._onFlipClick=function(t,e){e.preventDefault(),e.stopPropagation(),this.props.onFlip&&this.props.onFlip(t)},e.prototype._onTakeToFrontClick=function(t){t.preventDefault(),t.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront()},e.prototype._onRemoveClick=function(t){t.preventDefault(),t.stopPropagation(),this.props.onRemove&&this.props.onRemove()},e.prototype._renderItems=function(){return[c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onFlipClick.bind(this,"h")},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/flip-h.png",!0)})),c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onFlipClick.bind(this,"v")},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/flip-v.png",!0)})),c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onTakeToFrontClick.bind(this)},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/take-to-front.png",!0)})),c.ReactBEM.createElement("div",{bem:"$e:separator"}),c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onRemoveClick.bind(this)},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/remove.png",!0)}))]},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:spritesControlsOverlay"},this._renderItems())},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(117),d=o(p),h=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._onListItemClick=function(t,e){this.props.onChange&&this.props.onChange(t)},e.prototype._renderListItems=function(){var t=this,e=this.props.fonts;return e.map(function(e,n){var o=t.props.fontFamily===e.fontFamily&&t.props.fontWeight===e.fontWeight,r=o?"is-active":null;return c.ReactBEM.createElement("li",{bem:"e:item",key:n,className:r,onClick:t._onListItemClick.bind(t,e)},c.ReactBEM.createElement(d["default"],{fontFamily:e.fontFamily,fontWeight:e.fontWeight}),c.ReactBEM.createElement("div",{bem:"e:label"},e.fontFamily))})},e.prototype.renderWithBEM=function(){var t=this._renderListItems();return c.ReactBEM.createElement("div",{bem:"$b:controls e:overlay m:dark"},c.ReactBEM.createElement("ul",{bem:"$b:fontFamily e:list"},t))},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(12),d=o(p),h=n(222),f=o(h),m=n(223),v=o(m),g=c.SDK.Operations.SpriteOperation.Text,_=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.onExit=function(){var t=this.context.editor,e=this.getSharedState("operation");t.history.add(e,this.getSharedState("initialOptions"),this.getSharedState("operationExistedBefore")),e.setEnabled(!0),t.zoom.undo(),t.features.enable("zoom","drag"),t.render()},e.onEnter=function(t){var n=this.context.editor,o=n.getOutputDimensions(),r=n.operations.exists("sprite"),i=n.operations.getOrCreate("sprite"),a=i.getSprites(),s=i.serializeOptions(),l=this.getSharedState("selectedSprite"),u=e.initFonts(this.context),p=u.fonts,d=u.defaultFont;if(!l){var h=n.getSDK(),f=h.getRenderer(),m=f.getMaxTextureSize(),v=i.createText({text:c.Constants.DEFAULTS.TEXT,position:new c.Vector2(.5,.5),maxWidth:.5,maxHeight:m?m/o.y:3,fontSize:.08,fontFamily:d.fontFamily,fontWeight:d.fontWeight,alignment:"center"});i.addSprite(v),l=v}this.setSharedState({operationExistedBefore:r,operation:i,sprites:a,initialOptions:s,selectedSprite:l,fonts:p}),i.setEnabled(!1),n.render()},e.initFonts=function(t){var e=t.options.editor.controlsOptions.text||{},n=e.additionalFonts,o=e.replaceFonts,r=e.selectableFonts;n=n||[];var i=c.Constants.DEFAULTS.FONTS;i=o?n:i.concat(n),r&&r.length&&(i=c.Utils.select(i,r,function(t){return t.name}));var a=null;return i.forEach(function(t){!a&&t["default"]&&(a=t)}),a||(a=i[0]),{fonts:i,defaultFont:a}},e.clickAtPosition=function(t,e){if(!e.operations.exists("sprite"))return!1;var n=e.operations.getOrCreate("sprite"),o=n.getSpritesAtPosition(t,e.getOutputDimensions()).filter(function(t){return t instanceof g});return!!o.length&&{selectedSprite:o[0]}},e.isAvailable=function(t){return t.isToolEnabled("text")},e}(d["default"]);_.controlsComponent=v["default"],_.canvasControlsComponent=f["default"],_.identifier="text",_.iconPath="controls/overview/text.png",_.languageKey="controls.overview.text",_.defaultOptions={additionalFonts:[],replaceFonts:!1,availableFonts:null},e["default"]=_},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(69),d=o(p),h=n(224),f=o(h),m=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onTextEdit"),a}return(0,u["default"])(e,t),e.prototype._onItemBlur=function(){var t=this.getSharedState("selectedSprite");t&&""===t.getText()&&(t.setText(c.Constants.DEFAULTS.TEXT),t._edited=!1)},e.prototype._onSpriteRemove=function(){t.prototype._onSpriteRemove.call(this),this.props.onSwitchControls("home")},e.prototype._onTextEdit=function(){var t=this.getSharedState("selectedSprite");this.refs["sprite-"+t.getId()].enterEditMode()},e.prototype._renderOverlayControls=function(){if(this.getSharedState("selectedSprite"))return c.ReactBEM.createElement(f["default"],{onTakeToFront:this._onSpriteTakeToFront,onRemove:this._onSpriteRemove,onEdit:this._onTextEdit})},e}(d["default"]);e["default"]=m,m.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(11),d=o(p),h=n(17),f=o(h),m=n(67),v=o(m),g=n(54),_=o(g),y=n(117),b=o(y),E=n(220),C=o(E),S=["left","center","right"],M=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));a._bindAll("_onFontSizeChange","_onFontChange","_onAlignmentClick","_onTakeToFrontClick","_onForegroundColorChange","_onBackgroundColorChange"),a._operation=a.getSharedState("operation"),a.state={mode:null};var l=a.context.editor;return l.render(),a._fonts=a.getSharedState("fonts"),a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.context.editor;e.zoom.set("auto",function(){e.features.disable("zoom","drag")})},e.prototype._onBackClick=function(t){var e=this.context.editor;e.render(),this._backButtonClicked=!0,this.props.onSwitchControls("home")},e.prototype.sharedStateDidChange=function(t){"selectedSprite"in t&&this.forceUpdate()},e.prototype._onFontSizeChange=function(t){var e=this.context.editor.getOutputDimensions(),n=this.getSharedState("selectedSprite");n.setFontSize(t/e.y),this.forceUpdate()},e.prototype._onFontChange=function(t){var e=this.getSharedState("selectedSprite");e.setFontFamily(t.fontFamily),e.setFontWeight(t.fontWeight),this.forceUpdate()},e.prototype._onAlignmentClick=function(t){var e=this.getSharedState("selectedSprite"),n=e.getAlignment(),o=S.indexOf(n),r=(o+1)%S.length,i=S[r];e.setAlignment(i),this.forceSharedUpdate()},e.prototype._onTakeToFrontClick=function(t){var e=this.getSharedState("operation");e.takeSpriteToFront(this.getSharedState("selectedSprite")),this.forceSharedUpdate()},e.prototype._onForegroundColorChange=function(t){var e=this.getSharedState("selectedSprite");e.setColor(t)},e.prototype._onBackgroundColorChange=function(t){var e=this.getSharedState("selectedSprite");e.setBackgroundColor(t)},e.prototype._switchToMode=function(t){t===this.state.mode&&(t=null),this.setState({mode:t})},e.prototype.renderOverlayControls=function(){switch(this.state.mode){case"size":return this._renderFontSizeOverlayControl();case"font":return this._renderFontFamilyOverlayControl();default:return null}},e.prototype._renderFontSizeOverlayControl=function(){var t=this.getSharedState("selectedSprite");if(t){var e=this.context.editor,n=e.getOutputDimensions(),o=Math.round(n.y),r=Math.round(t.getFontSize()*n.y);return c.ReactBEM.createElement(_["default"],{value:r,maxValue:o,label:this._t("controls.text.size"),onChange:this._onFontSizeChange})}},e.prototype._renderSizeItem=function(){var t=this.getSharedState("selectedSprite");if(t){var e=this.context.editor.getOutputDimensions(),n=t.getFontSize(),o="size"===this.state.mode?"is-active":null;return c.ReactBEM.createElement("li",{bem:"e:item",key:"size"},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",className:o,onClick:this._switchToMode.bind(this,"size")},c.ReactBEM.createElement("div",{bem:"b:fontSize e:text"},Math.round(n*e.y)),c.ReactBEM.createElement("div",{bem:"e:label"},this._t("controls.text.size")))))}},e.prototype._renderFontFamilyOverlayControl=function(){var t=this.getSharedState("selectedSprite");if(t)return c.ReactBEM.createElement(C["default"],{fontFamily:t.getFontFamily(),fontWeight:t.getFontWeight(),fonts:this._fonts,onChange:this._onFontChange})},e.prototype._renderFontItem=function(){var t=this.getSharedState("selectedSprite");if(t){var e="font"===this.state.mode?"is-active":null;return c.ReactBEM.createElement("li",{bem:"e:item",key:"font"},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",className:e,"data-identifier":"font",onClick:this._switchToMode.bind(this,"font")},c.ReactBEM.createElement(b["default"],{fontFamily:t.getFontFamily(),fontWeight:t.getFontWeight()}),c.ReactBEM.createElement("div",{bem:"e:label"},this._t("controls.text.font")))))}},e.prototype._renderAlignmentItem=function(){var t=this.getSharedState("selectedSprite");if(t){var e=t.getAlignment();return c.ReactBEM.createElement("li",{bem:"e:item",key:"alignment"},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",onClick:this._onAlignmentClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/text/align_"+e+".png",!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},this._t("controls.text.alignment")))))}},e.prototype._renderTakeToFrontItem=function(){return c.ReactBEM.createElement("li",{bem:"e:item",key:"takeToFront"},c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"$e:button m:withLabel",onClick:this._onTakeToFrontClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/take_to_front.png",!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},this._t("controls.text.takeToFront")))))},e.prototype.renderControls=function(){var t=[this._renderSizeItem(),this._renderFontItem(),this._renderAlignmentItem()],e=this.getSharedState("selectedSprite"),n=e.getColor().clone(),o=e.getBackgroundColor().clone();return[c.ReactBEM.createElement("div",{bem:"e:cell m:list"},c.ReactBEM.createElement(f["default"],{ref:"scrollbar"},c.ReactBEM.createElement("ul",{bem:"$e:list"},t))),c.ReactBEM.createElement("div",{bem:"e:cell m:colorPicker"},c.ReactBEM.createElement(v["default"],{initialValue:n,label:this._t("controls.text.foreground"),onChange:this._onForegroundColorChange})),c.ReactBEM.createElement("div",{bem:"e:cell m:colorPicker"},c.ReactBEM.createElement(v["default"],{initialValue:o,label:this._t("controls.text.background"),onChange:this._onBackgroundColorChange}))]},e}(d["default"]);e["default"]=M,M.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype._onEditClick=function(t){t.preventDefault(),t.stopPropagation(),this.props.onEdit&&this.props.onEdit()},e.prototype._onTakeToFrontClick=function(t){t.preventDefault(),t.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront()},e.prototype._onRemoveClick=function(t){t.preventDefault(),t.stopPropagation(),this.props.onRemove&&this.props.onRemove()},e.prototype._renderItems=function(){var t=[c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onTakeToFrontClick.bind(this)},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/take-to-front.png",!0)}))];return c.Utils.isMobile()&&(t=t.concat([c.ReactBEM.createElement("div",{bem:"$e:separator"}),c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onEditClick.bind(this)},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/edit.png",!0)}))])),t=t.concat([c.ReactBEM.createElement("div",{bem:"$e:separator"}),c.ReactBEM.createElement("div",{bem:"$e:item",onClick:this._onRemoveClick.bind(this)},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/sprites/remove.png",!0)}))])},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:spritesControlsOverlay"},this._renderItems())},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"$b:controls"},c.ReactBEM.createElement("div",{bem:"e:cell m:largeButton"},c.ReactBEM.createElement("div",{bem:"$e:largeButton",onClick:this.props.onClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/tick.png",!0)}))))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onCloseClick"),a}return(0,u["default"])(e,t),e.prototype._onCloseClick=function(){this.context.mediator.emit(c.Constants.EVENTS.CLOSE)},e.prototype.renderWithBEM=function(){var t=void 0;return this.context.options.showCloseButton&&(t=c.ReactBEM.createElement("div",{bem:"$e:close",onClick:this._onCloseClick},c.ReactBEM.createElement("img",{bem:"e:image",src:this._getAssetPath("close.png",!0)}))),c.ReactBEM.createElement("div",{bem:"$b:header"},c.ReactBEM.createElement("div",{bem:"e:label"},this.context.options.title),t)},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(229),d=o(p),h=n(231),f=o(h),m=n(228),v=o(m),g=n(230),_=o(g),y=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._modalManager=a.props.modalManager,a._bindAll("_onModalManagerUpdate"),a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._modalManager.on("update",this._onModalManagerUpdate)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._modalManager.off("update",this._onModalManagerUpdate)},e.prototype._onModalManagerUpdate=function(){this.forceUpdate()},e.prototype._onModalClosed=function(t){this._modalManager.removeModal(t)},e.prototype._renderModals=function(){var t=this,e=this._modalManager.getModals();return e.map(function(e){var n=void 0;switch(e.type){case"loading":n=d["default"];break;case"warning":n=f["default"];break;case"error":n=v["default"];break;case"progress":n=_["default"]}return c.ReactBEM.createElement(n,{modal:e,onClose:t._onModalClosed.bind(t,e)})})},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",null,this._renderModals())},e}(c.BaseComponent);e["default"]=y,y.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onClose"),a}return(0,u["default"])(e,t),e.prototype._onClose=function(){this.props.modal.close()},e.prototype.renderWithBEM=function(){var t=this.props.modal,e=c.ReactBEM.createElement("div",{bem:"e:modal m:error"},c.ReactBEM.createElement("div",{bem:"e:title"},t.title),c.ReactBEM.createElement("div",{bem:"e:text"},t.text),c.ReactBEM.createElement("div",{bem:"e:button b:button m:inline",onClick:this._onClose},"OK")),n=t.overlay?c.ReactBEM.createElement("div",{bem:"e:overlay"},e):e;return c.ReactBEM.createElement("bem",{specifier:"$b:modals"},n)},e}(c.BaseComponent);e["default"]=p,p.propTypes={modal:c.React.PropTypes.object},p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){var t=this.props.modal;return c.ReactBEM.createElement("bem",{specifier:"$b:modals"},c.ReactBEM.createElement("div",{bem:"e:overlay"},c.ReactBEM.createElement("div",{bem:"e:modal m:loading"},c.ReactBEM.createElement("div",{bem:"e:text"},t.text))))},e}(c.BaseComponent);e["default"]=p,p.propTypes={modal:c.React.PropTypes.object},p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){var t=this.props.modal,e=t.data.progress,n={width:(100*(e||0)).toFixed(2)+"%"};return c.ReactBEM.createElement("bem",{specifier:"$b:modals"},c.ReactBEM.createElement("div",{bem:"e:overlay"},c.ReactBEM.createElement("div",{bem:"e:modal m:loading"},c.ReactBEM.createElement("div",{bem:"e:text"},t.text),c.ReactBEM.createElement("bem",{specifier:"b:loadingModal"},c.ReactBEM.createElement("div",{bem:"$e:progressBar"},c.ReactBEM.createElement("div",{bem:"e:progress",style:n}))))))},e}(c.BaseComponent);e["default"]=p,p.propTypes={modal:c.React.PropTypes.object},p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){var t=this.props.modal;return c.ReactBEM.createElement("bem",{specifier:"$b:modals"},c.ReactBEM.createElement("div",{bem:"e:modal m:warning"},c.ReactBEM.createElement("div",{bem:"e:title"},t.title),c.ReactBEM.createElement("div",{bem:"e:text"},t.text),c.ReactBEM.createElement("div",{bem:"e:button b:button m:inline",onClick:this.props.onClose
},"OK")))},e}(c.BaseComponent);e["default"]=p,p.propTypes={modal:c.React.PropTypes.object},p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=function(t){function e(){var n;(0,s["default"])(this,e);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];var l=(0,u["default"])(this,t.call.apply(t,[this].concat(r)));return l._bindAll("_onDragStart","_onDragMove","_onDragEnd","_onWindowResize","_onFeaturesUpdated"),l._events=(n={},(0,i["default"])(n,d.Constants.EVENTS.WINDOW_RESIZE,l._onWindowResize),(0,i["default"])(n,d.Constants.EVENTS.FEATURES_UPDATED,l._onFeaturesUpdated),n),l._initialRenderDone=!1,l.state={canvasPosition:new d.Vector2,canvasOffset:new d.Vector2},l}return(0,p["default"])(e,t),e.prototype._onWindowResize=function(){var t=this.context.editor,e=t.getSDK();e.resizeTo(this._getContainerDimensions()),t.zoom.set("auto")},e.prototype._onFeaturesUpdated=function(t){t.indexOf("drag")!==-1&&this.forceUpdate()},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.context.editor,n=e.getRenderer(),o=this.refs,r=o.canvasCell,i=o.canvas,a=r.offsetWidth,s=r.offsetHeight;n.setCanvas(i),n.resizeTo(new d.Vector2(a,s))},e.prototype._onDragStart=function(t){var e=this.context.editor;e.features.isEnabled("drag")&&(t.preventDefault(),this._dragStartPosition=d.Utils.getEventPosition(t.nativeEvent),this._dragInitialOffset=e.getOffset().clone(),document.addEventListener("mousemove",this._onDragMove),document.addEventListener("touchmove",this._onDragMove),document.addEventListener("mouseup",this._onDragEnd),document.addEventListener("touchend",this._onDragEnd))},e.prototype._onDragMove=function(t){var e=d.Utils.getEventPosition(t),n=e.clone().subtract(this._dragStartPosition),o=this._dragInitialOffset.clone().add(n),r=this.context.editor,i=r.getOffset().clone();r.setOffset(o),r.getOffset().equals(i)||r.render()},e.prototype._onDragEnd=function(t){document.removeEventListener("mousemove",this._onDragMove),document.removeEventListener("touchmove",this._onDragMove),document.removeEventListener("mouseup",this._onDragEnd),document.removeEventListener("touchend",this._onDragEnd)},e.prototype._getContainerDimensions=function(){var t=this.refs.canvasCell;return new d.Vector2(t.offsetWidth,t.offsetHeight)},e.prototype._getDraggableStyle=function(){return{top:this.state.canvasPosition.y+this.state.canvasOffset.y,left:this.state.canvasPosition.x+this.state.canvasOffset.x}},e.prototype.renderWithBEM=function(){var t=null,e=null;this.props.largeControls?e=this.props.children:t=this.props.children;var n=this.context.editor.features.isEnabled("drag");return d.ReactBEM.createElement("div",{bem:"$b:canvas e:container e:row"},d.ReactBEM.createElement("div",{bem:"e:container e:cell",ref:"canvasCell"},d.ReactBEM.createElement("div",{bem:"e:innerContainer",className:n?"is-draggable":null,onTouchStart:this._onDragStart,onMouseDown:this._onDragStart,style:this._getDraggableStyle()},d.ReactBEM.createElement("canvas",{bem:"e:canvas",ref:"canvas"}),t),e))},e}(d.BaseComponent);e["default"]=h,h.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(116),d=o(p),h=n(40),f=o(h),m=n(232),v=o(m),g=n(18),_=o(g),y=n(206),b=o(y),E=n(251),C=o(E),S=500,M=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._overviewControls=d["default"],a._bindAll("switchToControls","_startEditor","_onWindowResize","_onWindowResizeDone","_onImageResize","_onNewImage","_onRenderError"),a._previousControlsStack=[],a.state={zoom:null,controls:b["default"],dragEnabled:!0,sharedState:new c.SharedState},a._editor=new C["default"](a.context.ui,a.context.options,a.context.mediator),a._editor.on("new-image",a._onNewImage),a._editor.on("ready",a._startEditor),a._editor.on("resize",a._onImageResize),a._editor.on("render-error",a._onRenderError),a._forceControls=a.context.options.editor.forceControls,a._forceControlIndex=0,a}return(0,u["default"])(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.context.options.editor.image;this.setImage(e),this._editor.render(),this._switchToNextForceControl();var n=this.context.options;n.responsive&&window.addEventListener("resize",this._onWindowResize)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._editor.dispose();var e=this.context.options;e.responsive&&window.removeEventListener("resize",this._onWindowResize)},e.prototype._startEditor=function(){this._editor.start()},e.prototype._switchToNextForceControl=function(){if(this._forceControlIndex<this._forceControls.length){var t=this._forceControls[this._forceControlIndex],e=t.control,n=t.options,o=this._editor.controls.getAvailable(),r=o[e],i=c.SDKUtils.defaults({forcedControl:!0},n);if(!r)throw new Error("Force controls: Could not find control with identifier `"+e+"`");this.switchToControls(r,{},null,i),this._forceControlIndex++}},e.prototype._onRenderError=function(t){_["default"].instance.displayError(this._t("errors.renderingError.title"),this._t("errors.renderingError.text"),!0),c.Log.error(this.constructor.name,"An error occurred while rendering: "+t.message),c.Log.printError(t)},e.prototype._onNewImage=function(){this.switchToControls(b["default"])},e.prototype._onImageResize=function(){var t=this,e=_["default"].instance.displayLoading(this._t("loading.resizing"));this._editor.once("resized",function(n){var o=n.dimensions,r=n.reason;e.close(),t.context.options.editor.displayResizeMessage&&_["default"].instance.displayWarning(t._t("warnings.imageResized_"+r+".title"),t._t("warnings.imageResized_"+r+".text",{maxMegaPixels:t._editor.getMaxMegapixels(),width:o.x,height:o.y}))})},e.prototype._onWindowResize=function(){this._resizeTimeout&&(window.clearTimeout(this._resizeTimeout),this._resizeTimeout=null),this._resizeTimeout=window.setTimeout(this._onWindowResizeDone,S)},e.prototype._onWindowResizeDone=function(){this._emitEvent(c.Constants.EVENTS.WINDOW_RESIZE)},e.prototype.switchToControls=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments[3],r=null;if("back"===t)r=this._previousControlsStack.pop();else if("home"===t){if(this._forceControlIndex<this._forceControls.length)return this._switchToNextForceControl();r=b["default"],this._previousControlsStack=[]}else r=t,this._previousControlsStack.push(this.state.controls);var i=this.state.controls!==r;this.state.controls.onExit&&this.state.controls.onExit.call(this.refs.controls),this.state.sharedState.clear(),this.state.sharedState.set(e,!1);var a=c.SDKUtils.defaults(o||this.context.options.editor.controlsOptions[r.identifier],r.defaultOptions);return r.onEnter&&r.onEnter.call(this.refs.controls,this.state.sharedState,a),i?void this.setState({controls:r,controlsOptions:a},n):n&&n()},e.prototype.getZoom=function(){return this.state.zoom},e.prototype["export"]=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return new Promise(function(e,o){t.switchToControls("home",{},function(){var r;(r=t._editor)["export"].apply(r,n).then(e)["catch"](o)})})},e.prototype.serialize=function(){var t;return(t=this._editor).serialize.apply(t,arguments)},e.prototype.deserialize=function(t){return this._editor.deserialize(t)},e.prototype._showUndoButton=function(){return this._editor.history.isAvailable()},e.prototype.getChildContext=function(){return{editor:this._editor,ui:this.context.ui,options:this.context.options,editorScreen:this,mediator:this.context.mediator}},e.prototype.setImage=function(t,e){this._editor.setImage(t,e)},e.prototype._renderScreen=function(){var t=this.state.controls.controlsComponent,e=this.state.controls.canvasControlsComponent;e||(e=b["default"].canvasControlsComponent);var n=this.state.controls.topBarControlsComponent;n||(n=b["default"].topBarControlsComponent);var o=void 0,r=void 0,i=void 0;n&&this.context.options.showTopBar&&(i=c.ReactBEM.createElement(n,{sharedState:this.state.sharedState,options:this.state.controlsOptions,app:this.props.app,ref:"topBarControls"})),t&&(o=c.ReactBEM.createElement(t,{onSwitchControls:this.switchToControls,sharedState:this.state.sharedState,options:this.state.controlsOptions,app:this.props.app,ref:"controls"})),e&&(r=c.ReactBEM.createElement(e,{onSwitchControls:this.switchToControls,sharedState:this.state.sharedState,options:this.state.controlsOptions,app:this.props.app,ref:"canvasControls"}));var a="$b:editorScreen";return this.context.options.showHeader||(a+=" m:noHeader"),c.ReactBEM.createElement("div",{bem:a},i,c.ReactBEM.createElement(v["default"],{ref:"canvas",largeControls:this.state.controls.largeCanvasControls},r),c.ReactBEM.createElement("div",{bem:"$b:controls $e:container e:row"},c.ReactBEM.createElement("div",{bem:"e:cell"},o)))},e}(f["default"]);e["default"]=M,M.childContextTypes={ui:c.React.PropTypes.object.isRequired,editor:c.React.PropTypes.object.isRequired,mediator:c.React.PropTypes.object.isRequired,options:c.React.PropTypes.object.isRequired,editorScreen:c.React.PropTypes.object.isRequired},M.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onClick"),a}return(0,u["default"])(e,t),e.prototype._onClick=function(){this.props.onClick&&this.props.onClick(this.props.library)},e.prototype.renderWithBEM=function(){var t=this.props.library,e={backgroundImage:"url("+t.coverImage+")"};return c.ReactBEM.createElement("bem",{specifier:"b:photoRoll e:libraryList"},c.ReactBEM.createElement("li",{bem:"e:item",style:e,onClick:this._onClick},c.ReactBEM.createElement("div",{bem:"e:overlay"}),c.ReactBEM.createElement("div",{bem:"e:name"},t.name)))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){var t=this.props.photo;return c.ReactBEM.createElement("bem",{specifier:"b:photoRoll e:photoList"},c.ReactBEM.createElement("li",{bem:"$e:item",onClick:this.props.onClick},c.ReactBEM.createElement("div",{bem:"e:overlay"}),c.ReactBEM.createElement("div",{bem:"e:title"},t.title),c.ReactBEM.createElement("img",{bem:"e:image",src:t.urls.thumb})))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(118),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));a._bindAll("_onSearchSuggestionClick");var l=a.context.options.photoRoll.provider;return a._provider=new l,a.state={searchSuggestions:[]},a}return(0,u["default"])(e,t),e.prototype._onSearchSuggestionClick=function(t){this.props.onSearchSuggestionClicked&&this.props.onSearchSuggestionClicked(t)},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._provider.getSearchSuggestions().then(function(t){e.setState({searchSuggestions:t})})},e.prototype._renderMessage=function(){return{__html:this._t("photoRoll.search.noSearchResults",{query:this.props.query})}},e.prototype._renderSearchSuggestions=function(){var t=this;if(!this.state.searchSuggestions.length)return null;var e=this.state.searchSuggestions.map(function(e){return c.ReactBEM.createElement(d["default"],{onClick:t._onSearchSuggestionClick,searchSuggestion:e})});return c.ReactBEM.createElement("div",null,c.ReactBEM.createElement("div",{bem:"e:headline"},"Search suggestions"),c.ReactBEM.createElement("ul",{bem:"$e:libraryList"},e))},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:photoRoll e:row m:fullHeight"},c.ReactBEM.createElement("div",{bem:"e:cell"},c.ReactBEM.createElement("div",{bem:"e:container"},c.ReactBEM.createElement("div",{bem:"e:innerContainer"},c.ReactBEM.createElement("div",{bem:"e:noSearchResults",dangerouslySetInnerHTML:this._renderMessage()}),this._renderSearchSuggestions()))))},e}(c.BaseComponent);e["default"]=h,h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(280),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(18),f=o(h),m=n(234),v=o(m),g=n(118),_=o(g),y=function(t){function e(){(0,s["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=(0,u["default"])(this,t.call.apply(t,[this].concat(o)));i._needsStyleFixes=!0,i.state={loading:!0,libraries:[],searchSuggestions:[]},i._bindAll("_onLibraryClick","_onSearchSuggestionClick");var a=i.context.options.photoRoll.provider;return i._provider=new a,i}return(0,p["default"])(e,t),e.prototype.fixStyles=function(){if(d.Utils.Browser.isIElte(11)){var t=this.refs,e=t.cell,n=t.container;if(!e||!n)return;var o=e.offsetHeight;n.style.height=o+"px"}},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this);var n=f["default"].instance.displayLoading(this._t("loading.loading"));this._load().then(function(t){var o=(0,i["default"])(t,2),r=o[0],a=o[1];n.close(),1===r.length?e._onLibraryClick(r[0],!0):e.setState({loading:!1,libraries:r,searchSuggestions:a})})},e.prototype._onLibraryClick=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.props.onLibraryClicked&&this.props.onLibraryClicked(t,e)},e.prototype._onSearchSuggestionClick=function(t){this.props.onSearchSuggestionClicked&&this.props.onSearchSuggestionClicked(t)},e.prototype._load=function(){var t=[this._provider.getLibraries(),this._provider.getSearchSuggestions()];return d.Promise.all(t)},e.prototype._renderLibraries=function(){var t=this,e=this.state.libraries.map(function(e){return d.ReactBEM.createElement(v["default"],{onClick:t._onLibraryClick,library:e})});return d.ReactBEM.createElement("li",{bem:"e:item"},d.ReactBEM.createElement("bem",{specifier:"b:photoRoll"},d.ReactBEM.createElement("div",{bem:"e:headline"},"Browse libraries"),d.ReactBEM.createElement("ul",{bem:"$e:libraryList"},e)))},e.prototype._renderSearchSuggestions=function(){var t=this;if(!this.state.searchSuggestions.length)return null;var e=this.state.searchSuggestions.map(function(e){return d.ReactBEM.createElement(_["default"],{onClick:t._onSearchSuggestionClick,searchSuggestion:e})});return d.ReactBEM.createElement("li",{bem:"e:item"},d.ReactBEM.createElement("bem",{specifier:"b:photoRoll"},d.ReactBEM.createElement("div",{bem:"e:headline"},"Search suggestions"),d.ReactBEM.createElement("ul",{bem:"$e:libraryList"},e)))},e.prototype._renderContent=function(){return d.ReactBEM.createElement("div",{bem:"$b:photoRoll e:row m:fullHeight"},d.ReactBEM.createElement("div",{bem:"e:cell",ref:"cell"},d.ReactBEM.createElement("div",{bem:"e:container",ref:"container"},d.ReactBEM.createElement("div",{bem:"e:innerContainer"},d.ReactBEM.createElement("ul",{bem:"$e:groupList"},this._renderLibraries(),this._renderSearchSuggestions())))))},e.prototype.renderWithBEM=function(){return this.state.loading?d.ReactBEM.createElement("div",null):this._renderContent()},e}(d.BaseComponent);e["default"]=y,y.contextTypes=d.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(40),d=o(p),h=n(241),f=o(h),m=n(237),v=o(m),g=n(119),_=o(g),y=n(239),b=o(y),E=n(18),C=o(E),S=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a.state={section:"overview",sectionsHistory:[]},a._bindAll("_onLibraryClicked","_onSearchSuggestionClicked","_onPhotoClicked","_onFileUpload","_onWebcamClick","_onBackClicked","_onSearch"),a}return(0,u["default"])(e,t),e.prototype.hasPreviousSection=function(){return!!this.state.sectionsHistory.length},e.prototype.switchToSection=function(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],n=arguments.length<=2||void 0===arguments[2]||arguments[2];if("back"===t){if(!this.hasPreviousSection())return e?this.props.app.switchToScreen("back"):this.switchToSection("overview");t=this.state.sectionsHistory.pop()}else this.state.section!==t&&n&&this.state.sectionsHistory.push(this.state.section);this.setState({section:t})},e.prototype._onLibraryClicked=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.state.library=t,this.switchToSection("library",!0,!e)},e.prototype._onSearchSuggestionClicked=function(t){this.state.searchQuery=t.query,this.switchToSection("search")},e.prototype._onPhotoClicked=function(t){var e=this,n=C["default"].instance.displayLoading(this._t("loading.loading")),o=new window.Image;o.addEventListener("load",function(){n.close(),e.props.app.setImage(o,!0)}),o.addEventListener("error",function(){n.close(),C["default"].instance.displayError(e._t("errors.imageLoadFail.title"),e._t("errors.imageLoadFail.text",{path:o.src}))}),o.crossOrigin="Anonymous",o.src=t.urls.raw},e.prototype._onBackClicked=function(){this.switchToSection("back")},e.prototype._onSearch=function(t){return t.trim().length?(this.state.searchQuery=t,void this.switchToSection("search")):(this.state.searchQuery=null,this.switchToSection("back",!1))},e.prototype._onWebcamClick=function(){this.props.app.switchToScreen("webcam")},e.prototype._onFileUpload=function(t){this.props.app.setImage(t)},e.prototype._isBackButtonVisible=function(){return 0!==this.state.sectionsHistory.length||this.props.app.hasPreviousScreen()},e.prototype._renderContent=function(){switch(this.state.section){case"search":return c.ReactBEM.createElement(b["default"],{query:this.state.searchQuery,onPhotoClicked:this._onPhotoClicked,onSearchSuggestionClicked:this._onSearchSuggestionClicked});case"library":return c.ReactBEM.createElement(_["default"],{library:this.state.library,onPhotoClicked:this._onPhotoClicked});case"overview":return c.ReactBEM.createElement(v["default"],{onLibraryClicked:this._onLibraryClicked,onSearchSuggestionClicked:this._onSearchSuggestionClicked})}},e.prototype._renderScreen=function(){var t=this._renderContent();return c.ReactBEM.createElement("div",{bem:"$b:photoRollScreen"},c.ReactBEM.createElement(f["default"],{onBackClicked:this._onBackClicked,onSearch:this._onSearch,searchQuery:this.state.searchQuery,onFileUpload:this._onFileUpload,onWebcamClick:this._onWebcamClick,backButton:this._isBackButtonVisible(),backButtonLabel:this._t("generic.back"),ref:"topBarControls"}),t)},e}(d["default"]);e["default"]=S,S.childContextTypes={ui:c.React.PropTypes.object.isRequired,editor:c.React.PropTypes.object.isRequired,mediator:c.React.PropTypes.object.isRequired,options:c.React.PropTypes.object.isRequired,editorScreen:c.React.PropTypes.object.isRequired},S.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(119),d=o(p),h=n(236),f=o(h),m=n(18),v=o(m),g=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.componentWillReceiveProps=function(t){t.query!==this.props.query&&this._loadPhotos(t.query)},e.prototype._getHeadline=function(){return this._t("photoRoll.search.results.headline",{query:this.props.query})},e.prototype._loadPhotos=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?this.props.query:arguments[0];this._totalPhotosHeight=0;var n=v["default"].instance.displayProgress(this._t("loading.loading")),o=this.context.options.photoRoll.provider,r=new o;r.searchPhotos(e).then(function(e){return t._preloadPhotos(e,n)}).then(function(e){t.setState({photos:e,loading:!1}),n.close()})},e.prototype._renderNotFound=function(){return c.ReactBEM.createElement(f["default"],{query:this.props.query,onSearchSuggestionClicked:this.props.onSearchSuggestionClicked})},e.prototype.renderWithBEM=function(){return this.state.loading?c.ReactBEM.createElement("div",null):0===this.state.photos.length?this._renderNotFound():this._renderPhotos()},e}(d["default"]);e["default"]=g,g.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"$b:topBar"},c.ReactBEM.createElement("div",{bem:"$e:iconButton",onClick:this.props.onClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this.props.icon})))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(55),d=o(p),h=n(240),f=o(h),m=n(71),v=o(m),g=n(242),_=o(g),y=n(249),b=o(y),E=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onUploadButtonClicked","_onWebcamButtonClicked","_onBackClicked","_onSearchValueChange","_onNewFile"),a._onSearchValueChange=c.Utils.debounce(a._onSearchValueChange,250),a}return(0,u["default"])(e,t),e.prototype._onBackClicked=function(){this.props.onBackClicked&&this.props.onBackClicked()},e.prototype._onSearchValueChange=function(t){this.props.onSearch&&this.props.onSearch(t)},e.prototype._onUploadButtonClicked=function(){this.refs.upload.open()},e.prototype._onWebcamButtonClicked=function(){this.props.onWebcamClick&&this.props.onWebcamClick()},e.prototype._onNewFile=function(t){this.props.onFileUpload&&this.props.onFileUpload(t)},e.prototype._renderRightButtons=function(){var t=this.context.options,e=[];return t.enableUpload&&e.push(c.ReactBEM.createElement(f["default"],{icon:this._getAssetPath("photo-roll/upload.png",!0),onClick:this._onUploadButtonClicked})),t.enableWebcam&&e.push(c.ReactBEM.createElement(f["default"],{icon:this._getAssetPath("photo-roll/webcam.png",!0),onClick:this._onWebcamButtonClicked})),e},e.prototype.renderWithBEM=function(){var t=void 0;return this.props.backButton&&(t=c.ReactBEM.createElement(b["default"],{label:this.props.backButtonLabel,onClick:this._onBackClicked})),c.ReactBEM.createElement("div",{bem:"$b:topBar e:row"},c.ReactBEM.createElement("div",{bem:"e:cell"},c.ReactBEM.createElement("div",{bem:"e:table"},c.ReactBEM.createElement("div",{bem:"e:cell m:left"},t),c.ReactBEM.createElement("div",{bem:"e:cell m:fullWidth"},c.ReactBEM.createElement(_["default"],{searchQuery:this.props.searchQuery,onChange:this._onSearchValueChange}),c.ReactBEM.createElement(v["default"],{onNewFile:this._onNewFile,ref:"upload"})),c.ReactBEM.createElement("div",{bem:"e:cell m:right"},this._renderRightButtons()))))},e}(d["default"]);e["default"]=E,E.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._bindAll("_onFocus","_onBlur","_onChange","_onBarClick"),a.state={active:!1,placeholder:a._t("photoRoll.search.placeholder"),value:a.props.searchQuery||""},a}return(0,u["default"])(e,t),e.prototype.componentWillReceiveProps=function(t){t.searchQuery||this.state.value?this.state.active=!0:this.state.active=!1,this.setState({value:t.searchQuery||""})},e.prototype.componentDidUpdate=function(){this.refs.input.value=this.state.value},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._hiddenInputDummy=document.createElement("div");var n=c.Utils.getStyleObject(this.refs.input),o=["font","lineHeight","textAlign","textIndent","textTransform","textDecoration","textRendering","textShadow","textOverflow","wordSpacing","letterSpacing","whiteSpace"];o.forEach(function(t){e._hiddenInputDummy.style[t]=n[t]}),this._hiddenInputDummy.style.position="absolute",this._hiddenInputDummy.style.top="-9999px",this._hiddenInputDummy.style.left="-9999px",this.refs.root.appendChild(this._hiddenInputDummy),this._updateInputWidth()},e.prototype._updateInputWidth=function(){var t=this;this._hiddenInputDummy.innerHTML=this.state.value||this.state.placeholder,setTimeout(function(){t.setState({inputWidth:t._hiddenInputDummy.offsetWidth+5})},0)},e.prototype._onBarClick=function(){this.refs.input.focus()},e.prototype._onFocus=function(){this.setState({active:!0})},e.prototype._onBlur=function(){""!==this.state.value||this.props.searchQuery||this.setState({active:!1})},e.prototype._onChange=function(t){this.state.value=t.target.value,this.forceUpdate(),this.props.onChange&&this.props.onChange(this.state.value)},e.prototype.renderWithBEM=function(){var t="$e:searchBar",e="photo-roll/search-light.png";this.state.active&&(t+=" m:active",e="photo-roll/search-dark.png"),e=this._getAssetPath(e,!0);var n={width:this.state.inputWidth+"px"};return c.ReactBEM.createElement("bem",{specifier:"$b:photoRollScreen"},c.ReactBEM.createElement("div",{bem:t,ref:"root",onClick:this._onBarClick},c.ReactBEM.createElement("div",{bem:"e:content"},c.ReactBEM.createElement("div",{bem:"$e:icon"},c.ReactBEM.createElement("img",{src:e,bem:"e:image"})),c.ReactBEM.createElement("div",{bem:"e:inputContainer"},c.ReactBEM.createElement("input",{bem:"e:input",ref:"input",placeholder:this.state.placeholder,onBlur:this._onBlur,onFocus:this._onFocus,onChange:this._onChange,defaultValue:this.state.value,style:n})))))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(70),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._needsStyleFixes=!0,a._modifier="photoRoll",a}return(0,u["default"])(e,t),e.prototype.fixStyles=function(){if(c.Utils.Browser.isIElte(11)){var t=this.refs,e=t.cell,n=t.overlay,o=e.offsetHeight;n.style.height=o+"px"}},e.prototype._renderContent=function(){var t={backgroundImage:"url("+this._getAssetPath("splash/photo-roll.png",!0,!0)+")"};return c.ReactBEM.createElement("div",{bem:"e:contentWrapper"},c.ReactBEM.createElement("div",{bem:"e:contentRow"},c.ReactBEM.createElement("div",{bem:"e:contentCell",onClick:this._onClick,style:t,ref:"cell"},c.ReactBEM.createElement("div",{bem:"e:overlay",ref:"overlay"}),c.ReactBEM.createElement("div",{bem:"e:headline"},this._t("splash.photoRoll.headline")),c.ReactBEM.createElement("div",{bem:"e:description"},this._t("splash.photoRoll.description")))))},e}(d["default"]);e["default"]=h,h.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(40),d=o(p),h=n(245),f=o(h),m=n(246),v=o(m),g=n(243),_=o(g),y=function(t){function e(){(0,i["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._bindAll("_onWebcamClick","_onPhotoRollClick","_onImage"),n}return(0,u["default"])(e,t),e.prototype._onPhotoRollClick=function(){this.props.app.switchToScreen("photoRoll")},e.prototype._onWebcamClick=function(){this.props.app.switchToScreen("webcam")},e.prototype._onImage=function(t){this.props.app.setImage(t)},e.prototype._isWebcamAvailable=function(){return!c.Utils.isMobile()&&this.context.options.enableWebcam!==!1},e.prototype._isPhotoRollAvailable=function(){return!!this.context.options.photoRoll.provider},e.prototype._renderScreen=function(){var t=[],e=0,n=this.context.options.enableUpload;n&&e++;var o=this._isWebcamAvailable();o&&e++;var r=this._isPhotoRollAvailable();return r&&e++,n&&t.push(c.ReactBEM.createElement(f["default"],{onImage:this._onImage,totalRows:e})),o&&t.push(c.ReactBEM.createElement(v["default"],{onClick:this._onWebcamClick,totalRows:e})),r&&t.push(c.ReactBEM.createElement(_["default"],{onClick:this._onPhotoRollClick,totalRows:e})),c.ReactBEM.createElement("div",{bem:"$b:splashScreen"},c.ReactBEM.createElement("div",{bem:"e:container"},t))},e}(d["default"]);e["default"]=y,y.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(1),h=n(70),f=o(h),m=n(176),v=o(m),g=n(71),_=o(g),y=function(t){function e(){(0,s["default"])(this,e);var n=(0,u["default"])(this,t.call(this));return n._modifier="upload",n._bindAll("_onImage","_onDragEnter","_onDragOver","_onDragLeave","_onDrop"),n._dragCounter=0,n.state={dragAreaHovered:!1},n}return(0,p["default"])(e,t),e.prototype._onDragEnter=function(t){t.preventDefault(),this._dragCounter++,this.setState({dragAreaHovered:!0})},e.prototype._onDragOver=function(t){t.preventDefault()},e.prototype._onDragLeave=function(t){t.preventDefault(),this._dragCounter--,0===this._dragCounter&&this.setState({dragAreaHovered:!1})},e.prototype._onDrop=function(t){var e=this;t.stopPropagation(),t.preventDefault(),t=t.nativeEvent,t.returnValue=!1,this.setState({dragAreaHovered:!1},function(){t.dataTransfer&&e._handleFile(t.dataTransfer.files[0])})},e.prototype._onClick=function(t){this.refs.upload.open()},e.prototype._handleFile=function(t){var e=this,n=new window.FileReader;n.onload=function(){return function(t){var n=t.target.result,o=new window.Image;o.addEventListener("load",function(){e._onImage(o)}),o.src=n}}(t),n.readAsDataURL(t)},e.prototype._onImage=function(t){this.props.onImage&&this.props.onImage(t)},e.prototype._renderContent=function(){var t={onDragEnter:this._onDragEnter,onDragOver:this._onDragOver,onDragLeave:this._onDragLeave,onDrop:this._onDrop};this.state.dragAreaHovered&&(t.className="is-hovered");var e="e:contentCell";return this.context.options.enableWebcam===!1&&null===this.context.options.photoRoll.provider||(e+=" m:withBorder"),d.ReactBEM.createElement("div",{bem:"e:contentWrapper"},d.ReactBEM.createElement("div",{bem:"e:contentRow"},d.ReactBEM.createElement("div",(0,
i["default"])({bem:e,onClick:this._onClick},t),d.ReactBEM.createElement(_["default"],{ref:"upload",onNewFile:this._onImage}),d.ReactBEM.createElement(v["default"],{bem:"e:button",uppercase:!0},this._t("splash.upload.button")),d.ReactBEM.createElement("div",{bem:"e:description"},this._t("splash.upload.description")))))},e}(f["default"]);e["default"]=y,y.propTypes={onImage:d.React.PropTypes.func.isRequired},y.contextTypes=f["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(70),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(o)));return a._needsStyleFixes=!0,a._modifier="webcam",a}return(0,u["default"])(e,t),e.prototype.fixStyles=function(){if(c.Utils.Browser.isIElte(11)){var t=this.refs,e=t.cell,n=t.overlay,o=e.offsetHeight;n.style.height=o+"px"}},e.prototype._renderContent=function(){var t={backgroundImage:"url("+this._getAssetPath("splash/webcam.png",!0,!0)+")"};return c.ReactBEM.createElement("div",{bem:"e:contentWrapper"},c.ReactBEM.createElement("div",{bem:"e:contentRow"},c.ReactBEM.createElement("div",{bem:"e:contentCell",onClick:this._onClick,style:t,ref:"cell"},c.ReactBEM.createElement("div",{bem:"e:overlay",ref:"overlay"}),c.ReactBEM.createElement("div",{bem:"e:headline"},this._t("splash.webcam.headline")),c.ReactBEM.createElement("div",{bem:"e:description"},this._t("splash.webcam.description")))))},e}(d["default"]);e["default"]=h,h.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(18),d=o(p),h=function(t){function e(){(0,i["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._bindAll("_onWebcamReady"),n.state={webcamReady:!1},n}return(0,u["default"])(e,t),e.prototype.shouldComponentUpdate=function(t,e){return!1},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this);var e=this.refs.video;if(this._stream){var n=this._stream.getTracks()[0];n&&n.stop(),this._stream.stop&&this._stream.stop()}e.pause()},e.prototype.componentDidMount=function(){this._resizeVideo(),this._initVideoStream()},e.prototype._onWebcamReady=function(){this.props.onReady&&this.props.onReady(),this.setState({webcamReady:!0})},e.prototype.makePhoto=function(){if(!this.state.webcamReady)return c.Promise.reject(new Error("UserMedia stream not ready"));var t=this.refs.video;return new c.Promise(function(e,n){var o=document.createElement("canvas");o.width=t.videoWidth,o.height=t.videoHeight;var r=o.getContext("2d");r.drawImage(t,0,0);var i=new window.Image;i.addEventListener("load",function(){e(i)}),i.src=o.toDataURL("image/png")})},e.prototype._resizeVideo=function(){var t=this.refs,e=t.video,n=t.container,o=c.Utils.getInnerDimensionsForElement(n);e.width=o.x,e.height=o.y},e.prototype._initVideoStream=function(){var t=this,e=this.refs.video,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!n){var o=d["default"].instance.displayError(this._t("errors.webcamNotSupported.title"),this._t("errors.webcamNotSupported.text"));return void o.on("close",function(){return t.props.onBack()})}n.call(navigator,{video:!0},function(n){t._stream=n,e.onloadedmetadata=t._onWebcamReady,e.src=window.URL.createObjectURL(n)},function(e){console.error&&console.error(e);var n=d["default"].instance.displayError(t._t("errors.webcamUnavailable.title"),t._t("errors.webcamUnavailable.text",{error:e.name}),!0);n.on("close",function(){return t.props.onBack()})})},e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("div",{bem:"$b:webcam",ref:"container"},c.ReactBEM.createElement("video",{bem:"e:video",ref:"video",autoPlay:!0}))},e}(c.BaseComponent);e["default"]=h,h.propTypes={onReady:c.React.PropTypes.func},h.contextTypes=c.BaseComponent.contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(40),d=o(p),h=n(55),f=o(h),m=n(247),v=o(m),g=function(t){function e(){(0,i["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._bindAll("_onCancel","_onWebcamReady","_onShutterClicked"),n.state={webcamReady:!1},n}return(0,u["default"])(e,t),e.prototype._onWebcamReady=function(){this.setState({webcamReady:!0})},e.prototype._onCancel=function(){this.props.app.switchToScreen("back")},e.prototype._onShutterClicked=function(){var t=this,e=this.refs.webcam;e.makePhoto().then(function(e){t.props.app.setImage(e)})["catch"](function(t){console.error&&console.error(t)})},e.prototype._renderScreen=function(){return c.ReactBEM.createElement("div",{bem:"$b:webcamScreen"},c.ReactBEM.createElement(f["default"],{label:this._t("webcam.headline")},c.ReactBEM.createElement("bem",{specifier:"$b:topBar"},c.ReactBEM.createElement("div",{bem:"e:cancelButton",onClick:this._onCancel},this._t("generic.cancel")),c.ReactBEM.createElement("div",{bem:"e:label"},this._t("webcam.headline")))),c.ReactBEM.createElement("div",{bem:"$b:canvas e:container e:row"},c.ReactBEM.createElement("div",{bem:"e:container e:cell"},c.ReactBEM.createElement(v["default"],{ref:"webcam",onReady:this._onWebcamReady,onBack:this._onCancel}))),c.ReactBEM.createElement("div",{bem:"$b:controls $e:container e:row"},c.ReactBEM.createElement("div",{bem:"e:cell"},c.ReactBEM.createElement("bem",{specifier:"b:webcamScreen"},c.ReactBEM.createElement("div",{bem:"$e:shutterButton",onClick:this._onShutterClicked,className:!!this.state.webcamReady&&"is-active"},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("controls/webcam/shutter.png",!0)}))))))},e}(d["default"]);e["default"]=g,g.contextTypes=d["default"].contextTypes},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(){return(0,i["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,u["default"])(e,t),e.prototype.renderWithBEM=function(){return c.ReactBEM.createElement("bem",{specifier:"$b:topBar"},c.ReactBEM.createElement("div",{bem:"$e:backButton",onClick:this.props.onClick},c.ReactBEM.createElement("img",{bem:"e:icon",src:this._getAssetPath("top-bar/back.png",!0)}),c.ReactBEM.createElement("div",{bem:"e:label"},this.props.label)))},e}(c.BaseComponent);e["default"]=p,p.contextTypes=c.BaseComponent.contextTypes},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={EVENTS:{RENDER:"render",EXPORT:"export",CLOSE:"close",ZOOM_DONE:"zoom:done",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",COLORPICKER_OPEN:"colorpicker:open",HISTORY_UPDATED:"history:update",HISTORY_UNDO:"history:undo",WINDOW_RESIZE:"window:resize",CONTROLS_SWITCHED:"controls:switched"},DEFAULTS:{TEXT:"Double-click to edit",CROP_RATIOS:[{name:"custom",ratio:"*",selected:!0},{name:"square",ratio:1},{name:"4-3",ratio:1.33},{name:"16-9",ratio:1.77}],FONTS:[{name:"helvetica",fontFamily:"Helvetica",fontWeight:"normal"},{name:"verdana",fontFamily:"Verdana",fontWeight:"normal"},{name:"timesnewroman",fontFamily:"Times New Roman",fontWeight:"normal"},{name:"impact",fontFamily:"Impact",fontWeight:"normal","default":!0}],STICKER_CATEGORIES:[{name:"glasses",label:"Glasses",stickers:[{name:"glasses-nerd",label:"Nerd glasses",images:{mediaThumb:{uri:"stickers/thumb/glasses-nerd.png",width:100,height:100},mediaBase:{uri:"stickers/base/glasses-nerd.png",width:221,height:91}}},{name:"glasses-normal",label:"Normal glasses",images:{mediaThumb:{uri:"stickers/thumb/glasses-normal.png",width:100,height:100},mediaBase:{uri:"stickers/base/glasses-normal.png",width:249,height:87}}},{name:"glasses-shutter-green",label:"Green shutter glasses",images:{mediaThumb:{uri:"stickers/thumb/glasses-shutter-green.png",width:100,height:100},mediaBase:{uri:"stickers/base/glasses-shutter-green.png",width:235,height:89}}},{name:"glasses-shutter-yellow",label:"Yellow shutter glasses",images:{mediaThumb:{uri:"stickers/thumb/glasses-shutter-yellow.png",width:100,height:100},mediaBase:{uri:"stickers/base/glasses-shutter-yellow.png",width:236,height:89}}},{name:"glasses-sun",label:"Sun glasses",images:{mediaThumb:{uri:"stickers/thumb/glasses-sun.png",width:100,height:100},mediaBase:{uri:"stickers/base/glasses-sun.png",width:250,height:87}}}]},{name:"hats",label:"Hats",stickers:[{name:"hat-cap",label:"Cap",images:{mediaThumb:{uri:"stickers/thumb/hat-cap.png",width:100,height:100},mediaBase:{uri:"stickers/base/hat-cap.png",width:237,height:189}}},{name:"hat-cylinder",label:"Cylinder",images:{mediaThumb:{uri:"stickers/thumb/hat-cylinder.png",width:100,height:100},mediaBase:{uri:"stickers/base/hat-cylinder.png",width:225,height:176}}},{name:"hat-party",label:"Party hat",images:{mediaThumb:{uri:"stickers/thumb/hat-party.png",width:100,height:100},mediaBase:{uri:"stickers/base/hat-party.png",width:140,height:226}}},{name:"hat-sheriff",label:"Sheriff hat",images:{mediaThumb:{uri:"stickers/thumb/hat-sheriff.png",width:100,height:100},mediaBase:{uri:"stickers/base/hat-sheriff.png",width:251,height:129}}}]},{name:"beards",label:"Beards",stickers:[{name:"mustache-long",label:"Long mustache",images:{mediaThumb:{uri:"stickers/thumb/mustache-long.png",width:100,height:100},mediaBase:{uri:"stickers/base/mustache-long.png",width:199,height:182}}},{name:"mustache1",label:"Brown mustache",images:{mediaThumb:{uri:"stickers/thumb/mustache1.png",width:100,height:100},mediaBase:{uri:"stickers/base/mustache1.png",width:238,height:106}}},{name:"mustache2",label:"Black mustache",images:{mediaThumb:{uri:"stickers/thumb/mustache2.png",width:100,height:100},mediaBase:{uri:"stickers/base/mustache2.png",width:250,height:82}}},{name:"mustache3",label:"Brown mustache",images:{mediaThumb:{uri:"stickers/thumb/mustache3.png",width:100,height:100},mediaBase:{uri:"stickers/base/mustache3.png",width:250,height:94}}}]},{name:"misc",label:"Misc",stickers:[{name:"heart",label:"Heart",images:{mediaThumb:{uri:"stickers/thumb/heart.png",width:100,height:100},mediaBase:{uri:"stickers/base/heart.png",width:185,height:174}}},{name:"pipe",label:"Pipe",images:{mediaThumb:{uri:"stickers/thumb/pipe.png",width:100,height:100},mediaBase:{uri:"stickers/base/pipe.png",width:240,height:112}}},{name:"snowflake",label:"Snow flake",images:{mediaThumb:{uri:"stickers/thumb/snowflake.png",width:100,height:100},mediaBase:{uri:"stickers/base/snowflake.png",width:204,height:171}}},{name:"star",label:"Star",images:{mediaThumb:{uri:"stickers/thumb/star.png",width:100,height:100},mediaBase:{uri:"stickers/base/star.png",width:201,height:191}}}]}]}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=n(257),d=o(p),h=n(260),f=o(h),m=n(255),v=o(m),g=n(252),_=o(g),y=n(253),b=o(y),E=n(256),C=o(E),S=n(254),M=o(S),x=function(t){function e(n,o,r){(0,i["default"])(this,e);var a=(0,s["default"])(this,t.call(this));return a._ui=n,a._options=o,a._mediator=r,a._ready=!1,a._padding=[0,0,0,0],a._initSDK(),a._onZoom=a._onZoom.bind(a),a._onUndo=a._onUndo.bind(a),a.operations=new v["default"](a,a._sdk,a._mediator),a.controls=new _["default"](a,a._sdk,a._mediator),a.features=new b["default"](a,a._sdk,a._mediator),a.history=new M["default"](a,a._sdk,a._mediator),a.history.on("undo",a._onUndo),a.zoom=new C["default"](a,a._sdk,a._mediator),a.zoom.on("set",a._onZoom),a._initSerializers(),a._running=!1,a._renderRequested=!0,a._renderCallbacks=[],a._animationFrameRequest=null,a.render=a.render.bind(a),a._tick=a._tick.bind(a),a._initWatermark(),a}return(0,u["default"])(e,t),e.prototype.setImage=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?this._options.editor.image:arguments[0],n=arguments.length<=1||void 0===arguments[1]||arguments[1],o=this._sdk.getRenderer(),r=new c.Vector2(e.width,e.height),i=1e6*this.getMaxMegapixels(),a=o.getMaxDimensions();n&&this.reset();var s=new f["default"](e,i,a),l=null,u=function(e){var n=arguments.length<=1||void 0===arguments[1]?r:arguments[1];arguments.length<=2||void 0===arguments[2]?null:arguments[2];t._setImage(e,l,n),t._ready=!0,t.emit("ready")};s.needsResize()?(this.emit("resize"),l=this._sdk.parseExif(e),s.resize().then(function(e){var n=e.canvas,o=e.dimensions,r=e.reason;n.src="data:image/jpeg;base64,",t.emit("resized",{dimensions:o,reason:r}),u(n,o,r)})):u(e)},e.prototype._initWatermark=function(){this._options.watermark&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.watermark}))},e.prototype._initSDK=function(){var t=this._options,e=t.logLevel,n=t.displayWelcomeMessage,o=t.debug,r=this._options.editor,i=r.smoothDownscaling,a=r.preferredRenderer,s=r.pixelRatio,l={logLevel:e,debug:o,displayWelcomeMessage:n,pixelRatio:s,smoothDownscaling:i,transparent:!0};this._sdk=new c.SDK(a,l),window.sdk=this._sdk},e.prototype._onZoom=function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.fixOffset(),this.render(function(){e._mediator.emit(c.Constants.EVENTS.ZOOM_DONE),n&&n()})},e.prototype._onUndo=function(){this.render()},e.prototype.getRotation=function(){return this._sdk.getRotation()},e.prototype.setRotation=function(t){this._sdk.setRotation(t)},e.prototype.getSpriteScale=function(){return this._sdk.getSpriteScale()},e.prototype.setSpriteScale=function(t){this._sdk.setSpriteScale(t)},e.prototype.isToolEnabled=function(t){return this._options.editor.tools.indexOf(t)!==-1},e.prototype.getMaxMegapixels=function(){var t=this._options.editor.maxMegaPixels;return c.Utils.isMobile()?t.mobile:t.desktop},e.prototype.getOutputDimensions=function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return this._sdk.getOutputDimensions(t)},e.prototype.getFinalDimensions=function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return this._sdk.getFinalDimensions(t)},e.prototype.getCanvasDimensions=function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0],e=this._sdk.getCanvas(),n=new c.Vector2(e.offsetWidth,e.offsetHeight);return t&&n.subtract(this._padding[1]+this._padding[3],this._padding[0]+this._padding[2]),n},e.prototype._setImage=function(){var t=arguments.length<=0||void 0===arguments[0]?this._options.editor.image:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this._sdk.setAllOperationsToDirty(),this._options.editor.image=t,this._sdk.setImage(t,e,n),this.zoom.set("auto"),this.emit("new-image")},e.prototype["export"]=function(){var t=this,e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty();var n=this._options.editor["export"],o=new d["default"](this._sdk,n,e);return o["export"]().then(function(e){return t.emit("export",e),t._mediator.emit(c.Constants.EVENTS.EXPORT,e,t),t._watermarkOperation&&t._watermarkOperation.setEnabled(!0),t._sdk.setAllOperationsToDirty(),e})},e.prototype._initSerializers=function(){this._serializers={"1.0.0":n(266)["default"]}},e.prototype.serialize=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?"1.0.0":arguments[1],n=this._serializers[e];if(!n)return c.Promise.reject(new Error("No serializer for version "+e+" found."));var o=new n(this);return o.serialize(t)},e.prototype.deserialize=function(t){var e=this._serializers[t.version];if(!e)return c.Promise.reject(new Error("No serializer for version "+t.version+" found."));var n=new e(this);return n.deserialize(t)},e.prototype._applyOffset=function(){var t=this._offset.clone();t.x-=this._padding[1]/2,t.x+=this._padding[3]/2,t.y-=this._padding[2]/2,t.y+=this._padding[0]/2,this._sdk.setOffset(t)},e.prototype.start=function(){this.zoom.set("auto"),this._animationFrameRequest=(0,c.requestAnimationFrame)(this._tick)},e.prototype.stop=function(){this._running=!1,this._animationFrameRequest&&((0,c.cancelAnimationFrame)(this._animationFrameRequest),this._renderCallbacks=[])},e.prototype.render=function(t){this._renderRequested=!0,t&&this._renderCallbacks.push(t)},e.prototype.setOffset=function(t){this._offset=this._clampOffset(t)},e.prototype.getOffset=function(){return this._offset},e.prototype.fixOffset=function(){this.setOffset(this._sdk.getOffset())},e.prototype._clampOffset=function(t){var e=this._sdk.getRenderer(),n=new c.Vector2(e.getWidth(),e.getHeight()),o=this._sdk.getOutputDimensions(!1),r=n.clone().subtract(o).divide(2).clamp(null,new c.Vector2(0,0)),i=o.clone().subtract(n).divide(2).clamp(new c.Vector2(0,0),null),a=t.clone().clamp(r,i).round();return a},e.prototype._tick=function(){var t=this;this._renderRequested?!function(){var e=t._renderCallbacks.slice(0);t._renderCallbacks=[],t._render().then(function(){e.forEach(function(t){return t()}),t._animationFrameRequest=(0,c.requestAnimationFrame)(t._tick)}),t._renderRequested=!1}():this._animationFrameRequest=(0,c.requestAnimationFrame)(this._tick)},e.prototype._render=function(){var t=this;return this._ready?(this._applyOffset(),this._sdk.render().then(function(){t._lastOutputBounds=t._sdk.getSprite().getBounds()})["catch"](function(e){t.emit("render-error",e)})):c.Promise.resolve()},e.prototype.reset=function(){this._sdk.reset(),this.history.reset(),this.operations.reset()},e.prototype.dispose=function(){this.stop(),this._sdk.dispose()},e.prototype.isReady=function(){return this._ready},e.prototype.getRenderer=function(){return this._sdk.getRenderer()},e.prototype.getSDK=function(){return this._sdk},e.prototype.getInputDimensions=function(){return this._sdk.getInputDimensions()},e.prototype.getPadding=function(){return this._padding},e.prototype.setPadding=function(t){t?this._padding=t:this._padding=[0,0,0,0]},e.prototype.getImage=function(){return this._options.editor.image},e.prototype.getOptions=function(){return this._options},e.prototype.getUI=function(){return this._ui},e.prototype.broadcastCrop=function(t,e){var n=this.operations.get("sprite");n&&n.crop(t,e)},e.prototype.broadcastFlip=function(t){var e=this,n=["linear-focus","radial-focus","sprite"];n.forEach(function(n){var o=e.operations.get(n);o&&o.flip(t)})},e.prototype.broadcastRotate=function(t){var e=this,n=["crop","linear-focus","radial-focus","sprite"];n.forEach(function(n){var o=e.operations.get(n);o&&o.rotate(t)})},e}(c.EventEmitter);e["default"]=x},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=r(i),s=n(204),l=o(s),u=n(1),c=function(){function t(e,n,o){(0,a["default"])(this,t),this._editor=e,this._sdk=n,this._mediator=o,this._options=this._editor.getOptions(),this._available=u.SDKUtils.extend({},l,this._options.extensions.controls)}return t.prototype.isEnabled=function(t){var e=this.get(t);return e?e.isAvailable&&e.isAvailable(this._editor):(u.Log.info("EditorControls#isEnabled: Unknown control: "+t),!1)},t.prototype.get=function(t){return this._available[t]},t.prototype.getAvailable=function(){return this._available},t}();e["default"]=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(e,n,o){(0,i["default"])(this,t),this._editor=e,this._sdk=n,this._mediator=o,this._options=this._editor.getOptions(),this._features={drag:this._options.editor.enableDrag,zoom:this._options.editor.enableZoom}}return t.prototype.isEnabled=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1),n=this._options.editor["enable"+e];return this._features[t]&&n},t.prototype.enable=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){t._features[e]=!0}),this._mediator.emit(a.Constants.EVENTS.FEATURES_ENABLED,n),this._mediator.emit(a.Constants.EVENTS.FEATURES_UPDATED,n)},t.prototype.disable=function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){t._features[e]=!1}),this._mediator.emit(a.Constants.EVENTS.FEATURES_DISABLED,n),this._mediator.emit(a.Constants.EVENTS.FEATURES_UPDATED,n)},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(n,o,r){(0,i["default"])(this,e);var a=(0,s["default"])(this,t.call(this));return a._editor=n,a._sdk=o,a._mediator=r,a._history=[],a}return(0,u["default"])(e,t),e.prototype.isAvailable=function(){return 0!==this._history.length},e.prototype.add=function(t,e,n){var o=this,r=arguments.length<=3||void 0===arguments[3]?null:arguments[3],i=void 0;if(t instanceof Array){var a=t;this._history.push(a),a.forEach(function(t){o._mediator.emit(c.Constants.EVENTS.HISTORY_UPDATED,t.operation)}),i=a}else i={operation:t,options:e,existent:n,undo:r},this._history.push(i),this._mediator.emit(c.Constants.EVENTS.HISTORY_UPDATED,t);return i},e.prototype.undo=function(){var t=this,e=this._editor.operations,n=this._history.pop();if(n){var o=[].concat(n);o.forEach(function(n){var o=n.operation,r=n.existent,i=n.options,a=n.undo;r?(o=e.getOrCreate(o.constructor.identifier),o.set(i),t._mediator.emit(c.Constants.EVENTS.OPERATION_UPDATED,o)):e.remove(o),"function"==typeof a&&a(o,i),t._mediator.emit(c.Constants.EVENTS.HISTORY_UPDATED,o),t._mediator.emit(c.Constants.EVENTS.HISTORY_UNDO,o)}),this.emit("undo")}},e.prototype.reset=function(){this._history=[]},e}(c.EventEmitter);e["default"]=p},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(e,n,o){(0,i["default"])(this,t),this._editor=e,this._sdk=n,this._mediator=o,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}return t.prototype.exists=function(t){return!!this._map[t]},t.prototype.add=function(t){var e=this,n=t.constructor.identifier;t.on("updated",function(){e._mediator.emit(a.Constants.EVENTS.OPERATION_UPDATED,t)});var o=this._preferredOrder.indexOf(n);if(o===-1)throw new Error("EditorOperations#add: `"+n+"` does not appear in `preferredOperationOrder`");this._stack.set(o,t),this._map[n]=t,this._mediator.emit(a.Constants.EVENTS.OPERATION_CREATED,t)},t.prototype.remove=function(t){var e=t.constructor.identifier,n=this._stack.getStack();this._map[e]===t&&delete this._map[e];var o=n.indexOf(t);if(o!==-1){this._stack.removeAt(o);for(var r=o+1;r<n.length;r++){var i=n[r];i&&i.setDirty(!0)}this._mediator.emit(a.Constants.EVENTS.OPERATION_REMOVED,t)}},t.prototype.get=function(t){return this._map[t]},t.prototype.getOrCreate=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(this._map[t]){var n=this._map[t];return n}var o=this._available[t],r=new o(this._sdk,e);return this.add(r),r},t.prototype.getStack=function(){return this._stack},t.prototype.reset=function(){this._map={}},t.prototype._fixStack=function(){var t=this,e=this._stack.getStack().slice();this._stack.clear(),e.forEach(function(e){t.add(e)})},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=300,d=function(t){function e(n,o,r){(0,i["default"])(this,e);var a=(0,s["default"])(this,t.call(this));return a._editor=n,a._sdk=o,a._mediator=r,a._isDefaultZoom=!1,a._zoom=a._sdk.getZoom(),a._options=a._editor.getOptions(),a._zoomLevels=[1,2,3,4,5,6.25,8.33,12.5,16.66,25,33.33,50,66.66,100,200,300,400,500,600,700,800,1200,1600,3200].map(function(t){return t/100}),a}return(0,u["default"])(e,t),e.prototype.zoomIn=function(){var t=this._getClosestZoomLevel(this._zoom+.001,1);return t?void this.set(t):this._zoomLevels[this._zoomLevels.length-1]},e.prototype.zoomOut=function(){var t=this._getClosestZoomLevel(this._zoom-.001,-1);return t?void this.set(t):this._zoomLevels[0]},e.prototype._getClosestZoomLevel=function(t,e){return e===-1?this._zoomLevels.filter(function(e){return e<t}).pop():1===e?this._zoomLevels.filter(function(e){return e>t})[0]:void 0},e.prototype.undo=function(){this._previousZoom&&(this.set(this._previousZoom),this._previousZoom=null)},e.prototype.set=function(t,e){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];if(this._editor.isReady()){this._previousZoom=this._zoom;var o=t,r=this.getDefault();"auto"===t||o===r?(o=r,t="auto",this._isDefaultZoom=!0):this._isDefaultZoom=!1;var i=Math.max(1,2*r),a=n?this.getMinimum():0;o=Math.max(a,Math.min(i,o)),this._zoom=o,this._sdk.setZoom(this._zoom),this._sdk.setTextureQuality(Math.min(this._zoom,1)),this.emit("set",this._zoom,e)}},e.prototype.getDefault=function(){var t=this._editor.getFinalDimensions(!1),e=this._editor.getCanvasDimensions(),n=c.SDKUtils.resizeVectorToFit(t,e);return n.divide(t).x},e.prototype.getMinimum=function(){var t=this._editor.getFinalDimensions(),e=c.SDKUtils.resizeVectorToFit(t,new c.Vector2(p,p));return e.divide(t).x},e.prototype.isDefault=function(){return this._isDefaultZoom},e.prototype.get=function(){return this._zoom},e}(c.EventEmitter);e["default"]=d},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=n(258),l=o(s),u=function(){function t(e,n,o){(0,i["default"])(this,t),this._sdk=e,this._options=n,this._download=o}return t.prototype["export"]=function(){var t=this,e=this._getRenderType();return this._sdk["export"](e,this._options.format,this._options.quality).then(function(n){return t._download&&t._downloadData(e,n),n})},t.prototype._downloadData=function(t,e){switch(t){case a.RenderType.DATAURL:l["default"].downloadDataURL(e,this._options.fileBasename);break;case a.RenderType.MSBLOB:l["default"].downloadMSBlob(e,this._options.fileBasename)}},t.prototype._getRenderType=function(){var t=this._options;return t.type===a.RenderType.IMAGE&&this._download?a.Utils.supportsMSBlob()?a.RenderType.MSBLOB:a.RenderType.DATAURL:t.type},t}();e["default"]=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(){(0,i["default"])(this,t)}return t.downloadDataURL=function(t){var e=arguments.length<=1||void 0===arguments[1]?"photoeditorsdk-export":arguments[1],n=this.createBlobURLFromDataURL(t),o=this.getExtensionFromDataURL(t),r=document.createElement("a");r.download=e+"."+o,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)},t.downloadMSBlob=function(t){var e=arguments.length<=1||void 0===arguments[1]?"photoeditorsdk-export":arguments[1];navigator.msSaveBlob(t,e+".png")},t.getExtensionFromDataURL=function(t){var e=t.split(",")[0].split(":")[1].split(";")[0];return e.split("/").pop()},t.createBlobURLFromDataURL=function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=a.Base64.decode(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(e.length),r=new Uint8Array(o),i=0;i<e.length;i++)r[i]=e[i];var s=new window.Blob([o],{type:n});return window.URL.createObjectURL(s)},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(3),s=o(a),l=n(2),u=o(l),c=n(1),p=function(t){function e(n){(0,i["default"])(this,e);var o=(0,s["default"])(this,t.call(this));return o._input=n,o._onFileChange=o._onFileChange.bind(o),o._input.addEventListener("change",o._onFileChange),o}return(0,u["default"])(e,t),e.prototype.open=function(){this._input.value=null,this._input.click()},e.prototype._handleFile=function(t){var e=this,n=new window.FileReader;n.onload=function(){return function(t){var n=t.target.result,o=new window.Image;o.addEventListener("load",function(){e.emit("file",o)}),o.src=n}}(t),n.readAsDataURL(t)},e.prototype._onFileChange=function(){var t=this._input.files;t.length&&this._handleFile(t[0])},e.prototype.dispose=function(){this._input.removeEventListener("change",this._onFileChange)},e}(c.EventEmitter);e["default"]=p},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(e,n,o){(0,i["default"])(this,t),this._image=e,this._maxPixels=n,this._maxDimensions=o}return t.prototype.needsResize=function(){var t=new a.Vector2(this._image.width,this._image.height),e=t.x*t.y,n=e>this._maxPixels,o=null!==this._maxDimensions&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return n||o},t.prototype.resize=function(){var t=this,e=null,n=null,o=this._maxDimensions;return new a.Promise(function(r,i){window.setTimeout(function(){var i=new a.Vector2(t._image.width,t._image.height),s=i.clone();if(s.x*s.y>t._maxPixels&&(s.copy(t._getDimensionsByMaxPixels()),e="maxMegaPixels"),null!==o&&(s.x>o||s.y>o)){var l=Math.min(o/s.x,o/s.y);s.multiply(l),e="maxDimensions"}s.floor(),n=t._createResizedImageCanvas(s),r({canvas:n,dimensions:s,reason:e})},1e3)})},t.prototype._createResizedImageCanvas=function(t){var e=arguments.length<=1||void 0===arguments[1]?t:arguments[1],n=this._image,o=document.createElement("canvas");o.width=t.x,o.height=t.y;var r=t.clone().subtract(e).divide(2),i=o.getContext("2d");return i.drawImage(n,0,0,n.width,n.height,r.x,r.y,e.x,e.y),o},t.prototype._getDimensionsByMaxPixels=function(){var t=this._image,e=this._maxPixels,n=t.width/t.height,o=t.height/t.width;return new a.Vector2(Math.sqrt(e*n),Math.sqrt(e*o)).floor()},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=function s(t){(0,i["default"])(this,s),this.name=t.name,this.coverImage=t.coverImage};e["default"]=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=function s(t,e){(0,i["default"])(this,s),this.library=t,this.title=e.title,this.urls=e.urls};e["default"]=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=function(){function t(){(0,i["default"])(this,t)}return t.prototype.getLibraries=function(){return a.Log.warn(this.constructor.name,"`getLibraries` is abstract and not implemented."),a.Promise.resolve([])},t.prototype.getSearchSuggestions=function(){return a.Log.warn(this.constructor.name,"`getSearchSuggestions` is abstract and not implemented."),a.Promise.resolve([])},t.prototype.getPhotosForLibrary=function(t){return a.Log.warn(this.constructor.name,"`getPhotosForLibrary` is abstract and not implemented."),a.Promise.resolve([])},t.prototype.searchPhotos=function(t){return a.Log.warn(this.constructor.name,"`searchPhotos` is abstract and not implemented."),
a.Promise.resolve([])},t}();e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=function s(t){(0,i["default"])(this,s),this.query=t.query,this.name=this.query,this.coverImage=t.coverImage};e["default"]=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=n(121),l=o(s),u=n(122),c=o(u),p=function(){function t(e,n){(0,i["default"])(this,t),this._editor=e,this._data=n,this._filterManager=new l["default"](this._editor._options),this._stickerManager=new c["default"](this._editor._options)}return t.prototype.deserialize=function(){var t=this;return this._validateVersion().then(function(){return t._deserializeInputImage()}).then(function(){return t._deserializeOperations()}).then(function(){return t._editor.zoom.set("auto")})},t.prototype._validateVersion=function(){return"1.0.0"!==this._data.version?Promise.reject(new Error("Invalid version "+this._data.version+", expected 1.0.0")):Promise.resolve()},t.prototype._deserializeInputImage=function(){var t=this;return new Promise(function(e,n){var o=t._data.inputImage,r=o.data,i=o.type;r&&i?!function(){var n=new window.Image;n.addEventListener("load",function(){t._editor.setImage(n),e()}),n.src="data:"+i+";base64,"+r}():e()})},t.prototype._deserializeOperations=function(){var t=this,e=this._data.operations.map(function(e){switch(e.type){case"crop":return t._deserializeCropOperation(e);case"orientation":return t._deserializeOrientationOperation(e);case"filter":return t._deserializeFilterOperation(e);case"adjustments":return t._deserializeAdjustmentsOperation(e);case"sprite":return t._deserializeSpriteOperation(e);case"focus":return t._deserializeFocusOperation(e);case"border":return t._deserializeBorderOperation(e)}});return Promise.all(e)},t.prototype._deserializeCropOperation=function(t){var e=t.options,n=e.scale,o=e.rotation,r=a.Vector2.fromObject(e.start),i=a.Vector2.fromObject(e.end);return this._editor.operations.getOrCreate("crop",{start:r,end:i,scale:n,rotation:o}),Promise.resolve()},t.prototype._deserializeOrientationOperation=function(t){var e=t.options;this._editor.operations.getOrCreate("orientation",e)},t.prototype._deserializeFilterOperation=function(t){for(var e=t.options,n=this._filterManager.getFiltersForCategory("all"),o=void 0,r=0;r<n.length;r++){var i=n[r];if(i.identifier===e.name){o=i;break}}if(!o)throw new Error("Unknown filter '"+e.name+"'");this._editor.operations.getOrCreate("filter",{filter:new o,intensity:e.intensity})},t.prototype._deserializeAdjustmentsOperation=function(t){var e=a.SDK.Operations.AdjustmentsOperation,n=t.options,o={};for(var r in n){var i=n[r],s=e.prototype.availableOptions[r]["default"];o[r]=i+s}this._editor.operations.getOrCreate("adjustments",o)},t.prototype._deserializeSpriteOperation=function(t){var e=this,n=t.options,o=this._editor.operations.getOrCreate("sprite"),r=n.sprites.map(function(t){switch(t.type){case"sticker":return e._deserializeSticker(o,t);case"text":return e._deserializeText(o,t);case"brush":return e._deserializeBrush(o,t)}}).filter(function(t){return!!t});return Promise.all(r).then(function(t){o.setSprites(t)})},t.prototype._deserializeSticker=function(t,e){for(var n=this,o=a.SDK.Operations.SpriteOperation,r=e.options,i=this._stickerManager.getStickersForCategory("all"),s=void 0,l=0;l<i.length;l++)i[l].name!==r.name||(s=i[l]);if(!s)throw new Error("Unknown sticker '"+r.name+"'");return new Promise(function(e,i){var l=new window.Image;l.addEventListener("load",function(){var n=o.Sticker.prototype.availableOptions.adjustments.structure,i=r.rotation,s=r.flipHorizontally,u=r.flipVertically;e(t.createSticker({image:l,position:a.Vector2.fromObject(r.position),dimensions:a.Vector2.fromObject(r.dimensions),rotation:i,flipHorizontally:s,flipVertically:u,adjustments:{brightness:r.adjustments.brightness+n.brightness["default"],saturation:r.adjustments.saturation+n.saturation["default"],contrast:r.adjustments.contrast+n.contrast["default"]}}))}),l.src=n._editor.getUI().getAssetPath(s.images.mediaBase.uri)})},t.prototype._deserializeText=function(t,e){var n=e.options,o=n.fontSize,r=n.lineHeight,i=n.fontFamily,s=n.fontWeight,l=n.alignment,u=n.rotation,c=n.maxWidth,p=n.color,d=n.backgroundColor;return Promise.resolve(t.createText({fontSize:o,lineHeight:r,fontFamily:i,fontWeight:s,alignment:l,rotation:u,maxWidth:c,text:n.text,color:a.Color.fromArray(p),backgroundColor:a.Color.fromArray(d),position:a.Vector2.fromObject(n.position)}))},t.prototype._deserializeBrush=function(t,e){var n=e.options,o=n.paths,r=t.createBrush();return o.forEach(function(t){var e=t.color,n=t.size,o=t.points,i=new a.Color(e[0],e[1],e[2],e[3]),s=r.createPath(n,1,i);o.forEach(function(t){s.addControlPoint(a.Vector2.fromObject(t))})}),Promise.resolve(r)},t.prototype._deserializeFocusOperation=function(t){var e=t.options.options;switch(t.options.type){case"radial":var n=e.position,o=e.radius,r=e.gradientRadius,i=e.blurRadius;this._editor.operations.getOrCreate("radial-focus",{position:a.Vector2.fromObject(n),radius:o,gradientRadius:r,blurRadius:i});break;case"linear":var s=e.start,l=e.end,u=e.size,c=e.gradientSize,p=e.blurRadius;this._editor.operations.getOrCreate("linear-focus",{start:a.Vector2.fromObject(s),end:a.Vector2.fromObject(l),size:u,gradientSize:c,blurRadius:p})}},t.prototype._deserializeBorderOperation=function(t){var e=t.options,n=e.color,o=e.size;this._editor.operations.getOrCreate("border",{color:a.Color.fromArray(n),thickness:o})},t.prototype._getInputDimensionsForOperation=function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(o){o===t&&(e=!0),e||(n=o.getNewDimensions(n))}),n},t}();e["default"]=p},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(267),s=o(a),l=n(265),u=o(l),c=function(){function t(e){(0,i["default"])(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new s["default"](this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){var e=new u["default"](this._editor,t);return e.deserialize()},t}();e["default"]=c,c.version="1.0.0"},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=o(r),a=n(1),s=2*Math.PI,l=function(){function t(e){(0,i["default"])(this,t),this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}return t.prototype.serialize=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._options=a.SDKUtils.defaults(t,{image:!0});var e={version:"1.0.0"};return this._serializeInputImage(e).then(this._serializeOperations)},t.prototype._serializeInputImage=function(t){var e=this._editor.getImage();if(!this._options.image)return t.inputImage={width:e.width,height:e.height},Promise.resolve(t);var n=new a.SDK("webgl",{image:e});return n["export"](a.RenderType.DATA_URL,a.ImageFormat.PNG).then(function(n){var o=e.width,r=e.height;return t.inputImage={type:a.ImageFormat.PNG,data:n.replace(/^data:image\/(.*?);base64,/,""),width:o,height:r},t})},t.prototype._serializeOperations=function(t){var e=this,n=[],o=this._editor.operations.getStack();return o.forEach(function(t){n.push(e._serializeOperation(t))}),t.operations=n,Promise.resolve(t)},t.prototype._serializeOperation=function(t){switch(t.constructor.identifier){case"crop":return this._serializeCropOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t);case"radial-focus":return this._serializeRadialFocusOperation(t);case"linear-focus":return this._serializeLinearFocusOperation(t);case"border":return this._serializeBorderOperation(t);default:throw new Error("Unable to serialize operation of type "+t.constructor.identifier)}},t.prototype._serializeCropOperation=function(t){var e=t.serializeOptions(["start","end","rotation","scale"]);return e.rotation=(e.rotation+s)%s,{type:"crop",options:e}},t.prototype._serializeOrientationOperation=function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"])}},t.prototype._serializeFilterOperation=function(t){return{type:"filter",options:{intensity:t.getIntensity(),name:t.getFilter().constructor.identifier}}},t.prototype._serializeAdjustmentsOperation=function(t){var e=t.availableOptions,n={};for(var o in e){var r=e[o],i=t.getOption(o);i!==r["default"]&&(n[o]=i-r["default"])}return{type:"adjustments",options:n}},t.prototype._serializeSpriteOperation=function(t){var e=this,n=t.getSprites().map(function(n){return n instanceof t.constructor.Sticker?e._serializeSticker(t,n):n instanceof t.constructor.Text?e._serializeText(t,n):n instanceof t.constructor.Brush?e._serializeBrush(t,n):void 0});return{type:"sprite",options:{sprites:n}}},t.prototype._serializeSticker=function(t,e){var n=e.getAdjustments(),o=e.serializeOptions(["name","position","dimensions","flipVertically","flipHorizontally","rotation"]);o.rotation=(o.rotation+s)%s;var r=n.availableOptions;return o.adjustments={brightness:n.getBrightness()-r.brightness["default"],saturation:n.getSaturation()-r.saturation["default"],contrast:n.getContrast()-r.contrast["default"]},{type:"sticker",options:o}},t.prototype._serializeText=function(t,e){var n=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"]);return n.rotation=(n.rotation+s)%s,{type:"text",options:n}},t.prototype._serializeBrush=function(t,e){return{type:"brush",options:{paths:e.getPaths().map(function(t){var e=t.serializeOptions(["color","thickness"]);return e.size=e.thickness,delete e.thickness,e.points=t.getControlPoints().map(function(t){return t.getPosition().toObject()}),e})}}},t.prototype._serializeRadialFocusOperation=function(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"])}}},t.prototype._serializeLinearFocusOperation=function(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"])}}},t.prototype._serializeBorderOperation=function(t){var e=t.serializeOptions(["color","thickness"]);return e.size=e.thickness,delete e.thickness,{type:"border",options:e}},t.prototype._getInputDimensionsForOperation=function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(o){o===t&&(e=!0),e||(n=o.getNewDimensions(n))}),n},t}();e["default"]=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),i=o(r),a=n(0),s=o(a),l=n(3),u=o(l),c=n(2),p=o(c),d=n(66),h=o(d),f=h["default"].EventEmitter,m=h["default"].Utils,v=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,s["default"])(this,e);var o=(0,u["default"])(this,t.call(this));return o._state=n,o}return(0,p["default"])(e,t),e.prototype.set=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]||arguments[1];"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&console&&console.trace("SharedState#set expects an object as first parameter");var n=m.extend({},this._state);this._state=m.extend(this._state,t),e&&this.broadcastUpdate(n,this._state)},e.prototype.get=function(t){return this._state[t]},e.prototype.broadcastUpdate=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.emit("update",t,e)},e.prototype.clear=function(){this._state={}},e}(f);e["default"]=v},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),i=o(r),a=n(124),s=o(a),l=n(270),u=o(l),c=n(114),p=o(c),d=i["default"].Math.Vector2,h={getInnerDimensionsForElement:function(t){var e=new d(t.offsetWidth,t.offsetHeight),n=window.getComputedStyle(t,null);return e.x-=parseInt(n.getPropertyValue("padding-left"),10),e.x-=parseInt(n.getPropertyValue("padding-right"),10),e.y-=parseInt(n.getPropertyValue("padding-top"),10),e.y-=parseInt(n.getPropertyValue("padding-bottom"),10),e},getEventPosition:function(t){var e=t.clientX,n=t.clientY;if(t.type.indexOf("touch")!==-1){if(!t.touches.length)return;e=t.touches[0].clientX,n=t.touches[0].clientY}return new d(e,n)},createTransparentPatternCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=10,t.height=10,e.fillStyle="white",e.fillRect(0,0,t.width,t.height),e.fillStyle="#cccccc",e.fillRect(0,0,t.width/2,t.height/2),e.fillRect(t.width/2,t.height/2,t.width,t.height),t},supportsMSBlob:function(){var t=document.createElement("canvas");return"undefined"!=typeof t.msToBlob},translate:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=this.fetch(t,e);if(!o)return s["default"].warn("Utils#translate","Unable to translate `"+e+"`"),e;for(var r in n)o=o.replace("${"+r+"}",n[r]);return o},fetch:function(t,e,n){e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var o=e.split("."),r=0;r<o.length;r++){var i=o[r];if(t=t[i],!t)break}return"undefined"!=typeof t&&t},isMobile:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];n||(n=function(t){return t});var o=[];return e.forEach(function(e){t.forEach(function(t){var r=n(t);r===e&&o.push(t)})}),o},getJSONP:function(t){var e=new p["default"](t);return e.load()},mergeCategories:function(t,e,n){t=t.slice(0);var o=null;return e.forEach(function(e){t.forEach(function(t){e.name===t.name&&(o=t)}),o?o[n]=o[n].concat(e[n]):t.push(e)}),t},getStyleObject:function(t){var e=window.getComputedStyle(t),n={};for(var o in e){var r=e.getPropertyValue(o),i=o.replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()});""!==r&&(n[i]=r)}return n},debounce:function(t,e,n){var o;return function(){var r=this,i=arguments,a=function(){o=null,n||t.apply(r,i)},s=n&&!o;clearTimeout(o),o=setTimeout(a,e),s&&t.apply(this,i)}},Browser:u["default"]};e["default"]=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={getIEVersion:function(){var t=navigator,e=t.userAgent,n=t.appVersion;return n.indexOf("MSIE")!==-1?n.match(/MSIE\s+?([0-9]+)/i)[1]:e.indexOf("Trident")!==-1&&e.match(/rv:([0-9]+)/i)[1]},isIE10:function(){var t=this.getIEVersion();return t!==!1&&10===t},isIE11:function(){var t=this.getIEVersion();return t!==!1&&11===t},isIElte:function(t){var e=this.getIEVersion();return e!==!1&&e<=t}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});for(var n="undefined"==typeof window?t:window,o=n.requestAnimationFrame,r=n.cancelAnimationFrame,i=0,a=["ms","moz","webkit","o"],s=0;s<a.length&&!o;++s)e.requestAnimationFrame=o=n[a[s]+"RequestAnimationFrame"],e.cancelAnimationFrame=r=n[a[s]+"CancelAnimationFrame"]||n[a[s]+"CancelRequestAnimationFrame"];o||(e.requestAnimationFrame=o=function(t,e){var n=(new Date).getTime(),o=Math.max(0,16-(n-i)),r=setTimeout(function(){t(n+o)},o);return i=n+o,r}),r||(e.cancelAnimationFrame=r=function(t){clearTimeout(t)}),e.requestAnimationFrame=o,e.cancelAnimationFrame=r}).call(e,n(169))},function(t,e,n){t.exports={"default":n(282),__esModule:!0}},function(t,e,n){t.exports={"default":n(283),__esModule:!0}},function(t,e,n){t.exports={"default":n(284),__esModule:!0}},function(t,e,n){t.exports={"default":n(285),__esModule:!0}},function(t,e,n){t.exports={"default":n(286),__esModule:!0}},function(t,e,n){t.exports={"default":n(288),__esModule:!0}},function(t,e,n){t.exports={"default":n(289),__esModule:!0}},function(t,e,n){t.exports={"default":n(290),__esModule:!0}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(274),i=o(r),a=n(273),s=o(a);e["default"]=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=(0,s["default"])(t);!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(u){r=!0,i=u}finally{try{!o&&l["return"]&&l["return"]()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i["default"])(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(272),i=o(r);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,i["default"])(t)}},function(t,e,n){n(59),n(314),t.exports=n(14).Array.from},function(t,e,n){n(88),n(59),t.exports=n(312)},function(t,e,n){n(88),n(59),t.exports=n(313)},function(t,e,n){n(316),t.exports=n(14).Object.assign},function(t,e,n){n(317);var o=n(14).Object;t.exports=function(t,e){return o.create(t,e)}},function(t,e,n){n(318);var o=n(14).Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},function(t,e,n){n(319),t.exports=n(14).Object.setPrototypeOf},function(t,e,n){n(321),n(320),n(322),n(323),t.exports=n(14).Symbol},function(t,e,n){n(59),n(88),t.exports=n(87).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,n){var o=n(33),r=n(137),i=n(311);t.exports=function(t){return function(e,n,a){var s,l=o(e),u=r(l.length),c=i(a,u);if(t&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var o=n(25),r=n(46);t.exports=function(t,e,n){e in t?o.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var o=n(45),r=n(79),i=n(57);t.exports=function(t){var e=o(t),n=r.f;if(n)for(var a,s=n(t),l=i.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){t.exports=n(24).document&&document.documentElement},function(t,e,n){var o=n(35),r=n(15)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[r]===t)}},function(t,e,n){var o=n(73);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,n){var o=n(29);t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&o(a.call(t)),i}}},function(t,e,n){"use strict";var o=n(78),r=n(46),i=n(80),a={};n(34)(a,n(15)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o(a,{next:r(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var o=n(15)("iterator"),r=!1;try{var i=[7][o]();i["return"]=function(){r=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],a=i[o]();a.next=function(){return{done:n=!0}},i[o]=function(){return a},t(i)}catch(s){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var o=n(45),r=n(33);t.exports=function(t,e){for(var n,i=r(t),a=o(i),s=a.length,l=0;s>l;)if(i[n=a[l++]]===e)return n}},function(t,e,n){var o=n(58)("meta"),r=n(44),i=n(32),a=n(25).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(43)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,o,{value:{i:"O"+ ++s,w:{}}})},p=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,o)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[o].i},d=function(t,e){if(!i(t,o)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[o].w},h=function(t){return u&&f.NEED&&l(t)&&!i(t,o)&&c(t),t},f=t.exports={KEY:o,NEED:!1,fastKey:p,getWeak:d,onFreeze:h}},function(t,e,n){"use strict";var o=n(45),r=n(79),i=n(57),a=n(84),s=n(131),l=Object.assign;t.exports=!l||n(43)(function(){var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=o})?function(t,e){for(var n=a(t),l=arguments.length,u=1,c=r.f,p=i.f;l>u;)for(var d,h=s(arguments[u++]),f=c?o(h).concat(c(h)):o(h),m=f.length,v=0;m>v;)p.call(h,d=f[v++])&&(n[d]=h[d]);return n}:l},function(t,e,n){var o=n(25),r=n(29),i=n(45);t.exports=n(30)?Object.defineProperties:function(t,e){r(t);for(var n,a=i(e),s=a.length,l=0;s>l;)o.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var o=n(33),r=n(134).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?s(t):r(o(t))}},function(t,e,n){var o=n(32),r=n(84),i=n(81)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),o(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var o=n(44),r=n(29),i=function(t,e){if(r(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n(74)(Function.call,n(133).f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var o=n(83),r=n(75);t.exports=function(t){return function(e,n){var i,a,s=String(r(e)),l=o(n),u=s.length;return l<0||l>=u?t?"":void 0:(i=s.charCodeAt(l),i<55296||i>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):i:t?s.slice(l,l+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e,n){var o=n(83),r=Math.max,i=Math.min;t.exports=function(t,e){return t=o(t),t<0?r(t+e,0):i(t,e)}},function(t,e,n){var o=n(29),r=n(138);t.exports=n(14).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return o(e.call(t))}},function(t,e,n){var o=n(128),r=n(15)("iterator"),i=n(35);t.exports=n(14).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||i.hasOwnProperty(o(e))}},function(t,e,n){"use strict";var o=n(74),r=n(31),i=n(84),a=n(299),s=n(297),l=n(137),u=n(294),c=n(138);r(r.S+r.F*!n(301)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,p,d=i(t),h="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=0,_=c(d);if(v&&(m=o(m,f>2?arguments[2]:void 0,2)),void 0==_||h==Array&&s(_))for(e=l(d.length),n=new h(e);e>g;g++)u(n,g,v?m(d[g],g):d[g]);else for(p=_.call(d),n=new h;!(r=p.next()).done;g++)u(n,g,v?a(p,m,[r.value,g],!0):r.value);return n.length=g,n}})},function(t,e,n){"use strict";var o=n(292),r=n(302),i=n(35),a=n(33);t.exports=n(132)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){var o=n(31);o(o.S+o.F,"Object",{assign:n(305)})},function(t,e,n){var o=n(31);o(o.S,"Object",{create:n(78)})},function(t,e,n){var o=n(31);o(o.S+o.F*!n(30),"Object",{defineProperty:n(25).f})},function(t,e,n){var o=n(31);o(o.S,"Object",{setPrototypeOf:n(309).set})},function(t,e){},function(t,e,n){"use strict";var o=n(24),r=n(32),i=n(30),a=n(31),s=n(136),l=n(304).KEY,u=n(43),c=n(82),p=n(80),d=n(58),h=n(15),f=n(87),m=n(86),v=n(303),g=n(295),_=n(298),y=n(29),b=n(33),E=n(85),C=n(46),S=n(78),M=n(307),x=n(133),R=n(25),k=n(45),w=x.f,P=R.f,B=M.f,D=o.Symbol,T=o.JSON,O=T&&T.stringify,A="prototype",I=h("_hidden"),N=h("toPrimitive"),F={}.propertyIsEnumerable,U=c("symbol-registry"),L=c("symbols"),j=c("op-symbols"),V=Object[A],z="function"==typeof D,W=o.QObject,K=!W||!W[A]||!W[A].findChild,H=i&&u(function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var o=w(V,e);o&&delete V[e],P(t,e,n),o&&t!==V&&P(V,e,o)}:P,$=function(t){var e=L[t]=S(D[A]);return e._k=t,e},q=z&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},Y=function(t,e,n){return t===V&&Y(j,e,n),y(t),e=E(e,!0),y(n),r(L,e)?(n.enumerable?(r(t,I)&&t[I][e]&&(t[I][e]=!1),n=S(n,{enumerable:C(0,!1)})):(r(t,I)||P(t,I,C(1,{})),t[I][e]=!0),H(t,e,n)):P(t,e,n)},Z=function(t,e){y(t);for(var n,o=g(e=b(e)),r=0,i=o.length;i>r;)Y(t,n=o[r++],e[n]);return t},G=function(t,e){return void 0===e?S(t):Z(S(t),e)},X=function(t){var e=F.call(this,t=E(t,!0));return!(this===V&&r(L,t)&&!r(j,t))&&(!(e||!r(this,t)||!r(L,t)||r(this,I)&&this[I][t])||e)},Q=function(t,e){if(t=b(t),e=E(e,!0),t!==V||!r(L,e)||r(j,e)){var n=w(t,e);return!n||!r(L,e)||r(t,I)&&t[I][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=B(b(t)),o=[],i=0;n.length>i;)r(L,e=n[i++])||e==I||e==l||o.push(e);return o},tt=function(t){for(var e,n=t===V,o=B(n?j:b(t)),i=[],a=0;o.length>a;)!r(L,e=o[a++])||n&&!r(V,e)||i.push(L[e]);return i};z||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(j,n),r(this,I)&&r(this[I],t)&&(this[I][t]=!1),H(this,t,C(1,n))};return i&&K&&H(V,t,{configurable:!0,set:e}),$(t)},s(D[A],"toString",function(){return this._k}),x.f=Q,R.f=Y,n(134).f=M.f=J,n(57).f=X,n(79).f=tt,i&&!n(77)&&s(V,"propertyIsEnumerable",X,!0),f.f=function(t){return $(h(t))}),a(a.G+a.W+a.F*!z,{Symbol:D});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var et=k(h.store),nt=0;et.length>nt;)m(et[nt++]);a(a.S+a.F*!z,"Symbol",{"for":function(t){return r(U,t+="")?U[t]:U[t]=D(t)},keyFor:function(t){if(q(t))return v(U,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!z,"Object",{create:G,defineProperty:Y,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:tt}),T&&a(a.S+a.F*(!z||u(function(){var t=D();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,n,o=[t],r=1;arguments.length>r;)o.push(arguments[r++]);return e=o[1],"function"==typeof e&&(n=e),!n&&_(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!q(e))return e}),o[1]=e,O.apply(T,o)}}}),D[A][N]||n(34)(D[A],N,D[A].valueOf),p(D,"Symbol"),p(Math,"Math",!0),p(o.JSON,"JSON",!0)},function(t,e,n){n(86)("asyncIterator")},function(t,e,n){n(86)("observable")},function(t,e){"use strict";function n(t){return t.replace(o,function(t,e){return e.toUpperCase()})}var o=/-(.)/g;t.exports=n},function(t,e,n){"use strict";function o(t){return r(t.replace(i,"ms-"))}var r=n(324),i=/^-ms-/;t.exports=o},function(t,e,n){"use strict";function o(t,e){return!(!t||!e)&&(t===e||!r(t)&&(r(e)?o(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var r=n(334);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?a(!1):void 0,"number"!=typeof e?a(!1):void 0,0===e||e-1 in t?void 0:a(!1),"function"==typeof t.callee?a(!1):void 0,t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var o=Array(e),r=0;r<e;r++)o[r]=t[r];return o}function r(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function i(t){return r(t)?Array.isArray(t)?t.slice():o(t):[t]}var a=n(4);t.exports=i},function(t,e,n){"use strict";function o(t){var e=t.match(c);return e&&e[1].toLowerCase()}function r(t,e){var n=u;u?void 0:l(!1);var r=o(t),i=r&&s(r);if(i){n.innerHTML=i[1]+t+i[2];for(var c=i[0];c--;)n=n.lastChild}else n.innerHTML=t;var p=n.getElementsByTagName("script");p.length&&(e?void 0:l(!1),a(p).forEach(e));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var i=n(9),a=n(327),s=n(329),l=n(4),u=i.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=r},function(t,e,n){"use strict";function o(t){return a?void 0:i(!1),d.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?d[t]:null}var r=n(9),i=n(4),a=r.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},h=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];h.forEach(function(t){d[t]=p,s[t]=!0}),t.exports=o},function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},function(t,e){"use strict";function n(t){return t.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;t.exports=n},function(t,e,n){"use strict";function o(t){return r(t).replace(i,"-ms-")}var r=n(331),i=/^ms-/;t.exports=o},function(t,e){"use strict";function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},function(t,e,n){"use strict";function o(t){return r(t)&&3==t.nodeType}var r=n(333);t.exports=o},function(t,e){
"use strict";function n(t,e,n){if(!t)return null;var r={};for(var i in t)o.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var o=Object.prototype.hasOwnProperty;t.exports=n},function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},function(t,e,n){(function(e){(function(){var n,o,r;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-r)/1e6},o=e.hrtime,n=function(){var t;return t=o(),1e9*t[0]+t[1]},r=n()):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(e,n(48))},function(t,e,n){(function(t,o){var r;!function(i){function a(t){throw new RangeError(T[t])}function s(t,e){for(var n=t.length,o=[];n--;)o[n]=e(t[n]);return o}function l(t,e){var n=t.split("@"),o="";n.length>1&&(o=n[0]+"@",t=n[1]),t=t.replace(D,".");var r=t.split("."),i=s(r,e).join(".");return o+i}function u(t){for(var e,n,o=[],r=0,i=t.length;r<i;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<i?(n=t.charCodeAt(r++),56320==(64512&n)?o.push(((1023&e)<<10)+(1023&n)+65536):(o.push(e),r--)):o.push(e);return o}function c(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=I(t>>>10&1023|55296),t=56320|1023&t),e+=I(t)}).join("")}function p(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:E}function d(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function h(t,e,n){var o=0;for(t=n?A(t/x):t>>1,t+=A(t/e);t>O*S>>1;o+=E)t=A(t/O);return A(o+(O+1)*t/(t+M))}function f(t){var e,n,o,r,i,s,l,u,d,f,m=[],v=t.length,g=0,_=k,y=R;for(n=t.lastIndexOf(w),n<0&&(n=0),o=0;o<n;++o)t.charCodeAt(o)>=128&&a("not-basic"),m.push(t.charCodeAt(o));for(r=n>0?n+1:0;r<v;){for(i=g,s=1,l=E;r>=v&&a("invalid-input"),u=p(t.charCodeAt(r++)),(u>=E||u>A((b-g)/s))&&a("overflow"),g+=u*s,d=l<=y?C:l>=y+S?S:l-y,!(u<d);l+=E)f=E-d,s>A(b/f)&&a("overflow"),s*=f;e=m.length+1,y=h(g-i,e,0==i),A(g/e)>b-_&&a("overflow"),_+=A(g/e),g%=e,m.splice(g++,0,_)}return c(m)}function m(t){var e,n,o,r,i,s,l,c,p,f,m,v,g,_,y,M=[];for(t=u(t),v=t.length,e=k,n=0,i=R,s=0;s<v;++s)m=t[s],m<128&&M.push(I(m));for(o=r=M.length,r&&M.push(w);o<v;){for(l=b,s=0;s<v;++s)m=t[s],m>=e&&m<l&&(l=m);for(g=o+1,l-e>A((b-n)/g)&&a("overflow"),n+=(l-e)*g,e=l,s=0;s<v;++s)if(m=t[s],m<e&&++n>b&&a("overflow"),m==e){for(c=n,p=E;f=p<=i?C:p>=i+S?S:p-i,!(c<f);p+=E)y=c-f,_=E-f,M.push(I(d(f+y%_,0))),c=A(y/_);M.push(I(d(c,0))),i=h(n,g,o==r),n=0,++o}++n,++e}return M.join("")}function v(t){return l(t,function(t){return P.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return l(t,function(t){return B.test(t)?"xn--"+m(t):t})}var _=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);_.global!==_&&_.window!==_&&_.self!==_||(i=_);var y,b=2147483647,E=36,C=1,S=26,M=38,x=700,R=72,k=128,w="-",P=/^xn--/,B=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=E-C,A=Math.floor,I=String.fromCharCode;y={version:"1.4.1",ucs2:{decode:u,encode:c},decode:f,encode:m,toASCII:g,toUnicode:v},r=function(){return y}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(409)(t),n(169))},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var p,d,h,f,m=t[c].replace(s,"%20"),v=m.indexOf(r);v>=0?(p=m.substr(0,v),d=m.substr(v+1)):(p=m,d=""),h=decodeURIComponent(p),f=decodeURIComponent(d),n(a,h)?o(a[h])?a[h].push(f):a[h]=[a[h],f]:a[h]=f}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e){"use strict";function n(t,e){if(t.map)return t.map(e);for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o));return n}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,a,s){return e=e||"&",a=a||"=",null===t&&(t=void 0),"object"==typeof t?n(i(t),function(i){var s=encodeURIComponent(o(i))+a;return r(t[i])?n(t[i],function(t){return s+encodeURIComponent(o(t))}).join(e):s+encodeURIComponent(o(t[i]))}).join(e):s?encodeURIComponent(o(s))+a+encodeURIComponent(o(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";e.decode=e.parse=n(339),e.encode=e.stringify=n(340)},function(t,e,n){"use strict";t.exports=n(355)},function(t,e,n){"use strict";var o=n(8),r=n(140),i={focusDOMComponent:function(){r(o.getNodeFromInstance(this))}};t.exports=i},function(t,e,n){"use strict";function o(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function r(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function i(t){switch(t){case w.topCompositionStart:return P.compositionStart;case w.topCompositionEnd:return P.compositionEnd;case w.topCompositionUpdate:return P.compositionUpdate}}function a(t,e){return t===w.topKeyDown&&e.keyCode===E}function s(t,e){switch(t){case w.topKeyUp:return b.indexOf(e.keyCode)!==-1;case w.topKeyDown:return e.keyCode!==E;case w.topKeyPress:case w.topMouseDown:case w.topBlur:return!0;default:return!1}}function l(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function u(t,e,n,o){var r,u;if(C?r=i(t):D?s(t,n)&&(r=P.compositionEnd):a(t,n)&&(r=P.compositionStart),!r)return null;x&&(D||r!==P.compositionStart?r===P.compositionEnd&&D&&(u=D.getData()):D=v.getPooled(o));var c=g.getPooled(r,e,n,o);if(u)c.data=u;else{var p=l(n);null!==p&&(c.data=p)}return f.accumulateTwoPhaseDispatches(c),c}function c(t,e){switch(t){case w.topCompositionEnd:return l(e);case w.topKeyPress:var n=e.which;return n!==R?null:(B=!0,k);case w.topTextInput:var o=e.data;return o===k&&B?null:o;default:return null}}function p(t,e){if(D){if(t===w.topCompositionEnd||s(t,e)){var n=D.getData();return v.release(D),D=null,n}return null}switch(t){case w.topPaste:return null;case w.topKeyPress:return e.which&&!r(e)?String.fromCharCode(e.which):null;case w.topCompositionEnd:return x?null:e.data;default:return null}}function d(t,e,n,o){var r;if(r=M?c(t,n):p(t,n),!r)return null;var i=_.getPooled(P.beforeInput,e,n,o);return i.data=r,f.accumulateTwoPhaseDispatches(i),i}var h=n(22),f=n(50),m=n(9),v=n(350),g=n(388),_=n(391),y=n(26),b=[9,13,27,32],E=229,C=m.canUseDOM&&"CompositionEvent"in window,S=null;m.canUseDOM&&"documentMode"in document&&(S=document.documentMode);var M=m.canUseDOM&&"TextEvent"in window&&!S&&!o(),x=m.canUseDOM&&(!C||S&&S>8&&S<=11),R=32,k=String.fromCharCode(R),w=h.topLevelTypes,P={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[w.topCompositionEnd,w.topKeyPress,w.topTextInput,w.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[w.topBlur,w.topCompositionEnd,w.topKeyDown,w.topKeyPress,w.topKeyUp,w.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[w.topBlur,w.topCompositionStart,w.topKeyDown,w.topKeyPress,w.topKeyUp,w.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[w.topBlur,w.topCompositionUpdate,w.topKeyDown,w.topKeyPress,w.topKeyUp,w.topMouseDown]}},B=!1,D=null,T={eventTypes:P,extractEvents:function(t,e,n,o){return[u(t,e,n,o),d(t,e,n,o)]}};t.exports=T},function(t,e,n){"use strict";var o=n(142),r=n(9),i=(n(10),n(325),n(398)),a=n(332),s=n(336),l=(n(6),s(function(t){return a(t)})),u=!1,c="cssFloat";if(r.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(d){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var h={createMarkupForStyles:function(t,e){var n="";for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];null!=r&&(n+=l(o)+":",n+=i(o,r,e)+";")}return n||null},setValueForStyles:function(t,e,n){var r=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=i(a,e[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)r[a]=s;else{var l=u&&o.shorthandPropertyExpansions[a];if(l)for(var p in l)r[p]="";else r[a]=""}}}};t.exports=h},function(t,e,n){"use strict";function o(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function r(t){var e=M.getPooled(B.change,T,t,x(t));b.accumulateTwoPhaseDispatches(e),S.batchedUpdates(i,e)}function i(t){y.enqueueEvents(t),y.processEventQueue(!1)}function a(t,e){D=t,T=e,D.attachEvent("onchange",r)}function s(){D&&(D.detachEvent("onchange",r),D=null,T=null)}function l(t,e){if(t===P.topChange)return e}function u(t,e,n){t===P.topFocus?(s(),a(e,n)):t===P.topBlur&&s()}function c(t,e){D=t,T=e,O=t.value,A=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(D,"value",F),D.attachEvent?D.attachEvent("onpropertychange",d):D.addEventListener("propertychange",d,!1)}function p(){D&&(delete D.value,D.detachEvent?D.detachEvent("onpropertychange",d):D.removeEventListener("propertychange",d,!1),D=null,T=null,O=null,A=null)}function d(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==O&&(O=e,r(t))}}function h(t,e){if(t===P.topInput)return e}function f(t,e,n){t===P.topFocus?(p(),c(e,n)):t===P.topBlur&&p()}function m(t,e){if((t===P.topSelectionChange||t===P.topKeyUp||t===P.topKeyDown)&&D&&D.value!==O)return O=D.value,T}function v(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function g(t,e){if(t===P.topClick)return e}var _=n(22),y=n(49),b=n(50),E=n(9),C=n(8),S=n(21),M=n(23),x=n(108),R=n(109),k=n(167),w=n(26),P=_.topLevelTypes,B={change:{phasedRegistrationNames:{bubbled:w({onChange:null}),captured:w({onChangeCapture:null})},dependencies:[P.topBlur,P.topChange,P.topClick,P.topFocus,P.topInput,P.topKeyDown,P.topKeyUp,P.topSelectionChange]}},D=null,T=null,O=null,A=null,I=!1;E.canUseDOM&&(I=R("change")&&(!("documentMode"in document)||document.documentMode>8));var N=!1;E.canUseDOM&&(N=R("input")&&(!("documentMode"in document)||document.documentMode>11));var F={get:function(){return A.get.call(this)},set:function(t){O=""+t,A.set.call(this,t)}},U={eventTypes:B,extractEvents:function(t,e,n,r){var i,a,s=e?C.getNodeFromInstance(e):window;if(o(s)?I?i=l:a=u:k(s)?N?i=h:(i=m,a=f):v(s)&&(i=g),i){var c=i(t,e);if(c){var p=M.getPooled(B.change,c,n,r);return p.type="change",b.accumulateTwoPhaseDispatches(p),p}}a&&a(t,s,e)}};t.exports=U},function(t,e,n){"use strict";var o=n(5),r=n(36),i=n(9),a=n(328),s=n(16),l=(n(4),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(i.canUseDOM?void 0:o("56"),e?void 0:o("57"),"HTML"===t.nodeName?o("58"):void 0,"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else r.replaceChildWithTree(t,e)}});t.exports=l},function(t,e,n){"use strict";var o=n(26),r=[o({ResponderEventPlugin:null}),o({SimpleEventPlugin:null}),o({TapEventPlugin:null}),o({EnterLeaveEventPlugin:null}),o({ChangeEventPlugin:null}),o({SelectEventPlugin:null}),o({BeforeInputEventPlugin:null})];t.exports=r},function(t,e,n){"use strict";var o=n(22),r=n(50),i=n(8),a=n(63),s=n(26),l=o.topLevelTypes,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(t,e,n,o){if(t===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==l.topMouseOut&&t!==l.topMouseOver)return null;var s;if(o.window===o)s=o;else{var c=o.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var p,d;if(t===l.topMouseOut){p=e;var h=n.relatedTarget||n.toElement;d=h?i.getClosestInstanceFromNode(h):null}else p=null,d=e;if(p===d)return null;var f=null==p?s:i.getNodeFromInstance(p),m=null==d?s:i.getNodeFromInstance(d),v=a.getPooled(u.mouseLeave,p,n,o);v.type="mouseleave",v.target=f,v.relatedTarget=m;var g=a.getPooled(u.mouseEnter,d,n,o);return g.type="mouseenter",g.target=m,g.relatedTarget=f,r.accumulateEnterLeaveDispatches(v,g,p,d),[v,g]}};t.exports=c},function(t,e,n){"use strict";function o(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var r=n(7),i=n(27),a=n(165);r(o.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,o=n.length,r=this.getText(),i=r.length;for(t=0;t<o&&n[t]===r[t];t++);var a=o-t;for(e=1;e<=a&&n[o-e]===r[i-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=r.slice(t,s),this._fallbackText}}),i.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";var o=n(37),r=o.injection.MUST_USE_PROPERTY,i=o.injection.HAS_BOOLEAN_VALUE,a=o.injection.HAS_NUMERIC_VALUE,s=o.injection.HAS_POSITIVE_NUMERIC_VALUE,l=o.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+o.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|i,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,coords:0,crossOrigin:0,data:0,dateTime:0,"default":i,defer:i,dir:0,disabled:i,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|i,muted:r|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:r|i,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=u},function(t,e,n){"use strict";var o=n(7),r=n(145),i=n(96),a=n(378),s=n(146),l=n(360),u=n(20),c=n(157),p=n(158),d=n(404),h=(n(6),u.createElement),f=u.createFactory,m=u.cloneElement,v=o,g={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:d},Component:i,PureComponent:a,createElement:h,cloneElement:m,isValidElement:u.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:f,createMixin:function(t){return t},DOM:l,version:p,__spread:v};t.exports=g},function(t,e,n){"use strict";(function(e){function o(t,e,n,o){var r=void 0===t[n];null!=e&&r&&(t[n]=i(e,!0))}var r=n(38),i=n(166),a=(n(94),n(110)),s=n(111),l=(n(6),{instantiateChildren:function(t,e,n,r){if(null==t)return null;var i={};return s(t,o,i),i},updateChildren:function(t,e,n,o,s,l,u,c){if(e||t){var p,d;for(p in e)if(e.hasOwnProperty(p)){d=t&&t[p];var h=d&&d._currentElement,f=e[p];if(null!=d&&a(h,f))r.receiveComponent(d,f,s,c),e[p]=d;else{d&&(o[p]=r.getHostNode(d),r.unmountComponent(d,!1));var m=i(f,!0);e[p]=m;var v=r.mountComponent(m,s,l,u,c);n.push(v)}}for(p in t)!t.hasOwnProperty(p)||e&&e.hasOwnProperty(p)||(d=t[p],o[p]=r.getHostNode(d),r.unmountComponent(d,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];r.unmountComponent(o,e)}}});t.exports=l}).call(e,n(48))},function(t,e,n){"use strict";function o(t){}function r(t,e){}function i(t){return!(!t.prototype||!t.prototype.isReactComponent)}function a(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var s=n(5),l=n(7),u=n(97),c=n(28),p=n(20),d=n(99),h=n(51),f=(n(10),n(156)),m=(n(102),n(38)),v=n(397),g=n(47),_=(n(4),n(89)),y=n(110),b=(n(6),{ImpureClass:0,PureClass:1,StatelessFunctional:2});o.prototype.render=function(){var t=h.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return r(t,e),e};var E=1,C={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,l){this._context=l,this._mountOrder=E++,this._hostParent=e,this._hostContainerInfo=n;var u,c=this._currentElement.props,d=this._processContext(l),f=this._currentElement.type,m=t.getUpdateQueue(),v=i(f),_=this._constructComponent(v,c,d,m);v||null!=_&&null!=_.render?a(f)?this._compositeType=b.PureClass:this._compositeType=b.ImpureClass:(u=_,r(f,u),null===_||_===!1||p.isValidElement(_)?void 0:s("105",f.displayName||f.name||"Component"),_=new o(f),this._compositeType=b.StatelessFunctional);_.props=c,_.context=d,_.refs=g,_.updater=m,this._instance=_,h.set(_,this);var y=_.state;void 0===y&&(_.state=y=null),"object"!=typeof y||Array.isArray(y)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var C;C=_.unstable_handleError?this.performInitialMountWithErrorHandling(u,e,n,t,l):this.performInitialMount(u,e,n,t,l),_.componentDidMount&&t.getReactMountReady().enqueue(_.componentDidMount,_);return C},_constructComponent:function(t,e,n,o){return this._constructComponentWithoutOwner(t,e,n,o)},_constructComponentWithoutOwner:function(t,e,n,o){var r,i=this._currentElement.type;return r=t?new i(e,n,o):i(e,n,o)},performInitialMountWithErrorHandling:function(t,e,n,o,r){var i,a=o.checkpoint();try{i=this.performInitialMount(t,e,n,o,r)}catch(s){o.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=o.checkpoint(),this._renderedComponent.unmountComponent(!0),o.rollback(a),i=this.performInitialMount(t,e,n,o,r)}return i},performInitialMount:function(t,e,n,o,r){var i=this._instance;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===t&&(t=this._renderValidatedComponent());var a=f.getType(t);this._renderedNodeType=a;var s=this._instantiateReactComponent(t,a!==f.EMPTY);this._renderedComponent=s;var l=m.mountComponent(s,o,e,n,this._processChildContext(r));return l},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";d.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,h.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return g;var o={};for(var r in n)o[r]=t[r];return o},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof e.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var r in o)r in e.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",r);return l({},t,o)}return t},_checkContextTypes:function(t,e,n){v(t,e,n,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var o=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(e,o,t,r,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,o,r){var i=this._instance;null==i?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,l=!1;this._context===r?a=i.context:(a=this._processContext(r),l=!0);var u=e.props,c=n.props;e!==n&&(l=!0),l&&i.componentWillReceiveProps&&i.componentWillReceiveProps(c,a);var p=this._processPendingState(c,a),d=!0;this._pendingForceUpdate||(i.shouldComponentUpdate?d=i.shouldComponentUpdate(c,p,a):this._compositeType===b.PureClass&&(d=!_(u,c)||!_(i.state,p))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,p,a,t,r)):(this._currentElement=n,this._context=r,i.props=c,i.state=p,i.context=a)},_processPendingState:function(t,e){var n=this._instance,o=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(r&&1===o.length)return o[0];for(var i=l({},r?o[0]:n.state),a=r?1:0;a<o.length;a++){var s=o[a];l(i,"function"==typeof s?s.call(n,i,t,e):s)}return i},_performComponentUpdate:function(t,e,n,o,r,i){var a,s,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(a=u.props,s=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(e,n,o),this._currentElement=t,this._context=i,u.props=e,u.state=n,u.context=o,this._updateRenderedComponent(r,i),c&&r.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,a,s,l),u)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,o=n._currentElement,r=this._renderValidatedComponent();if(y(o,r))m.receiveComponent(n,r,t,this._processChildContext(e));else{var i=m.getHostNode(n);m.unmountComponent(n,!1);var a=f.getType(r);this._renderedNodeType=a;var s=this._instantiateReactComponent(r,a!==f.EMPTY);this._renderedComponent=s;var l=m.mountComponent(s,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e));this._replaceNodeWithMarkup(i,l,n)}},_replaceNodeWithMarkup:function(t,e,n){u.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return e},_renderValidatedComponent:function(){var t;if(this._compositeType!==b.StatelessFunctional){c.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||t===!1||p.isValidElement(t)?void 0:s("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n?s("110"):void 0;var o=e.getPublicInstance(),r=n.refs===g?n.refs={}:n.refs;r[t]=o},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===b.StatelessFunctional?null:t},_instantiateReactComponent:null},S={Mixin:C};t.exports=S},function(t,e,n){"use strict";var o=n(8),r=n(371),i=n(154),a=n(38),s=n(21),l=n(158),u=n(399),c=n(163),p=n(406);n(6);r.inject();var d={findDOMNode:u,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:o.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=c(t)),t?o.getNodeFromInstance(t):null}},Mount:i,Reconciler:a});t.exports=d},function(t,e,n){"use strict";var o=n(61),r={getHostProps:o.getHostProps};t.exports=r},function(t,e,n){"use strict";function o(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function r(t,e){e&&(Q[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?m("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?m("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&$ in e.dangerouslySetInnerHTML?void 0:m("61")),null!=e.style&&"object"!=typeof e.style?m("62",o(t)):void 0)}function i(t,e,n,o){if(!(o instanceof N)){var r=t._hostContainerInfo,i=r._node&&r._node.nodeType===Y,s=i?r._node:r._ownerDocument;z(e,s),o.getReactMountReady().enqueue(a,{inst:t,registrationName:e,listener:n})}}function a(){var t=this;M.putListener(t.inst,t.registrationName,t.listener)}function s(){var t=this;D.postMountWrapper(t)}function l(){var t=this;A.postMountWrapper(t)}function u(){var t=this;T.postMountWrapper(t)}function c(){var t=this;t._rootNodeID?void 0:m("63");var e=V(t);switch(e?void 0:m("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[R.trapBubbledEvent(S.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in Z)Z.hasOwnProperty(n)&&t._wrapperState.listeners.push(R.trapBubbledEvent(S.topLevelTypes[n],Z[n],e));break;case"source":t._wrapperState.listeners=[R.trapBubbledEvent(S.topLevelTypes.topError,"error",e)];break;case"img":t._wrapperState.listeners=[R.trapBubbledEvent(S.topLevelTypes.topError,"error",e),R.trapBubbledEvent(S.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[R.trapBubbledEvent(S.topLevelTypes.topReset,"reset",e),R.trapBubbledEvent(S.topLevelTypes.topSubmit,"submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[R.trapBubbledEvent(S.topLevelTypes.topInvalid,"invalid",e)]}}function p(){O.postUpdateWrapper(this)}function d(t){et.call(tt,t)||(J.test(t)?void 0:m("65",t),tt[t]=!0)}function h(t,e){return t.indexOf("-")>=0||null!=e.is}function f(t){var e=t.type;d(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=null,this._domID=null,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(5),v=n(7),g=n(343),_=n(345),y=n(36),b=n(91),E=n(37),C=n(144),S=n(22),M=n(49),x=n(92),R=n(62),k=n(147),w=n(356),P=n(148),B=n(8),D=n(363),T=n(365),O=n(149),A=n(368),I=(n(10),n(376)),N=n(381),F=(n(16),n(64)),U=(n(4),n(109),n(26)),L=(n(89),n(112),n(6),P),j=M.deleteListener,V=B.getNodeFromInstance,z=R.listenTo,W=x.registrationNameModules,K={string:!0,number:!0},H=U({style:null}),$=U({__html:null}),q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},Y=11,Z={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},G={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},X={listing:!0,pre:!0,textarea:!0},Q=v({menuitem:!0},G),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,tt={},et={}.hasOwnProperty,nt=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(t,e,n,o){this._rootNodeID=nt++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var i=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(c,this);break;case"button":i=w.getHostProps(this,i,e);break;case"input":D.mountWrapper(this,i,e),i=D.getHostProps(this,i),t.getReactMountReady().enqueue(c,this);break;case"option":T.mountWrapper(this,i,e),i=T.getHostProps(this,i);break;case"select":O.mountWrapper(this,i,e),i=O.getHostProps(this,i),t.getReactMountReady().enqueue(c,this);break;case"textarea":A.mountWrapper(this,i,e),i=A.getHostProps(this,i),t.getReactMountReady().enqueue(c,this)}r(this,i);var a,p;null!=e?(a=e._namespaceURI,p=e._tag):n._tag&&(a=n._namespaceURI,p=n._tag),(null==a||a===b.svg&&"foreignobject"===p)&&(a=b.html),a===b.html&&("svg"===this._tag?a=b.svg:"math"===this._tag&&(a=b.mathml)),this._namespaceURI=a;var d;if(t.useCreateElement){var h,f=n._ownerDocument;if(a===b.html)if("script"===this._tag){var m=f.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",h=m.removeChild(m.firstChild)}else h=i.is?f.createElement(this._currentElement.type,i.is):f.createElement(this._currentElement.type);else h=f.createElementNS(a,this._currentElement.type);B.precacheNode(this,h),this._flags|=L.hasCachedChildNodes,this._hostParent||C.setAttributeForRoot(h),this._updateDOMProperties(null,i,t);var _=y(h);this._createInitialChildren(t,i,o,_),d=_}else{var E=this._createOpenTagMarkupAndPutListeners(t,i),S=this._createContentMarkup(t,i,o);d=!S&&G[this._tag]?E+"/>":E+">"+S+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(s,this),i.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(l,this),i.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":i.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"button":i.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(u,this)}return d},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];if(null!=r)if(W.hasOwnProperty(o))r&&i(this,o,r,t);else{o===H&&(r&&(r=this._previousStyleCopy=v({},e.style)),r=_.createMarkupForStyles(r,this));var a=null;null!=this._tag&&h(this._tag,e)?q.hasOwnProperty(o)||(a=C.createMarkupForCustomAttribute(o,r)):a=C.createMarkupForProperty(o,r),a&&(n+=" "+a)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+C.createMarkupForRoot()),n+=" "+C.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var o="",r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(o=r.__html);else{var i=K[typeof e.children]?e.children:null,a=null!=i?null:e.children;
if(null!=i)o=F(i);else if(null!=a){var s=this.mountChildren(a,t,n);o=s.join("")}}return X[this._tag]&&"\n"===o.charAt(0)?"\n"+o:o},_createInitialChildren:function(t,e,n,o){var r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&y.queueHTML(o,r.__html);else{var i=K[typeof e.children]?e.children:null,a=null!=i?null:e.children;if(null!=i)y.queueText(o,i);else if(null!=a)for(var s=this.mountChildren(a,t,n),l=0;l<s.length;l++)y.queueChild(o,s[l])}},receiveComponent:function(t,e,n){var o=this._currentElement;this._currentElement=t,this.updateComponent(e,o,t,n)},updateComponent:function(t,e,n,o){var i=e.props,a=this._currentElement.props;switch(this._tag){case"button":i=w.getHostProps(this,i),a=w.getHostProps(this,a);break;case"input":D.updateWrapper(this),i=D.getHostProps(this,i),a=D.getHostProps(this,a);break;case"option":i=T.getHostProps(this,i),a=T.getHostProps(this,a);break;case"select":i=O.getHostProps(this,i),a=O.getHostProps(this,a);break;case"textarea":A.updateWrapper(this),i=A.getHostProps(this,i),a=A.getHostProps(this,a)}r(this,a),this._updateDOMProperties(i,a,t),this._updateDOMChildren(i,a,t,o),"select"===this._tag&&t.getReactMountReady().enqueue(p,this)},_updateDOMProperties:function(t,e,n){var o,r,a;for(o in t)if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&null!=t[o])if(o===H){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(a=a||{},a[r]="");this._previousStyleCopy=null}else W.hasOwnProperty(o)?t[o]&&j(this,o):h(this._tag,t)?q.hasOwnProperty(o)||C.deleteValueForAttribute(V(this),o):(E.properties[o]||E.isCustomAttribute(o))&&C.deleteValueForProperty(V(this),o);for(o in e){var l=e[o],u=o===H?this._previousStyleCopy:null!=t?t[o]:void 0;if(e.hasOwnProperty(o)&&l!==u&&(null!=l||null!=u))if(o===H)if(l?l=this._previousStyleCopy=v({},l):this._previousStyleCopy=null,u){for(r in u)!u.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(a=a||{},a[r]="");for(r in l)l.hasOwnProperty(r)&&u[r]!==l[r]&&(a=a||{},a[r]=l[r])}else a=l;else if(W.hasOwnProperty(o))l?i(this,o,l,n):u&&j(this,o);else if(h(this._tag,e))q.hasOwnProperty(o)||C.setValueForAttribute(V(this),o,l);else if(E.properties[o]||E.isCustomAttribute(o)){var c=V(this);null!=l?C.setValueForProperty(c,o,l):C.deleteValueForProperty(c,o)}}a&&_.setValueForStyles(V(this),a,this)},_updateDOMChildren:function(t,e,n,o){var r=K[typeof t.children]?t.children:null,i=K[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,l=null!=r?null:t.children,u=null!=i?null:e.children,c=null!=r||null!=a,p=null!=i||null!=s;null!=l&&null==u?this.updateChildren(null,n,o):c&&!p&&this.updateTextContent(""),null!=i?r!==i&&this.updateTextContent(""+i):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,o)},getHostNode:function(){return V(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(t),B.uncacheNode(this),M.deleteAllListeners(this),k.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._domID=null,this._wrapperState=null},getPublicInstance:function(){return V(this)}},v(f.prototype,f.Mixin,I.Mixin),t.exports=f},function(t,e,n){"use strict";function o(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===r?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var r=(n(112),9);t.exports=o},function(t,e,n){"use strict";var o=n(7),r=n(36),i=n(8),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=null};o(a.prototype,{mountComponent:function(t,e,n,o){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return i.precacheNode(this,u),r(u)}return t.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),t.exports=a},function(t,e,n){"use strict";function o(t){return r.createFactory(t)}var r=n(20),i=n(335),a=i({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},o);t.exports=a},function(t,e){"use strict";var n={useCreateElement:!0};t.exports=n},function(t,e,n){"use strict";var o=n(90),r=n(8),i={dangerouslyProcessChildrenUpdates:function(t,e){var n=r.getNodeFromInstance(t);o.processUpdates(n,e)}};t.exports=i},function(t,e,n){"use strict";function o(){this._rootNodeID&&d.updateWrapper(this)}function r(t){var e=this._currentElement.props,n=u.executeOnChange(e,t);p.asap(o,this);var r=e.name;if("radio"===e.type&&null!=r){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),d=0;d<l.length;d++){var h=l[d];if(h!==a&&h.form===a.form){var f=c.getInstanceFromNode(h);f?void 0:i("90"),p.asap(o,f)}}}return n}var i=n(5),a=n(7),s=n(61),l=n(144),u=n(95),c=n(8),p=n(21),d=(n(4),n(6),{getHostProps:function(t,e){var n=u.getValue(e),o=u.getChecked(e),r=a({type:void 0,step:void 0},s.getHostProps(t,e),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=o?o:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return r},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:r.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(t),"checked",n||!1);var o=c.getNodeFromInstance(t),r=u.getValue(e);if(null!=r){var i=""+r;i!==o.value&&(o.value=i)}else null==e.value&&null!=e.defaultValue&&(o.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(o.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=c.getNodeFromInstance(t);"submit"!==e.type&&"reset"!==e.type&&(n.value=n.value);var o=n.name;""!==o&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==o&&(n.name=o)}});t.exports=d},function(t,e,n){"use strict";var o=null;t.exports={debugTool:o}},function(t,e,n){"use strict";function o(t){var e="";return i.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:l||(l=!0))}),e}var r=n(7),i=n(145),a=n(8),s=n(149),l=(n(6),!1),u={mountWrapper:function(t,e,n){var r=null;if(null!=n){var i=n;"optgroup"===i._tag&&(i=i._hostParent),null!=i&&"select"===i._tag&&(r=s.getSelectValueContext(i))}var a=null;if(null!=r){var l;if(l=null!=e.value?e.value+"":o(e.children),a=!1,Array.isArray(r)){for(var u=0;u<r.length;u++)if(""+r[u]===l){a=!0;break}}else a=""+r===l}t._wrapperState={selected:a}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){var n=a.getNodeFromInstance(t);n.setAttribute("value",e.value)}},getHostProps:function(t,e){var n=r({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var i=o(e.children);return i&&(n.children=i),n}};t.exports=u},function(t,e,n){"use strict";function o(t,e,n,o){return t===n&&e===o}function r(t){var e=document.selection,n=e.createRange(),o=n.text.length,r=n.duplicate();r.moveToElementText(t),r.setEndPoint("EndToStart",n);var i=r.text.length,a=i+o;return{start:i,end:a}}function i(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,r=e.anchorOffset,i=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(l){return null}var u=o(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:s.toString().length,p=s.cloneRange();p.selectNodeContents(t),p.setEnd(s.startContainer,s.startOffset);var d=o(p.startContainer,p.startOffset,p.endContainer,p.endOffset),h=d?0:p.toString().length,f=h+c,m=document.createRange();m.setStart(n,r),m.setEnd(i,a);var v=m.collapsed;return{start:v?f:h,end:v?h:f}}function a(t,e){var n,o,r=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,o=n):e.start>e.end?(n=e.end,o=e.start):(n=e.start,o=e.end),r.moveToElementText(t),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",o-n),r.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),o=t[c()].length,r=Math.min(e.start,o),i=void 0===e.end?r:Math.min(e.end,o);if(!n.extend&&r>i){var a=i;i=r,r=a}var s=u(t,r),l=u(t,i);if(s&&l){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(p),n.extend(l.node,l.offset)):(p.setEnd(l.node,l.offset),n.addRange(p))}}}var l=n(9),u=n(402),c=n(165),p=l.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?r:i,setOffsets:p?a:s};t.exports=d},function(t,e,n){"use strict";var o=n(5),r=n(7),i=n(90),a=n(36),s=n(8),l=(n(10),n(64)),u=(n(4),n(112),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=null,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});r(u.prototype,{mountComponent:function(t,e,n,o){var r=n._idCounter++,i=" react-text: "+r+" ",u=" /react-text ";if(this._domID=r,this._hostParent=e,t.useCreateElement){var c=n._ownerDocument,p=c.createComment(i),d=c.createComment(u),h=a(c.createDocumentFragment());return a.queueChild(h,a(p)),this._stringText&&a.queueChild(h,a(c.createTextNode(this._stringText))),a.queueChild(h,a(d)),s.precacheNode(this,p),this._closingComment=d,h}var f=l(this._stringText);return t.renderToStaticMarkup?f:"<!--"+i+"-->"+f+"<!--"+u+"-->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var o=this.getHostNode();i.replaceDelimitedText(o[0],o[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n?o("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=u},function(t,e,n){"use strict";function o(){this._rootNodeID&&p.updateWrapper(this)}function r(t){var e=this._currentElement.props,n=l.executeOnChange(e,t);return c.asap(o,this),n}var i=n(5),a=n(7),s=n(61),l=n(95),u=n(8),c=n(21),p=(n(4),n(6),{getHostProps:function(t,e){null!=e.dangerouslySetInnerHTML?i("91"):void 0;var n=a({},s.getHostProps(t,e),{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var n=l.getValue(e),o=n;if(null==n){var a=e.defaultValue,s=e.children;null!=s&&(null!=a?i("92"):void 0,Array.isArray(s)&&(s.length<=1?void 0:i("93"),s=s[0]),a=""+s),null==a&&(a=""),o=a}t._wrapperState={initialValue:""+o,listeners:null,onChange:r.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=u.getNodeFromInstance(t),o=l.getValue(e);if(null!=o){var r=""+o;r!==n.value&&(n.value=r),null==e.defaultValue&&(n.defaultValue=r)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=u.getNodeFromInstance(t);e.value=e.textContent}});t.exports=p},function(t,e,n){"use strict";function o(t,e){"_hostNode"in t?void 0:l("33"),"_hostNode"in e?void 0:l("33");for(var n=0,o=t;o;o=o._hostParent)n++;for(var r=0,i=e;i;i=i._hostParent)r++;for(;n-r>0;)t=t._hostParent,n--;for(;r-n>0;)e=e._hostParent,r--;for(var a=n;a--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function r(t,e){"_hostNode"in t?void 0:l("35"),"_hostNode"in e?void 0:l("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function i(t){return"_hostNode"in t?void 0:l("36"),t._hostParent}function a(t,e,n){for(var o=[];t;)o.push(t),t=t._hostParent;var r;for(r=o.length;r-- >0;)e(o[r],!1,n);for(r=0;r<o.length;r++)e(o[r],!0,n)}function s(t,e,n,r,i){for(var a=t&&e?o(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var l=[];e&&e!==a;)l.push(e),e=e._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],!0,r);for(u=l.length;u-- >0;)n(l[u],!1,i)}var l=n(5);n(4);t.exports={isAncestor:r,getLowestCommonAncestor:o,getParentInstance:i,traverseTwoPhase:a,traverseEnterLeave:s}},function(t,e,n){"use strict";function o(){this.reinitializeTransaction()}var r=n(7),i=n(21),a=n(53),s=n(16),l={initialize:s,close:function(){d.isBatchingUpdates=!1}},u={initialize:s,close:i.flushBatchedUpdates.bind(i)},c=[u,l];r(o.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var p=new o,d={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,o,r,i){var a=d.isBatchingUpdates;d.isBatchingUpdates=!0,a?t(e,n,o,r,i):p.perform(t,null,e,n,o,r,i)}};t.exports=d},function(t,e,n){"use strict";function o(){C||(C=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(a),g.EventPluginUtils.injectComponentTree(p),g.EventPluginUtils.injectTreeTraversal(h),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:E,EnterLeaveEventPlugin:s,ChangeEventPlugin:i,SelectEventPlugin:b,BeforeInputEventPlugin:r}),g.HostComponent.injectGenericComponentClass(c),g.HostComponent.injectTextComponentClass(f),g.DOMProperty.injectDOMPropertyConfig(l),g.DOMProperty.injectDOMPropertyConfig(y),g.EmptyComponent.injectEmptyComponentFactory(function(t){return new d(t)}),g.Updates.injectReconcileTransaction(_),g.Updates.injectBatchingStrategy(m),g.Component.injectEnvironment(u))}var r=n(344),i=n(346),a=n(348),s=n(349),l=n(351),u=n(147),c=n(357),p=n(8),d=n(359),h=n(369),f=n(367),m=n(370),v=n(373),g=n(374),_=n(379),y=n(383),b=n(384),E=n(385),C=!1;t.exports={inject:o}},function(t,e,n){"use strict";function o(t){r.enqueueEvents(t),r.processEventQueue(!1)}var r=n(49),i={handleTopLevel:function(t,e,n,i){var a=r.extractEvents(t,e,n,i);o(a)}};t.exports=i},function(t,e,n){"use strict";function o(t){for(;t._hostParent;)t=t._hostParent;var e=p.getNodeFromInstance(t),n=e.parentNode;return p.getClosestInstanceFromNode(n)}function r(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function i(t){var e=h(t.nativeEvent),n=p.getClosestInstanceFromNode(e),r=n;do t.ancestors.push(r),r=r&&o(r);while(r);for(var i=0;i<t.ancestors.length;i++)n=t.ancestors[i],m._handleTopLevel(t.topLevelType,n,t.nativeEvent,h(t.nativeEvent))}function a(t){var e=f(window);t(e)}var s=n(7),l=n(139),u=n(9),c=n(27),p=n(8),d=n(21),h=n(108),f=n(330);s(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(t){m._handleTopLevel=t},setEnabled:function(t){m._enabled=!!t},isEnabled:function(){return m._enabled},trapBubbledEvent:function(t,e,n){var o=n;return o?l.listen(o,e,m.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var o=n;return o?l.capture(o,e,m.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);l.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(m._enabled){var n=r.getPooled(t,e);try{d.batchedUpdates(i,n)}finally{r.release(n)}}}};t.exports=m},function(t,e,n){"use strict";var o=n(37),r=n(49),i=n(93),a=n(97),s=n(146),l=n(150),u=n(62),c=n(152),p=n(21),d={Component:a.injection,Class:s.injection,DOMProperty:o.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,EventPluginUtils:i.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:p.injection};t.exports=d},function(t,e,n){"use strict";var o=n(396),r=/\/?>/,i=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=o(t);return i.test(t)?t:t.replace(r," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=o(t);return r===n}};t.exports=a},function(t,e,n){"use strict";function o(t,e,n){return{type:d.INSERT_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function r(t,e,n){return{type:d.MOVE_EXISTING,content:null,fromIndex:t._mountIndex,fromNode:h.getHostNode(t),toIndex:n,afterNode:e}}function i(t,e){return{type:d.REMOVE_NODE,content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:d.SET_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:d.TEXT_CONTENT,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(t,e){return e&&(t=t||[],t.push(e)),t}function u(t,e){p.processChildrenUpdates(t,e)}var c=n(5),p=n(97),d=(n(51),n(10),n(155)),h=(n(28),n(38)),f=n(353),m=(n(16),n(400)),v=(n(4),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return f.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,o,r,i){var a;return a=m(e),f.updateChildren(t,a,n,o,r,this,this._hostContainerInfo,i),a},mountChildren:function(t,e,n){var o=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=o;var r=[],i=0;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a],l=h.mountComponent(s,e,this,this._hostContainerInfo,n);s._mountIndex=i++,r.push(l)}return r},updateTextContent:function(t){var e=this._renderedChildren;f.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var o=[s(t)];u(this,o)},updateMarkup:function(t){var e=this._renderedChildren;f.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var o=[a(t)];u(this,o)},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var o=this._renderedChildren,r={},i=[],a=this._reconcilerUpdateChildren(o,t,i,r,e,n);if(a||o){var s,c=null,p=0,d=0,f=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=o&&o[s],g=a[s];v===g?(c=l(c,this.moveChild(v,m,p,d)),d=Math.max(v._mountIndex,d),v._mountIndex=p):(v&&(d=Math.max(v._mountIndex,d)),c=l(c,this._mountChildAtIndex(g,i[f],m,p,e,n)),f++),p++,m=h.getHostNode(g)}for(s in r)r.hasOwnProperty(s)&&(c=l(c,this._unmountChild(o[s],r[s])));c&&u(this,c),this._renderedChildren=a}},unmountChildren:function(t){var e=this._renderedChildren;f.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,o){if(t._mountIndex<o)return r(t,e,n)},createChild:function(t,e,n){return o(n,e,t._mountIndex)},removeChild:function(t,e){return i(t,e)},_mountChildAtIndex:function(t,e,n,o,r,i){return t._mountIndex=o,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=v},function(t,e,n){"use strict";var o=n(5),r=(n(4),{isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){r.isValidOwner(n)?void 0:o("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r.isValidOwner(n)?void 0:o("120");var i=n.getPublicInstance();i&&i.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=r},function(t,e,n){"use strict";function o(t,e,n){this.props=t,this.context=e,this.refs=l,this.updater=n||s}function r(){}var i=n(7),a=n(96),s=n(100),l=n(47);r.prototype=a.prototype,o.prototype=new r,o.prototype.constructor=o,i(o.prototype,a.prototype),o.prototype.isPureReactComponent=!0,t.exports=o},function(t,e,n){"use strict";function o(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=t}var r=n(7),i=n(143),a=n(27),s=n(62),l=n(153),u=(n(10),n(53)),c=n(104),p={initialize:l.getSelectionInformation,close:l.restoreSelection},d={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[p,d,h],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};r(o.prototype,u.Mixin,m),a.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";function o(t,e,n){"function"==typeof t?t(e.getPublicInstance()):i.addComponentAsRefTo(e,t,n)}function r(t,e,n){"function"==typeof t?t(null):i.removeComponentAsRefFrom(e,t,n)}var i=n(377),a={};a.attachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&o(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null===t||t===!1,o=null===e||e===!1;return n||o||e.ref!==t.ref||"string"==typeof e.ref&&e._owner!==t._owner},a.detachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&r(n,t,e._owner)}},t.exports=a},function(t,e,n){"use strict";function o(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new s(this)}var r=n(7),i=n(27),a=n(53),s=(n(10),n(382)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(o.prototype,a.Mixin,c),i.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){}var i=n(104),a=(n(53),n(6),function(){function t(e){o(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&i.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?i.enqueueForceUpdate(t):r(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?i.enqueueReplaceState(t,e):r(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?i.enqueueSetState(t,e):r(t,"setState")},t}());t.exports=a},function(t,e){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},r={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(o).forEach(function(t){r.Properties[t]=0,o[t]&&(r.DOMAttributeNames[t]=o[t])}),t.exports=r},function(t,e,n){"use strict";function o(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(t,e){if(E||null==_||_!==p())return null;var n=o(_);if(!b||!f(b,n)){b=n;var r=c.getPooled(g.select,y,t,e);return r.type="select",r.target=_,a.accumulateTwoPhaseDispatches(r),r}return null}var i=n(22),a=n(50),s=n(9),l=n(8),u=n(153),c=n(23),p=n(141),d=n(167),h=n(26),f=n(89),m=i.topLevelTypes,v=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:h({onSelect:null}),captured:h({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},_=null,y=null,b=null,E=!1,C=!1,S=h({onSelect:null}),M={eventTypes:g,extractEvents:function(t,e,n,o){if(!C)return null;var i=e?l.getNodeFromInstance(e):window;switch(t){case m.topFocus:(d(i)||"true"===i.contentEditable)&&(_=i,y=e,b=null);break;case m.topBlur:_=null,y=null,b=null;break;case m.topMouseDown:E=!0;break;case m.topContextMenu:case m.topMouseUp:return E=!1,r(n,o);case m.topSelectionChange:if(v)break;case m.topKeyDown:case m.topKeyUp:return r(n,o)}return null},didPutListener:function(t,e,n){e===S&&(C=!0)}};t.exports=M},function(t,e,n){"use strict";function o(t){return"."+t._rootNodeID}var r=n(5),i=n(22),a=n(139),s=n(50),l=n(8),u=n(386),c=n(387),p=n(23),d=n(390),h=n(392),f=n(63),m=n(389),v=n(393),g=n(394),_=n(52),y=n(395),b=n(16),E=n(106),C=(n(4),n(26)),S=i.topLevelTypes,M={abort:{phasedRegistrationNames:{bubbled:C({onAbort:!0}),captured:C({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:C({onAnimationEnd:!0}),captured:C({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:C({onAnimationIteration:!0}),captured:C({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:C({onAnimationStart:!0}),captured:C({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:C({onBlur:!0}),captured:C({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:C({onCanPlay:!0}),captured:C({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{
bubbled:C({onCanPlayThrough:!0}),captured:C({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:C({onClick:!0}),captured:C({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:C({onContextMenu:!0}),captured:C({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:C({onCopy:!0}),captured:C({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:C({onCut:!0}),captured:C({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:C({onDoubleClick:!0}),captured:C({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:C({onDrag:!0}),captured:C({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:C({onDragEnd:!0}),captured:C({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:C({onDragEnter:!0}),captured:C({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:C({onDragExit:!0}),captured:C({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:C({onDragLeave:!0}),captured:C({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:C({onDragOver:!0}),captured:C({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:C({onDragStart:!0}),captured:C({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:C({onDrop:!0}),captured:C({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:C({onDurationChange:!0}),captured:C({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:C({onEmptied:!0}),captured:C({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:C({onEncrypted:!0}),captured:C({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:C({onEnded:!0}),captured:C({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:C({onError:!0}),captured:C({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:C({onFocus:!0}),captured:C({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:C({onInput:!0}),captured:C({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:C({onInvalid:!0}),captured:C({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:C({onKeyDown:!0}),captured:C({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:C({onKeyPress:!0}),captured:C({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:C({onKeyUp:!0}),captured:C({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:C({onLoad:!0}),captured:C({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:C({onLoadedData:!0}),captured:C({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:C({onLoadedMetadata:!0}),captured:C({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:C({onLoadStart:!0}),captured:C({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:C({onMouseDown:!0}),captured:C({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:C({onMouseMove:!0}),captured:C({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:C({onMouseOut:!0}),captured:C({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:C({onMouseOver:!0}),captured:C({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:C({onMouseUp:!0}),captured:C({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:C({onPaste:!0}),captured:C({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:C({onPause:!0}),captured:C({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:C({onPlay:!0}),captured:C({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:C({onPlaying:!0}),captured:C({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:C({onProgress:!0}),captured:C({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:C({onRateChange:!0}),captured:C({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:C({onReset:!0}),captured:C({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:C({onScroll:!0}),captured:C({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:C({onSeeked:!0}),captured:C({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:C({onSeeking:!0}),captured:C({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:C({onStalled:!0}),captured:C({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:C({onSubmit:!0}),captured:C({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:C({onSuspend:!0}),captured:C({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:C({onTimeUpdate:!0}),captured:C({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:C({onTouchCancel:!0}),captured:C({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:C({onTouchEnd:!0}),captured:C({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:C({onTouchMove:!0}),captured:C({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:C({onTouchStart:!0}),captured:C({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:C({onTransitionEnd:!0}),captured:C({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:C({onVolumeChange:!0}),captured:C({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:C({onWaiting:!0}),captured:C({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:C({onWheel:!0}),captured:C({onWheelCapture:!0})}}},x={topAbort:M.abort,topAnimationEnd:M.animationEnd,topAnimationIteration:M.animationIteration,topAnimationStart:M.animationStart,topBlur:M.blur,topCanPlay:M.canPlay,topCanPlayThrough:M.canPlayThrough,topClick:M.click,topContextMenu:M.contextMenu,topCopy:M.copy,topCut:M.cut,topDoubleClick:M.doubleClick,topDrag:M.drag,topDragEnd:M.dragEnd,topDragEnter:M.dragEnter,topDragExit:M.dragExit,topDragLeave:M.dragLeave,topDragOver:M.dragOver,topDragStart:M.dragStart,topDrop:M.drop,topDurationChange:M.durationChange,topEmptied:M.emptied,topEncrypted:M.encrypted,topEnded:M.ended,topError:M.error,topFocus:M.focus,topInput:M.input,topInvalid:M.invalid,topKeyDown:M.keyDown,topKeyPress:M.keyPress,topKeyUp:M.keyUp,topLoad:M.load,topLoadedData:M.loadedData,topLoadedMetadata:M.loadedMetadata,topLoadStart:M.loadStart,topMouseDown:M.mouseDown,topMouseMove:M.mouseMove,topMouseOut:M.mouseOut,topMouseOver:M.mouseOver,topMouseUp:M.mouseUp,topPaste:M.paste,topPause:M.pause,topPlay:M.play,topPlaying:M.playing,topProgress:M.progress,topRateChange:M.rateChange,topReset:M.reset,topScroll:M.scroll,topSeeked:M.seeked,topSeeking:M.seeking,topStalled:M.stalled,topSubmit:M.submit,topSuspend:M.suspend,topTimeUpdate:M.timeUpdate,topTouchCancel:M.touchCancel,topTouchEnd:M.touchEnd,topTouchMove:M.touchMove,topTouchStart:M.touchStart,topTransitionEnd:M.transitionEnd,topVolumeChange:M.volumeChange,topWaiting:M.waiting,topWheel:M.wheel};for(var R in x)x[R].dependencies=[R];var k=C({onClick:null}),w={},P={eventTypes:M,extractEvents:function(t,e,n,o){var i=x[t];if(!i)return null;var a;switch(t){case S.topAbort:case S.topCanPlay:case S.topCanPlayThrough:case S.topDurationChange:case S.topEmptied:case S.topEncrypted:case S.topEnded:case S.topError:case S.topInput:case S.topInvalid:case S.topLoad:case S.topLoadedData:case S.topLoadedMetadata:case S.topLoadStart:case S.topPause:case S.topPlay:case S.topPlaying:case S.topProgress:case S.topRateChange:case S.topReset:case S.topSeeked:case S.topSeeking:case S.topStalled:case S.topSubmit:case S.topSuspend:case S.topTimeUpdate:case S.topVolumeChange:case S.topWaiting:a=p;break;case S.topKeyPress:if(0===E(n))return null;case S.topKeyDown:case S.topKeyUp:a=h;break;case S.topBlur:case S.topFocus:a=d;break;case S.topClick:if(2===n.button)return null;case S.topContextMenu:case S.topDoubleClick:case S.topMouseDown:case S.topMouseMove:case S.topMouseOut:case S.topMouseOver:case S.topMouseUp:a=f;break;case S.topDrag:case S.topDragEnd:case S.topDragEnter:case S.topDragExit:case S.topDragLeave:case S.topDragOver:case S.topDragStart:case S.topDrop:a=m;break;case S.topTouchCancel:case S.topTouchEnd:case S.topTouchMove:case S.topTouchStart:a=v;break;case S.topAnimationEnd:case S.topAnimationIteration:case S.topAnimationStart:a=u;break;case S.topTransitionEnd:a=g;break;case S.topScroll:a=_;break;case S.topWheel:a=y;break;case S.topCopy:case S.topCut:case S.topPaste:a=c}a?void 0:r("86",t);var l=a.getPooled(i,e,n,o);return s.accumulateTwoPhaseDispatches(l),l},didPutListener:function(t,e,n){if(e===k){var r=o(t),i=l.getNodeFromInstance(t);w[r]||(w[r]=a.listen(i,"click",b))}},willDeleteListener:function(t,e){if(e===k){var n=o(t);w[n].remove(),delete w[n]}}};t.exports=P},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(23),i={animationName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(23),i={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(23),i={data:null};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(63),i={dataTransfer:null};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(52),i={relatedTarget:null};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(23),i={data:null};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(52),i=n(106),a=n(401),s=n(107),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?i(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?i(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};r.augmentClass(o,l),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(52),i=n(107),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(o,a),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(23),i={propertyName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(o,i),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return r.call(this,t,e,n,o)}var r=n(63),i={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(o,i),t.exports=o},function(t,e){"use strict";function n(t){for(var e=1,n=0,r=0,i=t.length,a=i&-4;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)n+=(e+=t.charCodeAt(r))+(e+=t.charCodeAt(r+1))+(e+=t.charCodeAt(r+2))+(e+=t.charCodeAt(r+3));e%=o,n%=o}for(;r<i;r++)n+=e+=t.charCodeAt(r);return e%=o,n%=o,e|n<<16}var o=65521;t.exports=n},function(t,e,n){"use strict";(function(e){function o(t,e,n,o,l,u){for(var c in t)if(t.hasOwnProperty(c)){var p;try{"function"!=typeof t[c]?r("84",o||"React class",i[n],c):void 0,p=t[c](e,c,o,n,null,a)}catch(d){p=d}if(p instanceof Error&&!(p.message in s)){s[p.message]=!0}}}var r=n(5),i=n(101),a=n(103),s=(n(4),n(6),{});t.exports=o}).call(e,n(48))},function(t,e,n){"use strict";function o(t,e,n){var o=null==e||"boolean"==typeof e||""===e;if(o)return"";var r=isNaN(e);if(r||0===e||i.hasOwnProperty(t)&&i[t])return""+e;if("string"==typeof e){e=e.trim()}return e+"px"}var r=n(142),i=(n(6),r.isUnitlessNumber);t.exports=o},function(t,e,n){"use strict";function o(t){if(null==t)return null;if(1===t.nodeType)return t;var e=a.get(t);return e?(e=s(e),e?i.getNodeFromInstance(e):null):void("function"==typeof t.render?r("44"):r("45",Object.keys(t)))}var r=n(5),i=(n(28),n(8)),a=n(51),s=n(163);n(4),n(6);t.exports=o},function(t,e,n){"use strict";(function(e){function o(t,e,n,o){if(t&&"object"==typeof t){var r=t,i=void 0===r[n];i&&null!=e&&(r[n]=e)}}function r(t,e){if(null==t)return t;var n={};return i(t,o,n),n}var i=(n(94),n(111));n(6);t.exports=r}).call(e,n(48))},function(t,e,n){"use strict";function o(t){if(t.key){var e=i[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=r(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var r=n(106),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=o},function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function r(t,e){for(var r=n(t),i=0,a=0;r;){if(3===r.nodeType){if(a=i+r.textContent.length,i<=e&&a>=e)return{node:r,offset:e-i};i=a}r=n(o(r))}}t.exports=r},function(t,e,n){"use strict";function o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function r(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in l)return s[t]=e[n];return""}var i=n(9),a={animationend:o("Animation","AnimationEnd"),animationiteration:o("Animation","AnimationIteration"),animationstart:o("Animation","AnimationStart"),transitionend:o("Transition","TransitionEnd")},s={},l={};i.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=r},function(t,e,n){"use strict";function o(t){return i.isValidElement(t)?void 0:r("23"),t}var r=n(5),i=n(20);n(4);t.exports=o},function(t,e,n){"use strict";function o(t){return'"'+r(t)+'"'}var r=n(64);t.exports=o},function(t,e,n){"use strict";var o=n(154);t.exports=o.renderSubtreeIntoContainer},function(t,e,n){"use strict";function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,n){if(t&&u.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}function i(t){return u.isString(t)&&(t=r(t)),t instanceof o?t.format():o.prototype.format.call(t)}function a(t,e){return r(t,!1,!0).resolve(e)}function s(t,e){return t?r(t,!1,!0).resolveObject(e):e}var l=n(338),u=n(408);e.parse=r,e.resolve=a,e.resolveObject=s,e.format=i,e.Url=o;var c=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(h),m=["'"].concat(f),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],_=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=n(341);o.prototype.parse=function(t,e,n){if(!u.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),r=o!==-1&&o<t.indexOf("#")?"?":"#",i=t.split(r),a=/\\/g;i[0]=i[0].replace(a,"/"),t=i.join(r);var s=t;if(s=s.trim(),!n&&1===t.split("#").length){var p=d.exec(s);if(p)return this.path=s,this.href=s,this.pathname=p[1],p[2]?(this.search=p[2],e?this.query=M.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=c.exec(s);if(h){h=h[0];var f=h.toLowerCase();this.protocol=f,s=s.substr(h.length)}if(n||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===s.substr(0,2);!x||h&&C[h]||(s=s.substr(2),this.slashes=!0)}if(!C[h]&&(x||h&&!S[h])){for(var R=-1,k=0;k<g.length;k++){var w=s.indexOf(g[k]);w!==-1&&(R===-1||w<R)&&(R=w)}var P,B;B=R===-1?s.lastIndexOf("@"):s.lastIndexOf("@",R),B!==-1&&(P=s.slice(0,B),s=s.slice(B+1),this.auth=decodeURIComponent(P)),R=-1;for(var k=0;k<v.length;k++){var w=s.indexOf(v[k]);w!==-1&&(R===-1||w<R)&&(R=w)}R===-1&&(R=s.length),this.host=s.slice(0,R),s=s.slice(R),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var T=this.hostname.split(/\./),k=0,O=T.length;k<O;k++){var A=T[k];if(A&&!A.match(y)){for(var I="",N=0,F=A.length;N<F;N++)I+=A.charCodeAt(N)>127?"x":A[N];if(!I.match(y)){var U=T.slice(0,k),L=T.slice(k+1),j=A.match(b);j&&(U.push(j[1]),L.unshift(j[2])),L.length&&(s="/"+L.join(".")+s),this.hostname=U.join(".");break}}}this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=l.toASCII(this.hostname));var V=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+V,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!E[f])for(var k=0,O=m.length;k<O;k++){var W=m[k];if(s.indexOf(W)!==-1){var K=encodeURIComponent(W);K===W&&(K=escape(W)),s=s.split(W).join(K)}}var H=s.indexOf("#");H!==-1&&(this.hash=s.substr(H),s=s.slice(0,H));var $=s.indexOf("?");if($!==-1?(this.search=s.substr($),this.query=s.substr($+1),e&&(this.query=M.parse(this.query)),s=s.slice(0,$)):e&&(this.search="",this.query={}),s&&(this.pathname=s),S[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",q=this.search||"";this.path=V+q}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",o=this.hash||"",r=!1,i="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(i=M.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+r+n+a+o},o.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(u.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(n[c]=t[c])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol]){for(var p=Object.keys(t),d=0;d<p.length;d++){var h=p[d];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||C[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=_||g||n.host&&t.pathname,b=y,E=n.pathname&&n.pathname.split("/")||[],f=t.pathname&&t.pathname.split("/")||[],M=n.protocol&&!S[n.protocol];if(M&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),y=y&&(""===f[0]||""===E[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),n.search=t.search,n.query=t.query;else if(!u.isNullOrUndefined(t.search)){if(M){n.hostname=n.host=E.shift();var x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");x&&(n.auth=x.shift(),n.host=n.hostname=x.shift())}return n.search=t.search,n.query=t.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var R=E.slice(-1)[0],k=(n.host||t.host||E.length>1)&&("."===R||".."===R)||""===R,w=0,P=E.length;P>=0;P--)R=E[P],"."===R?E.splice(P,1):".."===R?(E.splice(P,1),w++):w&&(E.splice(P,1),w--);if(!y&&!b)for(;w--;w)E.unshift("..");!y||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),k&&"/"!==E.join("/").substr(-1)&&E.push("");var B=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(M){n.hostname=n.host=B?"":E.length?E.shift():"";var x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");x&&(n.auth=x.shift(),n.host=n.hostname=x.shift())}return y=y||n.host&&E.length,y&&!B&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,configurable:!1,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,configurable:!1,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(0),a=r(i),s=n(3),l=r(s),u=n(2),c=r(u),p=n(1),d=n(170),h=r(d),f=n(17),m=r(f),v=n(11),g=r(v),_=n(18),y=r(_),b=n(114),E=r(b),C=n(171),S=o(C),M=n(12),x=r(M),R=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,a["default"])(this,e);var o=(0,l["default"])(this,t.call(this));return o._mediator=new p.EventEmitter,o._options=n,o._initOptions(),o._initLanguage(),o._initEvents(),o._disposed=!1,o.run(),o}return(0,c["default"])(e,t),e.prototype.run=function(){this._registerWebFonts(),this._options.container.style.position="relative",this._render()},e.prototype._render=function(){var t=p.React.createElement(h["default"],{ui:this,mediator:this._mediator,options:this._options});return this._options.renderReturnsComponent?t:void(this._component=p.ReactDOM.render(t,this._options.container))},e.prototype["export"]=function(){var t;return(t=this._component)["export"].apply(t,arguments)},e.prototype.serialize=function(){var t;return(t=this._component).serialize.apply(t,arguments)},e.prototype.deserialize=function(t){return this._component.deserialize(t)},e.prototype._initOptions=function(){this._options=p.SDKUtils.defaults(this._options,{language:"en",title:"PhotoEditor SDK",editor:{},assets:{},photoRoll:{},enableUpload:!0,enableWebcam:!0,showCloseButton:!1,showHeader:!0,showTopBar:!0,responsive:!1}),this._options.editor=p.SDKUtils.defaults(this._options.editor||{},{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",enableZoom:!0,enableDrag:!0,smoothDownscaling:!1,displayResizeMessage:!0,maxMegaPixels:{},forceControls:[],tools:["crop","filter","brightness","saturation","contrast","clarity","exposure","shadows","highlights","text","sticker","brush","radial-focus","linear-focus","border"],controlsOrder:["crop",["filter","adjustments"],["text","sticker","brush"],["focus","border"]],operationsOrder:["exif-orientation","orientation","crop","filter","adjustments","radial-focus","linear-focus","sprite","border","watermark"],controlsOptions:{}}),this._options.editor.maxMegaPixels=p.SDKUtils.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor["export"]=p.SDKUtils.defaults(this._options.editor["export"]||{},{showButton:!0,format:"image/png",type:p.RenderType.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.photoRoll=p.SDKUtils.defaults(this._options.photoRoll||{},{provider:null}),this._options.extensions=p.SDKUtils.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=p.SDKUtils.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null})},e.prototype._registerWebFonts=function(){var t=this.getAssetPath("fonts/montserrat-regular.woff",!0,!0),e=this.getAssetPath("fonts/montserrat-light.woff",!0,!0),n='\n      // Injected by PhotoEditorSDK\n      @font-face {\n        font-family: "__pesdk_Montserrat";\n        src: url(\''+t+"') format('woff');\n        font-weight: normal;\n        font-style: normal;\n      }\n\n      @font-face {\n        font-family: \"__pesdk_Montserrat\";\n        src: url('"+e+"') format('woff');\n        font-weight: 100;\n        font-style: normal;\n      }\n    ";this._webFontsStyle=document.createElement("style"),this._webFontsStyle.innerHTML=n;var o=document.getElementsByTagName("head")[0];o.appendChild(this._webFontsStyle)},e.prototype._initEvents=function(){this._mediator.pipeEvents(this)},e.prototype._disposeEvents=function(){this._mediator.unpipeEvents(this)},e.prototype._initLanguage=function(){this._languages=p.SDKUtils.deepDefaults(this._options.extensions.languages,{de:n(172),en:n(173)}),this._language=this._languages[this._options.language],this._language||p.Log.error(this.constructor.name,"Language `"+this._options.language+"` not found!")},e.prototype.translate=function(t,e){return p.Utils.translate(this._language,t,e)},e.prototype.setImage=function(t){this._component&&this._component.setImage(t)},e.prototype.getAssetPath=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=this._options.assets,r=o.baseUrl,i=o.resolver,a=r+"/"+t;if(e){if(!n){var s="undefined"!=typeof window&&window.devicePixelRatio||1;if(s>1){var l=/\.[\w\?=]+$/;t=t.replace(l,function(t){return"@2x"+t})}}a=r+"/ui/react/"+t}return"undefined"!=typeof i&&null!==i&&(a=i(a)),a},e.prototype.dispose=function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._webFontsStyle.parentNode.removeChild(this._webFontsStyle),p.ReactDOM.unmountComponentAtNode(this._options.container),this._disposeEvents()},e}(p.EventEmitter);R.prototype.identifier="react",R.BaseComponent=p.BaseComponent,R.Controls=x["default"],R.ControlsComponent=g["default"],R.React=p.React,R.ReactBEM=p.ReactBEM,R.SharedState=p.SharedState,R.Constants=p.Constants,R.Utils=p.Utils,R.ScrollbarComponent=m["default"],R.ModalManager=y["default"],R.JSONLoader=E["default"],R.PhotoRoll=S;var k=function(t){function e(){(0,a["default"])(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=(0,l["default"])(this,t.call.apply(t,[this].concat(o)));return i._ui=new R(i.props),i}return(0,c["default"])(e,t),e.prototype.render=function(){return this._ui.render()},e}(p.React.Component);R.ReactComponent=k,p.SDK.UI=p.SDK.UI||{},p.SDK.UI.ReactUI=R,t.exports=R}])});